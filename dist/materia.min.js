/*! For license information please see materia.min.js.LICENSE.txt */
var materia;(()=>{var t={746:(t,e)=>{"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},645:(t,e,n)=>{"use strict";var r=n(841),i=n(489);function o(t,e){for(var n=0,r=t.length,i=0;i<r;++i)n+=t[i]*e[i];return n}function s(t){var e=t.length;if(0===e)return[];t[0].length;var n=r([t.length+1,t.length+1],1),s=r([t.length+1],1);n[e][e]=0;for(var a=0;a<e;++a){for(var u=0;u<=a;++u)n[u][a]=n[a][u]=2*o(t[a],t[u]);s[a]=o(t[a],t[a])}var c=i(n,s),l=0,h=c[e+1];for(a=0;a<h.length;++a)l+=h[a];var f=new Array(e);for(a=0;a<e;++a){h=c[a];var p=0;for(u=0;u<h.length;++u)p+=h[u];f[a]=p/l}return f}function a(t){if(0===t.length)return[];for(var e=t[0].length,n=r([e]),i=s(t),o=0;o<t.length;++o)for(var a=0;a<e;++a)n[a]+=t[o][a]*i[o];return n}a.barycenetric=s,t.exports=a},930:(t,e,n)=>{"use strict";var r=n(293),i=n(706);function o(t,e){this.point=t,this.index=e}function s(t,e){for(var n=t.point,r=e.point,i=n.length,o=0;o<i;++o){var s=r[o]-n[o];if(s)return s}return 0}t.exports=function(t,e){var n=t.length;if(0===n)return[];var a=t[0].length;if(a<1)return[];if(1===a)return function(t,e,n){if(1===t)return n?[[-1,0]]:[];var r=e.map((function(t,e){return[t[0],e]}));r.sort((function(t,e){return t[0]-e[0]}));for(var i=new Array(t-1),o=1;o<t;++o){var s=r[o-1],a=r[o];i[o-1]=[s[1],a[1]]}return n&&i.push([-1,i[0][1]],[i[t-1][1],-1]),i}(n,t,e);for(var u=new Array(n),c=1,l=0;l<n;++l){for(var h=t[l],f=new Array(a+1),p=0,d=0;d<a;++d){var v=h[d];f[d]=v,p+=v*v}f[a]=p,u[l]=new o(f,l),c=Math.max(p,c)}i(u,s),n=u.length;var g=new Array(n+a+1),m=new Array(n+a+1),y=(a+1)*(a+1)*c,b=new Array(a+1);for(l=0;l<=a;++l)b[l]=0;for(b[a]=y,g[0]=b.slice(),m[0]=-1,l=0;l<=a;++l)(f=b.slice())[l]=1,g[l+1]=f,m[l+1]=-1;for(l=0;l<n;++l){var w=u[l];g[l+a+1]=w.point,m[l+a+1]=w.index}var _=r(g,!1);if(_=e?_.filter((function(t){for(var e=0,n=0;n<=a;++n){var r=m[t[n]];if(r<0&&++e>=2)return!1;t[n]=r}return!0})):_.filter((function(t){for(var e=0;e<=a;++e){var n=m[t[e]];if(n<0)return!1;t[e]=n}return!0})),1&a)for(l=0;l<_.length;++l)f=(w=_[l])[0],w[0]=w[1],w[1]=f;return _}},841:t=>{"use strict";function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,s=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)s[o]=n;else for(o=0;o<i;++o)s[o]=e(t,n,r+1);return s}t.exports=function(t,n){switch(void 0===n&&(n=0),typeof t){case"number":if(t>0)return function(t,e){var n,r;for(n=new Array(t),r=0;r<t;++r)n[r]=e;return n}(0|t,n);break;case"object":if("number"==typeof t.length)return e(t,n,0)}return[]}},293:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var i=t[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var s=t.slice(0,i+1),a=r.apply(void 0,s);if(0===a)throw new Error("Input not in general position");for(var u=new Array(i+1),l=0;l<=i;++l)u[l]=l;a<0&&(u[0]=1,u[1]=0);var h=new o(u,new Array(i+1),!1),f=h.adjacent,p=new Array(i+2);for(l=0;l<=i;++l){for(var d=u.slice(),v=0;v<=i;++v)v===l&&(d[v]=-1);var g=d[0];d[0]=d[1],d[1]=g;var m=new o(d,new Array(i+1),!0);f[l]=m,p[l]=m}for(p[i+1]=h,l=0;l<=i;++l){d=f[l].vertices;var y=f[l].adjacent;for(v=0;v<=i;++v){var b=d[v];if(b<0)y[v]=h;else for(var w=0;w<=i;++w)f[w].vertices.indexOf(b)<0&&(y[v]=f[w])}}var _=new c(i,s,p),x=!!e;for(l=i+1;l<n;++l)_.insert(t[l],x);return _.boundary()};var r=n(146),i=n(572).H;function o(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function s(t,e,n){this.vertices=t,this.cell=e,this.index=n}function a(t,e){return i(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function c(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var o=u[t];o||(o=u[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var i=new Function("test",e.join("")),o=r[t+1];return o||(o=r),i(o)}(t)),this.orient=o}var l=c.prototype;l.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-r;s.length>0;){(t=s.pop()).vertices;for(var a=t.adjacent,u=0;u<=n;++u){var c=a[u];if(c.boundary&&!(c.lastVisited<=-r)){for(var l=c.vertices,h=0;h<=n;++h){var f=l[h];i[h]=f<0?e:o[f]}var p=this.orient();if(p>0)return c;c.lastVisited=-r,0===p&&s.push(c)}}}return null},l.walk=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var u=a.vertices,c=a.adjacent,l=0;l<=r;++l)o[l]=i[u[l]];for(a.lastVisited=n,l=0;l<=r;++l){var h=c[l];if(!(h.lastVisited>=n)){var f=o[l];o[l]=t;var p=this.orient();if(o[l]=f,p<0){a=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return a},l.addPeaks=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,u=this.tuple,c=this.interior,l=this.simplices,h=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,c.push(e);for(var f=[];h.length>0;){var p=(e=h.pop()).vertices,d=e.adjacent,v=p.indexOf(n);if(!(v<0))for(var g=0;g<=r;++g)if(g!==v){var m=d[g];if(m.boundary&&!(m.lastVisited>=n)){var y=m.vertices;if(m.lastVisited!==-n){for(var b=0,w=0;w<=r;++w)y[w]<0?(b=w,u[w]=t):u[w]=i[y[w]];if(this.orient()>0){y[b]=n,m.boundary=!1,c.push(m),h.push(m),m.lastVisited=n;continue}m.lastVisited=-n}var _=m.adjacent,x=p.slice(),C=d.slice(),A=new o(x,C,!0);l.push(A);var E=_.indexOf(e);if(!(E<0))for(_[E]=A,C[v]=m,x[g]=-1,C[g]=e,d[g]=A,A.flip(),w=0;w<=r;++w){var S=x[w];if(!(S<0||S===n)){for(var M=new Array(r-1),V=0,k=0;k<=r;++k){var j=x[k];j<0||k===w||(M[V++]=j)}f.push(new s(M,A,w))}}}}}for(f.sort(a),g=0;g+1<f.length;g+=2){var z=f[g],B=f[g+1],L=z.index,I=B.index;L<0||I<0||(z.cell.adjacent[z.index]=B.cell,B.cell.adjacent[B.index]=z.cell)}},l.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var i=this.dimension,o=this.tuple,s=0;s<=i;++s){var a=r.vertices[s];o[s]=a<0?t:n[a]}var u=this.orient(o);u<0||(0!==u||(r=this.handleBoundaryDegeneracy(r,t)))&&this.addPeaks(t,r)}},l.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,r=n.length,i=0;i<r;++i){var o=n[i];if(o.boundary){for(var s=new Array(t),a=o.vertices,u=0,c=0,l=0;l<=t;++l)a[l]>=0?s[u++]=a[l]:c=1&l;if(c===(1&t)){var h=s[0];s[0]=s[1],s[1]=h}e.push(s)}}return e}},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],v="[object Arguments]",g="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",_="[object GeneratorFunction]",x="[object Map]",C="[object Number]",A="[object Object]",E="[object Promise]",S="[object RegExp]",M="[object Set]",V="[object String]",k="[object Symbol]",j="[object WeakMap]",z="[object ArrayBuffer]",B="[object DataView]",L="[object Float32Array]",I="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",F="[object Uint8Array]",R="[object Uint8ClampedArray]",D="[object Uint16Array]",U="[object Uint32Array]",N=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,G=RegExp(Y.source),q=RegExp(Z.source),$=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="["+At+"]",St="["+_t+"]",Mt="\\d+",Vt="["+xt+"]",kt="[^\\ud800-\\udfff"+At+Mt+"\\u2700-\\u27bf"+xt+Ct+"]",jt="\\ud83c[\\udffb-\\udfff]",zt="[^\\ud800-\\udfff]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",Lt="[\\ud800-\\udbff][\\udc00-\\udfff]",It="["+Ct+"]",Pt="(?:"+Vt+"|"+kt+")",Ot="(?:"+It+"|"+kt+")",Tt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",Rt="(?:"+St+"|"+jt+")?",Dt="[\\ufe0e\\ufe0f]?",Ut=Dt+Rt+"(?:\\u200d(?:"+[zt,Bt,Lt].join("|")+")"+Dt+Rt+")*",Nt="(?:"+["[\\u2700-\\u27bf]",Bt,Lt].join("|")+")"+Ut,Wt="(?:"+[zt+St+"?",St,Bt,Lt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['’]","g"),Yt=RegExp(St,"g"),Zt=RegExp(jt+"(?="+jt+")|"+Wt+Ut,"g"),Gt=RegExp([It+"?"+Vt+"+"+Tt+"(?="+[Et,It,"$"].join("|")+")",Ot+"+"+Ft+"(?="+[Et,It+Pt,"$"].join("|")+")",It+"?"+Pt+"+"+Tt,It+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Nt].join("|"),"g"),qt=RegExp("[\\u200d\\ud800-\\udfff"+_t+"\\ufe0e\\ufe0f]"),$t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Jt={};Jt[L]=Jt[I]=Jt[P]=Jt[O]=Jt[T]=Jt[F]=Jt[R]=Jt[D]=Jt[U]=!0,Jt[v]=Jt[g]=Jt[z]=Jt[m]=Jt[B]=Jt[y]=Jt[b]=Jt[w]=Jt[x]=Jt[C]=Jt[A]=Jt[S]=Jt[M]=Jt[V]=Jt[j]=!1;var Qt={};Qt[v]=Qt[g]=Qt[z]=Qt[B]=Qt[m]=Qt[y]=Qt[L]=Qt[I]=Qt[P]=Qt[O]=Qt[T]=Qt[x]=Qt[C]=Qt[A]=Qt[S]=Qt[M]=Qt[V]=Qt[k]=Qt[F]=Qt[R]=Qt[D]=Qt[U]=!0,Qt[b]=Qt[w]=Qt[j]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,ue=ae&&ae.exports===se,ce=ue&&re.process,le=function(){try{return ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=le&&le.isArrayBuffer,fe=le&&le.isDate,pe=le&&le.isMap,de=le&&le.isRegExp,ve=le&&le.isSet,ge=le&&le.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ce(t,e){return!(null==t||!t.length)&&Le(t,e,0)>-1}function Ae(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ee(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Se(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ve(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=Te("length");function ze(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Le(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,Pe,n)}function Ie(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Pe(t){return t!=t}function Oe(t,e){var n=null==t?0:t.length;return n?De(t,e)/n:f}function Te(t){return function(e){return null==e?i:e[t]}}function Fe(t){return function(e){return null==t?i:t[e]}}function Re(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function De(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ne(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function We(t){return function(e){return t(e)}}function He(t,e){return Ee(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&Le(e,t[n],0)>-1;);return n}function Ge(t,e){for(var n=t.length;n--&&Le(e,t[n],0)>-1;);return n}function qe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var $e=Fe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xe=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ke(t){return"\\"+te[t]}function Je(t){return qt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Zt.lastIndex=0;Zt.test(t);)++e;return e}(t):je(t)}function sn(t){return Je(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var un=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Xt))).Array,it=e.Date,_t=e.Error,xt=e.Function,Ct=e.Math,At=e.Object,Et=e.RegExp,St=e.String,Mt=e.TypeError,Vt=r.prototype,kt=xt.prototype,jt=At.prototype,zt=e["__core-js_shared__"],Bt=kt.toString,Lt=jt.hasOwnProperty,It=0,Pt=(n=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ot=jt.toString,Tt=Bt.call(At),Ft=oe._,Rt=Et("^"+Bt.call(Lt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dt=ue?e.Buffer:i,Ut=e.Symbol,Nt=e.Uint8Array,Wt=Dt?Dt.allocUnsafe:i,Zt=tn(At.getPrototypeOf,At),qt=At.create,te=jt.propertyIsEnumerable,re=Vt.splice,ie=Ut?Ut.isConcatSpreadable:i,se=Ut?Ut.iterator:i,ae=Ut?Ut.toStringTag:i,ce=function(){try{var t=co(At,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,je=it&&it.now!==oe.Date.now&&it.now,Fe=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=Ct.ceil,hn=Ct.floor,fn=At.getOwnPropertySymbols,pn=Dt?Dt.isBuffer:i,dn=e.isFinite,vn=Vt.join,gn=tn(At.keys,At),mn=Ct.max,yn=Ct.min,bn=it.now,wn=e.parseInt,_n=Ct.random,xn=Vt.reverse,Cn=co(e,"DataView"),An=co(e,"Map"),En=co(e,"Promise"),Sn=co(e,"Set"),Mn=co(e,"WeakMap"),Vn=co(At,"create"),kn=Mn&&new Mn,jn={},zn=Ro(Cn),Bn=Ro(An),Ln=Ro(En),In=Ro(Sn),Pn=Ro(Mn),On=Ut?Ut.prototype:i,Tn=On?On.valueOf:i,Fn=On?On.toString:i;function Rn(t){if(na(t)&&!Ys(t)&&!(t instanceof Wn)){if(t instanceof Nn)return t;if(Lt.call(t,"__wrapped__"))return Do(t)}return new Nn(t)}var Dn=function(){function t(){}return function(e){if(!ea(e))return{};if(qt)return qt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function Nn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Zn;++e<n;)this.add(t[e])}function qn(t){var e=this.__data__=new Yn(t);this.size=e.size}function $n(t,e){var n=Ys(t),r=!n&&Hs(t),i=!n&&!r&&$s(t),o=!n&&!r&&!i&&la(t),s=n||r||i||o,a=s?Ue(t.length,St):[],u=a.length;for(var c in t)!e&&!Lt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,u))||a.push(c);return a}function Xn(t){var e=t.length;return e?t[Zr(0,e-1)]:i}function Kn(t,e){return Io(Mi(t),sr(e,0,t.length))}function Jn(t){return Io(Mi(t))}function Qn(t,e,n){(n!==i&&!Us(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Lt.call(t,e)&&Us(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Us(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Vi(e,Ba(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Ma(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=Ys(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Mi(t,a)}else{var f=fo(t),p=f==w||f==_;if($s(t))return _i(t,u);if(f==A||f==v||p&&!o){if(a=c||p?{}:vo(t),!u)return c?function(t,e){return Vi(t,ho(t),e)}(t,function(t,e){return t&&Vi(e,La(e),t)}(a,t)):function(t,e){return Vi(t,lo(t),e)}(t,rr(a,t))}else{if(!Qt[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case z:return xi(t);case m:case y:return new i(+t);case B:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case I:case P:case O:case T:case F:case R:case D:case U:return Ci(t,n);case x:return new i;case C:case V:return new i(t);case S:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case M:return new i;case k:return r=t,Tn?At(Tn.call(r)):{}}}(t,f,u)}}s||(s=new qn);var d=s.get(t);if(d)return d;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var g=h?i:(l?c?no:eo:c?La:Ba)(t);return be(g||t,(function(r,i){g&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=At(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new Mt(o);return jo((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Ce,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Ee(e,We(n))),r?(o=Ae,s=!1):e.length>=200&&(o=Ye,s=!1,e=new Gn(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Rn.templateSettings={escape:$,evaluate:X,interpolate:K,variable:"",imports:{_:Rn}},Rn.prototype=Un.prototype,Rn.prototype.constructor=Rn,Nn.prototype=Dn(Un.prototype),Nn.prototype.constructor=Nn,Wn.prototype=Dn(Un.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=Vn?Vn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(Vn){var n=e[t];return n===s?i:n}return Lt.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return Vn?e[t]!==i:Lt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Vn&&e===i?s:e,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Yn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Yn.prototype.has=function(t){return er(this.__data__,t)>-1},Yn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(An||Yn),string:new Hn}},Zn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Zn.prototype.get=function(t){return ao(this,t).get(t)},Zn.prototype.has=function(t){return ao(this,t).has(t)},Zn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,s),this},Gn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.clear=function(){this.__data__=new Yn,this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},qn.prototype.get=function(t){return this.__data__.get(t)},qn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!An||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(t,e),this.size=n.size,this};var hr=zi(br),fr=zi(wr,!0);function pr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!ca(a):n(a,u)))var u=a,c=s}return c}function vr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=go),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Se(i,a):r||(i[i.length]=a)}return i}var mr=Bi(),yr=Bi(!0);function br(t,e){return t&&mr(t,e,Ba)}function wr(t,e){return t&&yr(t,e,Ba)}function _r(t,e){return xe(e,(function(e){return Js(t[e])}))}function xr(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function Cr(t,e,n){var r=e(t);return Ys(t)?r:Se(r,n(t))}function Ar(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in At(t)?function(t){var e=Lt.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=Ot.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Ot.call(t)}(t)}function Er(t,e){return t>e}function Sr(t,e){return null!=t&&Lt.call(t,e)}function Mr(t,e){return null!=t&&e in At(t)}function Vr(t,e,n){for(var o=n?Ae:Ce,s=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Ee(f,We(e))),l=yn(f.length,l),c[u]=!n&&(e||s>=120&&f.length>=120)?new Gn(u&&f):i}f=t[0];var p=-1,d=c[0];t:for(;++p<s&&h.length<l;){var v=f[p],g=e?e(v):v;if(v=n||0!==v?v:0,!(d?Ye(d,g):o(h,g,n))){for(u=a;--u;){var m=c[u];if(!(m?Ye(m,g):o(t[u],g,n)))continue t}d&&d.push(g),h.push(v)}}return h}function kr(t,e,n){var r=null==(t=So(t,e=mi(e,t)))?t:t[Fo(Ko(e))];return null==r?i:me(r,t,n)}function jr(t){return na(t)&&Ar(t)==v}function zr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Ys(t),u=Ys(e),c=a?g:fo(t),l=u?g:fo(e),h=(c=c==v?A:c)==A,f=(l=l==v?A:l)==A,p=c==l;if(p&&$s(t)){if(!$s(e))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new qn),a||la(t)?Qi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case B:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case z:return!(t.byteLength!=e.byteLength||!o(new Nt(t),new Nt(e)));case m:case y:case C:return Us(+t,+e);case b:return t.name==e.name&&t.message==e.message;case S:case V:return t==e+"";case x:var a=Qe;case M:var u=1&r;if(a||(a=nn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Qi(a(t),a(e),r,i,o,s);return s.delete(t),l;case k:if(Tn)return Tn.call(t)==Tn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var d=h&&Lt.call(t,"__wrapped__"),w=f&&Lt.call(e,"__wrapped__");if(d||w){var _=d?t.value():t,E=w?e.value():e;return s||(s=new qn),o(_,E,n,r,s)}}return!!p&&(s||(s=new qn),function(t,e,n,r,o,s){var a=1&n,u=eo(t),c=u.length;if(c!=eo(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Lt.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var d=!0;s.set(t,e),s.set(e,t);for(var v=a;++l<c;){var g=t[h=u[l]],m=e[h];if(r)var y=a?r(m,g,h,e,t,s):r(g,m,h,t,e,s);if(!(y===i?g===m||o(g,m,n,r,s):y)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,r,o,s))}(t,e,n,r,zr,o))}function Br(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=At(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new qn;if(r)var p=r(l,h,c,t,e,f);if(!(p===i?zr(h,l,3,r,f):p))return!1}}return!0}function Lr(t){return!(!ea(t)||(e=t,Pt&&Pt in e))&&(Js(t)?Rt:vt).test(Ro(t));var e}function Ir(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Ys(t)?Rr(t[0],t[1]):Fr(t):pu(t)}function Pr(t){if(!xo(t))return gn(t);var e=[];for(var n in At(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Or(t,e){return t<e}function Tr(t,e){var n=-1,i=Gs(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=uo(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Br(n,t,e)}}function Rr(t,e){return bo(t)&&Co(e)?Ao(Fo(t),e):function(n){var r=Ma(n,t);return r===i&&r===e?Va(n,t):zr(e,r,3)}}function Dr(t,e,n,r,o){t!==e&&mr(e,(function(s,a){if(o||(o=new qn),ea(s))!function(t,e,n,r,o,s,a){var u=Vo(t,n),c=Vo(e,n),l=a.get(c);if(l)Qn(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):i,f=h===i;if(f){var p=Ys(c),d=!p&&$s(c),v=!p&&!d&&la(c);h=c,p||d||v?Ys(u)?h=u:qs(u)?h=Mi(u):d?(f=!1,h=_i(c,!0)):v?(f=!1,h=Ci(c,!0)):h=[]:oa(c)||Hs(c)?(h=u,Hs(u)?h=ya(u):ea(u)&&!Js(u)||(h=vo(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Qn(t,n,h)}}(t,e,a,n,Dr,r,o);else{var u=r?r(Vo(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Qn(t,a,u)}}),La)}function Ur(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function Nr(t,e,n){e=e.length?Ee(e,(function(t){return Ys(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Ee(e,We(so()));var i=Tr(t,(function(t,n,i){var o=Ee(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ai(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Wr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=xr(t,s);n(a,s)&&Kr(o,mi(s,t),a)}return o}function Hr(t,e,n,r){var i=r?Ie:Le,o=-1,s=e.length,a=t;for(t===e&&(e=Mi(e)),n&&(a=Ee(t,We(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&re.call(a,u,1),re.call(t,u,1);return t}function Yr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?re.call(t,i,1):ci(t,i)}}return t}function Zr(t,e){return t+hn(_n()*(e-t+1))}function Gr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function qr(t,e){return zo(Eo(t,e,iu),t+"")}function $r(t){return Xn(Ua(t))}function Xr(t,e){var n=Ua(t);return Io(n,sr(e,0,n.length))}function Kr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=mi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=Fo(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=ea(h)?h:mo(e[o+1])?[]:{})}tr(u,c,l),u=u[c]}return t}var Jr=kn?function(t,e){return kn.set(t,e),t}:iu,Qr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Io(Ua(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ca(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=ca(e),l=e===i;o<s;){var h=hn((o+s)/2),f=n(t[h]),p=f!==i,d=null===f,v=f==f,g=ca(f);if(a)var m=r||v;else m=l?v&&(r||p):u?v&&p&&(r||!d):c?v&&p&&!d&&(r||!g):!d&&!g&&(r?f<=e:f<e);m?o=h+1:s=h}return yn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Us(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ca(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Ys(t))return Ee(t,ai)+"";if(ca(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Ce,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Ae;else if(o>=200){var c=e?null:Gi(t);if(c)return nn(c);s=!1,i=Ye,u=new Gn}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ci(t,e){return null==(t=So(t,e=mi(e,t)))||delete t[Fo(Ko(e))]}function li(t,e,n,r){return Kr(t,e,n(xr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Se([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=lr(s[o]||a,t[u],e,n));return ui(gr(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function vi(t){return qs(t)?t:[]}function gi(t){return"function"==typeof t?t:iu}function mi(t,e){return Ys(t)?t:bo(t,e)?[t]:To(ba(t))}var yi=qr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var wi=le||function(t){return oe.clearTimeout(t)};function _i(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Nt(e).set(new Nt(t)),e}function Ci(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ca(t),a=e!==i,u=null===e,c=e==e,l=ca(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Ei(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,l=mn(s-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function Si(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,h=mn(s-u,0),f=r(h+l),p=!i;++o<h;)f[o]=t[o];for(var d=o;++c<l;)f[d+c]=e[c];for(;++a<u;)(p||o<s)&&(f[d+n[a]]=t[o++]);return f}function Mi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Vi(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?ir(n,u,c):tr(n,u,c)}return n}function ki(t,e){return function(n,r){var i=Ys(n)?ye:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function ji(t){return qr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&yo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=At(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}function zi(t,e){return function(n,r){if(null==n)return n;if(!Gs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=At(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Bi(t){return function(e,n,r){for(var i=-1,o=At(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Li(t){return function(e){var n=Je(e=ba(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ii(t){return function(e){return Me(Ja(Ha(e).replace(Ht,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Dn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Oi(t){return function(e,n,r){var o=At(e);if(!Gs(e)){var s=so(n,3);e=Ba(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Ti(t){return to((function(e){var n=e.length,r=n,s=Nn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Mt(o);if(s&&!u&&"wrapper"==io(a))var u=new Nn([],!0)}for(r=u?r:n;++r<n;){var c=io(a=e[r]),l="wrapper"==c?ro(a):i;u=l&&wo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[io(l[0])].apply(u,l[3]):1==a.length&&wo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ys(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,s,a,u,l,h,f){var p=e&c,d=1&e,v=2&e,g=24&e,m=512&e,y=v?i:Pi(t);return function i(){for(var c=arguments.length,b=r(c),w=c;w--;)b[w]=arguments[w];if(g)var _=oo(i),x=qe(b,_);if(o&&(b=Ei(b,o,s,g)),a&&(b=Si(b,a,u,g)),c-=x,g&&c<f){var C=en(b,_);return Yi(t,e,Fi,i.placeholder,n,b,C,l,h,f-c)}var A=d?n:this,E=v?A[t]:t;return c=b.length,l?b=Mo(b,l):m&&c>1&&b.reverse(),p&&h<c&&(b.length=h),this&&this!==oe&&this instanceof i&&(E=y||Pi(E)),E.apply(A,b)}}function Ri(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Di(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function Ui(t){return to((function(e){return e=Ee(e,We(so())),qr((function(n){var r=this;return t(e,(function(t){return me(t,r,n)}))}))}))}function Ni(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Gr(e,t):e;var r=Gr(e,ln(t/on(e)));return Je(e)?bi(sn(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n,i){for(var o=-1,s=mn(ln((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:da(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Yi(t,e,n,r,o,s,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,l,h],d=n.apply(i,p);return wo(t)&&ko(d,p),d.placeholder=r,Bo(d,t,e)}function Zi(t){var e=Ct[t];return function(t,n){if(t=ma(t),(n=null==n?0:yn(va(n),292))&&dn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Gi=Sn&&1/nn(new Sn([,-0]))[1]==l?function(t){return new Sn(t)}:cu;function qi(t){return function(e){var n=fo(e);return n==x?Qe(e):n==M?rn(e):function(t,e){return Ee(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $i(t,e,n,s,l,h,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new Mt(o);var v=s?s.length:0;if(v||(e&=-97,s=l=i),f=f===i?f:mn(va(f),0),p=p===i?p:va(p),v-=l?l.length:0,64&e){var g=s,m=l;s=l=i}var y=d?i:ro(t),b=[t,e,n,s,l,g,m,h,f,p];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Ei(l,u,e[4]):u,t[4]=l?en(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Si(l,u,e[6]):u,t[6]=l?en(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],s=b[3],l=b[4],!(p=b[9]=b[9]===i?d?0:t.length:mn(b[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Pi(t);return function s(){for(var a=arguments.length,u=r(a),c=a,l=oo(s);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:en(u,l);return(a-=h.length)<n?Yi(t,e,Fi,s.placeholder,i,u,h,i,i,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,u)}}(t,e,p):e!=u&&33!=e||l.length?Fi.apply(i,b):function(t,e,n,i){var o=1&e,s=Pi(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==oe&&this instanceof e?s:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return me(f,o?n:this,h)}}(t,e,n,s);else var w=function(t,e,n){var r=1&e,i=Pi(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Bo((y?Jr:ko)(w,b),t,e)}function Xi(t,e,n,r){return t===i||Us(t,jt[n])&&!Lt.call(r,n)?e:t}function Ki(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Dr(t,e,i,Ki,s),s.delete(e)),t}function Ji(t){return oa(t)?i:t}function Qi(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,p=!0,d=2&n?new Gn:i;for(s.set(t,e),s.set(e,t);++f<u;){var v=t[f],g=e[f];if(r)var m=a?r(g,v,f,e,t,s):r(v,g,f,t,e,s);if(m!==i){if(m)continue;p=!1;break}if(d){if(!ke(e,(function(t,e){if(!Ye(d,e)&&(v===t||o(v,t,n,r,s)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!o(v,g,n,r,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function to(t){return zo(Eo(t,i,Zo),t+"")}function eo(t){return Cr(t,Ba,lo)}function no(t){return Cr(t,La,ho)}var ro=kn?function(t){return kn.get(t)}:cu;function io(t){for(var e=t.name+"",n=jn[e],r=Lt.call(jn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Lt.call(Rn,"placeholder")?Rn:t).placeholder}function so(){var t=Rn.iteratee||ou;return t=t===ou?Ir:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=Ba(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Co(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Lr(n)?n:i}var lo=fn?function(t){return null==t?[]:(t=At(t),xe(fn(t),(function(e){return te.call(t,e)})))}:gu,ho=fn?function(t){for(var e=[];t;)Se(e,lo(t)),t=Zt(t);return e}:gu,fo=Ar;function po(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var s=Fo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&mo(s,i)&&(Ys(t)||Hs(t))}function vo(t){return"function"!=typeof t.constructor||xo(t)?{}:Dn(Zt(t))}function go(t){return Ys(t)||Hs(t)||!!(ie&&t&&t[ie])}function mo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Gs(n)&&mo(e,n.length):"string"==r&&e in n)&&Us(n[e],t)}function bo(t,e){if(Ys(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ca(t))||Q.test(t)||!J.test(t)||null!=e&&t in At(e)}function wo(t){var e=io(t),n=Rn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(Cn&&fo(new Cn(new ArrayBuffer(1)))!=B||An&&fo(new An)!=x||En&&fo(En.resolve())!=E||Sn&&fo(new Sn)!=M||Mn&&fo(new Mn)!=j)&&(fo=function(t){var e=Ar(t),n=e==A?t.constructor:i,r=n?Ro(n):"";if(r)switch(r){case zn:return B;case Bn:return x;case Ln:return E;case In:return M;case Pn:return j}return e});var _o=zt?Js:mu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jt)}function Co(t){return t==t&&!ea(t)}function Ao(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in At(n))}}function Eo(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=mn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),me(t,this,u)}}function So(t,e){return e.length<2?t:xr(t,ei(e,0,-1))}function Mo(t,e){for(var n=t.length,r=yn(e.length,n),o=Mi(t);r--;){var s=e[r];t[r]=mo(s,n)?o[s]:i}return t}function Vo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ko=Lo(Jr),jo=Fe||function(t,e){return oe.setTimeout(t,e)},zo=Lo(Qr);function Bo(t,e,n){var r=e+"";return zo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(d,(function(n){var r="_."+n[0];e&n[1]&&!Ce(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Lo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Io(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Zr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Po,Oo,To=(Po=Ps((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Oo.size&&Oo.clear(),t})),Oo=Po.cache,Po);function Fo(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ro(t){if(null!=t){try{return Bt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Do(t){if(t instanceof Wn)return t.clone();var e=new Nn(t.__wrapped__,t.__chain__);return e.__actions__=Mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=qr((function(t,e){return qs(t)?lr(t,gr(e,1,qs,!0)):[]})),No=qr((function(t,e){var n=Ko(e);return qs(n)&&(n=i),qs(t)?lr(t,gr(e,1,qs,!0),so(n,2)):[]})),Wo=qr((function(t,e){var n=Ko(e);return qs(n)&&(n=i),qs(t)?lr(t,gr(e,1,qs,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=mn(r+i,0)),Be(t,so(e,3),i)}function Yo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=va(n),o=n<0?mn(r+o,0):yn(o,r-1)),Be(t,so(e,3),o,!0)}function Zo(t){return null!=t&&t.length?gr(t,1):[]}function Go(t){return t&&t.length?t[0]:i}var qo=qr((function(t){var e=Ee(t,vi);return e.length&&e[0]===t[0]?Vr(e):[]})),$o=qr((function(t){var e=Ko(t),n=Ee(t,vi);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Vr(n,so(e,2)):[]})),Xo=qr((function(t){var e=Ko(t),n=Ee(t,vi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Vr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=qr(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Yr(t,Ee(e,(function(t){return mo(t,n)?+t:t})).sort(Ai)),r}));function es(t){return null==t?t:xn.call(t)}var ns=qr((function(t){return ui(gr(t,1,qs,!0))})),rs=qr((function(t){var e=Ko(t);return qs(e)&&(e=i),ui(gr(t,1,qs,!0),so(e,2))})),is=qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,ui(gr(t,1,qs,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(qs(t))return e=mn(t.length,e),!0})),Ue(e,(function(e){return Ee(t,Te(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Ee(n,(function(t){return me(e,i,t)}))}var as=qr((function(t,e){return qs(t)?lr(t,e):[]})),us=qr((function(t){return pi(xe(t,qs))})),cs=qr((function(t){var e=Ko(t);return qs(e)&&(e=i),pi(xe(t,qs),so(e,2))})),ls=qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,pi(xe(t,qs),i,e)})),hs=qr(os),fs=qr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function ps(t){var e=Rn(t);return e.__chain__=!0,e}function ds(t,e){return e(t)}var vs=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ds,args:[o],thisArg:i}),new Nn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),gs=ki((function(t,e,n){Lt.call(t,n)?++t[n]:ir(t,n,1)})),ms=Oi(Ho),ys=Oi(Yo);function bs(t,e){return(Ys(t)?be:hr)(t,so(e,3))}function ws(t,e){return(Ys(t)?we:fr)(t,so(e,3))}var _s=ki((function(t,e,n){Lt.call(t,n)?t[n].push(e):ir(t,n,[e])})),xs=qr((function(t,e,n){var i=-1,o="function"==typeof e,s=Gs(t)?r(t.length):[];return hr(t,(function(t){s[++i]=o?me(e,t,n):kr(t,e,n)})),s})),Cs=ki((function(t,e,n){ir(t,n,e)}));function As(t,e){return(Ys(t)?Ee:Tr)(t,so(e,3))}var Es=ki((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ss=qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Nr(t,gr(e,1),[])})),Ms=je||function(){return oe.Date.now()};function Vs(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,$i(t,c,i,i,i,i,e)}function ks(t,e){var n;if("function"!=typeof e)throw new Mt(o);return t=va(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var js=qr((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(js));r|=u}return $i(t,r,e,n,i)})),zs=qr((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(zs));r|=u}return $i(e,r,t,n,i)}));function Bs(t,e,n){var r,s,a,u,c,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new Mt(o);function v(e){var n=r,o=s;return r=s=i,h=e,u=t.apply(o,n)}function g(t){return h=t,c=jo(y,e),f?v(t):u}function m(t){var n=t-l;return l===i||n>=e||n<0||p&&t-h>=a}function y(){var t=Ms();if(m(t))return b(t);c=jo(y,function(t){var n=e-(t-l);return p?yn(n,a-(t-h)):n}(t))}function b(t){return c=i,d&&r?v(t):(r=s=i,u)}function w(){var t=Ms(),n=m(t);if(r=arguments,s=this,l=t,n){if(c===i)return g(l);if(p)return wi(c),c=jo(y,e),v(l)}return c===i&&(c=jo(y,e)),u}return e=ma(e)||0,ea(n)&&(f=!!n.leading,a=(p="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),w.cancel=function(){c!==i&&wi(c),h=0,r=l=s=c=i},w.flush=function(){return c===i?u:b(Ms())},w}var Ls=qr((function(t,e){return cr(t,1,e)})),Is=qr((function(t,e,n){return cr(t,ma(e)||0,n)}));function Ps(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Mt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ps.Cache||Zn),n}function Os(t){if("function"!=typeof t)throw new Mt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ps.Cache=Zn;var Ts=yi((function(t,e){var n=(e=1==e.length&&Ys(e[0])?Ee(e[0],We(so())):Ee(gr(e,1),We(so()))).length;return qr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return me(t,this,r)}))})),Fs=qr((function(t,e){var n=en(e,oo(Fs));return $i(t,u,i,e,n)})),Rs=qr((function(t,e){var n=en(e,oo(Rs));return $i(t,64,i,e,n)})),Ds=to((function(t,e){return $i(t,256,i,i,i,e)}));function Us(t,e){return t===e||t!=t&&e!=e}var Ns=Hi(Er),Ws=Hi((function(t,e){return t>=e})),Hs=jr(function(){return arguments}())?jr:function(t){return na(t)&&Lt.call(t,"callee")&&!te.call(t,"callee")},Ys=r.isArray,Zs=he?We(he):function(t){return na(t)&&Ar(t)==z};function Gs(t){return null!=t&&ta(t.length)&&!Js(t)}function qs(t){return na(t)&&Gs(t)}var $s=pn||mu,Xs=fe?We(fe):function(t){return na(t)&&Ar(t)==y};function Ks(t){if(!na(t))return!1;var e=Ar(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Js(t){if(!ea(t))return!1;var e=Ar(t);return e==w||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==va(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=pe?We(pe):function(t){return na(t)&&fo(t)==x};function ia(t){return"number"==typeof t||na(t)&&Ar(t)==C}function oa(t){if(!na(t)||Ar(t)!=A)return!1;var e=Zt(t);if(null===e)return!0;var n=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Bt.call(n)==Tt}var sa=de?We(de):function(t){return na(t)&&Ar(t)==S},aa=ve?We(ve):function(t){return na(t)&&fo(t)==M};function ua(t){return"string"==typeof t||!Ys(t)&&na(t)&&Ar(t)==V}function ca(t){return"symbol"==typeof t||na(t)&&Ar(t)==k}var la=ge?We(ge):function(t){return na(t)&&ta(t.length)&&!!Jt[Ar(t)]},ha=Hi(Or),fa=Hi((function(t,e){return t<=e}));function pa(t){if(!t)return[];if(Gs(t))return ua(t)?sn(t):Mi(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==x?Qe:e==M?nn:Ua)(t)}function da(t){return t?(t=ma(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function va(t){var e=da(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?sr(va(t),0,p):0}function ma(t){if("number"==typeof t)return t;if(ca(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ne(t);var n=dt.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function ya(t){return Vi(t,La(t))}function ba(t){return null==t?"":ai(t)}var wa=ji((function(t,e){if(xo(e)||Gs(e))Vi(e,Ba(e),t);else for(var n in e)Lt.call(e,n)&&tr(t,n,e[n])})),_a=ji((function(t,e){Vi(e,La(e),t)})),xa=ji((function(t,e,n,r){Vi(e,La(e),t,r)})),Ca=ji((function(t,e,n,r){Vi(e,Ba(e),t,r)})),Aa=to(or),Ea=qr((function(t,e){t=At(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=La(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||Us(h,jt[l])&&!Lt.call(t,l))&&(t[l]=s[l])}return t})),Sa=qr((function(t){return t.push(i,Ki),me(Pa,i,t)}));function Ma(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Va(t,e){return null!=t&&po(t,e,Mr)}var ka=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),t[e]=n}),eu(iu)),ja=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),Lt.call(t,e)?t[e].push(n):t[e]=[n]}),so),za=qr(kr);function Ba(t){return Gs(t)?$n(t):Pr(t)}function La(t){return Gs(t)?$n(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in At(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n}(t)}var Ia=ji((function(t,e,n){Dr(t,e,n)})),Pa=ji((function(t,e,n,r){Dr(t,e,n,r)})),Oa=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ee(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),Vi(t,no(t),n),r&&(n=ar(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),Ta=to((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return Va(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=Ee(no(t),(function(t){return[t]}));return e=so(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Ra=qi(Ba),Da=qi(La);function Ua(t){return null==t?[]:He(t,Ba(t))}var Na=Ii((function(t,e,n){return e=e.toLowerCase(),t+(n?Wa(e):e)}));function Wa(t){return Ka(ba(t).toLowerCase())}function Ha(t){return(t=ba(t))&&t.replace(yt,$e).replace(Yt,"")}var Ya=Ii((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Za=Ii((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ga=Li("toLowerCase"),qa=Ii((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),$a=Ii((function(t,e,n){return t+(n?" ":"")+Ka(e)})),Xa=Ii((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ka=Li("toUpperCase");function Ja(t,e,n){return t=ba(t),(e=n?i:e)===i?function(t){return $t.test(t)}(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Qa=qr((function(t,e){try{return me(t,i,e)}catch(t){return Ks(t)?t:new _t(t)}})),tu=to((function(t,e){return be(e,(function(e){e=Fo(e),ir(t,e,js(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Ti(),ru=Ti(!0);function iu(t){return t}function ou(t){return Ir("function"==typeof t?t:ar(t,1))}var su=qr((function(t,e){return function(n){return kr(n,t,e)}})),au=qr((function(t,e){return function(n){return kr(t,n,e)}}));function uu(t,e,n){var r=Ba(e),i=_r(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Ba(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Js(t);return be(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Se([this.value()],arguments))})})),t}function cu(){}var lu=Ui(Ee),hu=Ui(_e),fu=Ui(ke);function pu(t){return bo(t)?Te(Fo(t)):function(t){return function(e){return xr(e,t)}}(t)}var du=Wi(),vu=Wi(!0);function gu(){return[]}function mu(){return!1}var yu,bu=Di((function(t,e){return t+e}),0),wu=Zi("ceil"),_u=Di((function(t,e){return t/e}),1),xu=Zi("floor"),Cu=Di((function(t,e){return t*e}),1),Au=Zi("round"),Eu=Di((function(t,e){return t-e}),0);return Rn.after=function(t,e){if("function"!=typeof e)throw new Mt(o);return t=va(t),function(){if(--t<1)return e.apply(this,arguments)}},Rn.ary=Vs,Rn.assign=wa,Rn.assignIn=_a,Rn.assignInWith=xa,Rn.assignWith=Ca,Rn.at=Aa,Rn.before=ks,Rn.bind=js,Rn.bindAll=tu,Rn.bindKey=zs,Rn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ys(t)?t:[t]},Rn.chain=ps,Rn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:mn(va(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(ln(o/e));s<o;)u[a++]=ei(t,s,s+=e);return u},Rn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Rn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Se(Ys(n)?Mi(n):[n],gr(e,1))},Rn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Ee(t,(function(t){if("function"!=typeof t[1])throw new Mt(o);return[n(t[0]),t[1]]})):[],qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(me(i[0],this,n))return me(i[1],this,n)}}))},Rn.conforms=function(t){return function(t){var e=Ba(t);return function(n){return ur(n,t,e)}}(ar(t,1))},Rn.constant=eu,Rn.countBy=gs,Rn.create=function(t,e){var n=Dn(t);return null==e?n:rr(n,e)},Rn.curry=function t(e,n,r){var o=$i(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Rn.curryRight=function t(e,n,r){var o=$i(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Rn.debounce=Bs,Rn.defaults=Ea,Rn.defaultsDeep=Sa,Rn.defer=Ls,Rn.delay=Is,Rn.difference=Uo,Rn.differenceBy=No,Rn.differenceWith=Wo,Rn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:va(e))<0?0:e,r):[]},Rn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:va(e)))<0?0:e):[]},Rn.dropRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0,!0):[]},Rn.dropWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0):[]},Rn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=va(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:va(r))<0&&(r+=o),r=n>r?0:ga(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Rn.filter=function(t,e){return(Ys(t)?xe:vr)(t,so(e,3))},Rn.flatMap=function(t,e){return gr(As(t,e),1)},Rn.flatMapDeep=function(t,e){return gr(As(t,e),l)},Rn.flatMapDepth=function(t,e,n){return n=n===i?1:va(n),gr(As(t,e),n)},Rn.flatten=Zo,Rn.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Rn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:va(e)):[]},Rn.flip=function(t){return $i(t,512)},Rn.flow=nu,Rn.flowRight=ru,Rn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Rn.functions=function(t){return null==t?[]:_r(t,Ba(t))},Rn.functionsIn=function(t){return null==t?[]:_r(t,La(t))},Rn.groupBy=_s,Rn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Rn.intersection=qo,Rn.intersectionBy=$o,Rn.intersectionWith=Xo,Rn.invert=ka,Rn.invertBy=ja,Rn.invokeMap=xs,Rn.iteratee=ou,Rn.keyBy=Cs,Rn.keys=Ba,Rn.keysIn=La,Rn.map=As,Rn.mapKeys=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Rn.mapValues=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Rn.matches=function(t){return Fr(ar(t,1))},Rn.matchesProperty=function(t,e){return Rr(t,ar(e,1))},Rn.memoize=Ps,Rn.merge=Ia,Rn.mergeWith=Pa,Rn.method=su,Rn.methodOf=au,Rn.mixin=uu,Rn.negate=Os,Rn.nthArg=function(t){return t=va(t),qr((function(e){return Ur(e,t)}))},Rn.omit=Oa,Rn.omitBy=function(t,e){return Fa(t,Os(so(e)))},Rn.once=function(t){return ks(2,t)},Rn.orderBy=function(t,e,n,r){return null==t?[]:(Ys(e)||(e=null==e?[]:[e]),Ys(n=r?i:n)||(n=null==n?[]:[n]),Nr(t,e,n))},Rn.over=lu,Rn.overArgs=Ts,Rn.overEvery=hu,Rn.overSome=fu,Rn.partial=Fs,Rn.partialRight=Rs,Rn.partition=Es,Rn.pick=Ta,Rn.pickBy=Fa,Rn.property=pu,Rn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Rn.pull=Jo,Rn.pullAll=Qo,Rn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,so(n,2)):t},Rn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},Rn.pullAt=ts,Rn.range=du,Rn.rangeRight=vu,Rn.rearg=Ds,Rn.reject=function(t,e){return(Ys(t)?xe:vr)(t,Os(so(e,3)))},Rn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Yr(t,i),n},Rn.rest=function(t,e){if("function"!=typeof t)throw new Mt(o);return qr(t,e=e===i?e:va(e))},Rn.reverse=es,Rn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:va(e),(Ys(t)?Kn:Xr)(t,e)},Rn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},Rn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},Rn.shuffle=function(t){return(Ys(t)?Jn:ti)(t)},Rn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:va(e),n=n===i?r:va(n)),ei(t,e,n)):[]},Rn.sortBy=Ss,Rn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Rn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},Rn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Je(t)?bi(sn(t),0,n):t.split(e,n):[]},Rn.spread=function(t,e){if("function"!=typeof t)throw new Mt(o);return e=null==e?0:mn(va(e),0),qr((function(n){var r=n[e],i=bi(n,0,e);return r&&Se(i,r),me(t,this,i)}))},Rn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Rn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:va(e))<0?0:e):[]},Rn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:va(e)))<0?0:e,r):[]},Rn.takeRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!1,!0):[]},Rn.takeWhile=function(t,e){return t&&t.length?hi(t,so(e,3)):[]},Rn.tap=function(t,e){return e(t),t},Rn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Mt(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Bs(t,e,{leading:r,maxWait:e,trailing:i})},Rn.thru=ds,Rn.toArray=pa,Rn.toPairs=Ra,Rn.toPairsIn=Da,Rn.toPath=function(t){return Ys(t)?Ee(t,Fo):ca(t)?[t]:Mi(To(ba(t)))},Rn.toPlainObject=ya,Rn.transform=function(t,e,n){var r=Ys(t),i=r||$s(t)||la(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Js(o)?Dn(Zt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Rn.unary=function(t){return Vs(t,1)},Rn.union=ns,Rn.unionBy=rs,Rn.unionWith=is,Rn.uniq=function(t){return t&&t.length?ui(t):[]},Rn.uniqBy=function(t,e){return t&&t.length?ui(t,so(e,2)):[]},Rn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Rn.unset=function(t,e){return null==t||ci(t,e)},Rn.unzip=os,Rn.unzipWith=ss,Rn.update=function(t,e,n){return null==t?t:li(t,e,gi(n))},Rn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,gi(n),r)},Rn.values=Ua,Rn.valuesIn=function(t){return null==t?[]:He(t,La(t))},Rn.without=as,Rn.words=Ja,Rn.wrap=function(t,e){return Fs(gi(e),t)},Rn.xor=us,Rn.xorBy=cs,Rn.xorWith=ls,Rn.zip=hs,Rn.zipObject=function(t,e){return di(t||[],e||[],tr)},Rn.zipObjectDeep=function(t,e){return di(t||[],e||[],Kr)},Rn.zipWith=fs,Rn.entries=Ra,Rn.entriesIn=Da,Rn.extend=_a,Rn.extendWith=xa,uu(Rn,Rn),Rn.add=bu,Rn.attempt=Qa,Rn.camelCase=Na,Rn.capitalize=Wa,Rn.ceil=wu,Rn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))==n?n:0),e!==i&&(e=(e=ma(e))==e?e:0),sr(ma(t),e,n)},Rn.clone=function(t){return ar(t,4)},Rn.cloneDeep=function(t){return ar(t,5)},Rn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Rn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Rn.conformsTo=function(t,e){return null==e||ur(t,e,Ba(e))},Rn.deburr=Ha,Rn.defaultTo=function(t,e){return null==t||t!=t?e:t},Rn.divide=_u,Rn.endsWith=function(t,e,n){t=ba(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(va(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Rn.eq=Us,Rn.escape=function(t){return(t=ba(t))&&q.test(t)?t.replace(Z,Xe):t},Rn.escapeRegExp=function(t){return(t=ba(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Rn.every=function(t,e,n){var r=Ys(t)?_e:pr;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Rn.find=ms,Rn.findIndex=Ho,Rn.findKey=function(t,e){return ze(t,so(e,3),br)},Rn.findLast=ys,Rn.findLastIndex=Yo,Rn.findLastKey=function(t,e){return ze(t,so(e,3),wr)},Rn.floor=xu,Rn.forEach=bs,Rn.forEachRight=ws,Rn.forIn=function(t,e){return null==t?t:mr(t,so(e,3),La)},Rn.forInRight=function(t,e){return null==t?t:yr(t,so(e,3),La)},Rn.forOwn=function(t,e){return t&&br(t,so(e,3))},Rn.forOwnRight=function(t,e){return t&&wr(t,so(e,3))},Rn.get=Ma,Rn.gt=Ns,Rn.gte=Ws,Rn.has=function(t,e){return null!=t&&po(t,e,Sr)},Rn.hasIn=Va,Rn.head=Go,Rn.identity=iu,Rn.includes=function(t,e,n,r){t=Gs(t)?t:Ua(t),n=n&&!r?va(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Le(t,e,n)>-1},Rn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=mn(r+i,0)),Le(t,e,i)},Rn.inRange=function(t,e,n){return e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Rn.invoke=za,Rn.isArguments=Hs,Rn.isArray=Ys,Rn.isArrayBuffer=Zs,Rn.isArrayLike=Gs,Rn.isArrayLikeObject=qs,Rn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Ar(t)==m},Rn.isBuffer=$s,Rn.isDate=Xs,Rn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Rn.isEmpty=function(t){if(null==t)return!0;if(Gs(t)&&(Ys(t)||"string"==typeof t||"function"==typeof t.splice||$s(t)||la(t)||Hs(t)))return!t.length;var e=fo(t);if(e==x||e==M)return!t.size;if(xo(t))return!Pr(t).length;for(var n in t)if(Lt.call(t,n))return!1;return!0},Rn.isEqual=function(t,e){return zr(t,e)},Rn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?zr(t,e,i,n):!!r},Rn.isError=Ks,Rn.isFinite=function(t){return"number"==typeof t&&dn(t)},Rn.isFunction=Js,Rn.isInteger=Qs,Rn.isLength=ta,Rn.isMap=ra,Rn.isMatch=function(t,e){return t===e||Br(t,e,uo(e))},Rn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Br(t,e,uo(e),n)},Rn.isNaN=function(t){return ia(t)&&t!=+t},Rn.isNative=function(t){if(_o(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(t)},Rn.isNil=function(t){return null==t},Rn.isNull=function(t){return null===t},Rn.isNumber=ia,Rn.isObject=ea,Rn.isObjectLike=na,Rn.isPlainObject=oa,Rn.isRegExp=sa,Rn.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=h},Rn.isSet=aa,Rn.isString=ua,Rn.isSymbol=ca,Rn.isTypedArray=la,Rn.isUndefined=function(t){return t===i},Rn.isWeakMap=function(t){return na(t)&&fo(t)==j},Rn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Ar(t)},Rn.join=function(t,e){return null==t?"":vn.call(t,e)},Rn.kebabCase=Ya,Rn.last=Ko,Rn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=va(n))<0?mn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,Pe,o,!0)},Rn.lowerCase=Za,Rn.lowerFirst=Ga,Rn.lt=ha,Rn.lte=fa,Rn.max=function(t){return t&&t.length?dr(t,iu,Er):i},Rn.maxBy=function(t,e){return t&&t.length?dr(t,so(e,2),Er):i},Rn.mean=function(t){return Oe(t,iu)},Rn.meanBy=function(t,e){return Oe(t,so(e,2))},Rn.min=function(t){return t&&t.length?dr(t,iu,Or):i},Rn.minBy=function(t,e){return t&&t.length?dr(t,so(e,2),Or):i},Rn.stubArray=gu,Rn.stubFalse=mu,Rn.stubObject=function(){return{}},Rn.stubString=function(){return""},Rn.stubTrue=function(){return!0},Rn.multiply=Cu,Rn.nth=function(t,e){return t&&t.length?Ur(t,va(e)):i},Rn.noConflict=function(){return oe._===this&&(oe._=Ft),this},Rn.noop=cu,Rn.now=Ms,Rn.pad=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ni(hn(i),n)+t+Ni(ln(i),n)},Rn.padEnd=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;return e&&r<e?t+Ni(e-r,n):t},Rn.padStart=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;return e&&r<e?Ni(e-r,n)+t:t},Rn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(ba(t).replace(rt,""),e||0)},Rn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=da(t),e===i?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_n();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Zr(t,e)},Rn.reduce=function(t,e,n){var r=Ys(t)?Me:Re,i=arguments.length<3;return r(t,so(e,4),n,i,hr)},Rn.reduceRight=function(t,e,n){var r=Ys(t)?Ve:Re,i=arguments.length<3;return r(t,so(e,4),n,i,fr)},Rn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:va(e),Gr(ba(t),e)},Rn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Rn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Fo(e[r])];s===i&&(r=o,s=n),t=Js(s)?s.call(t):s}return t},Rn.round=Au,Rn.runInContext=t,Rn.sample=function(t){return(Ys(t)?Xn:$r)(t)},Rn.size=function(t){if(null==t)return 0;if(Gs(t))return ua(t)?on(t):t.length;var e=fo(t);return e==x||e==M?t.size:Pr(t).length},Rn.snakeCase=qa,Rn.some=function(t,e,n){var r=Ys(t)?ke:ni;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Rn.sortedIndex=function(t,e){return ri(t,e)},Rn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},Rn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Us(t[r],e))return r}return-1},Rn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Rn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},Rn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Us(t[n],e))return n}return-1},Rn.startCase=$a,Rn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:sr(va(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Rn.subtract=Eu,Rn.sum=function(t){return t&&t.length?De(t,iu):0},Rn.sumBy=function(t,e){return t&&t.length?De(t,so(e,2)):0},Rn.template=function(t,e,n){var r=Rn.templateSettings;n&&yo(t,e,n)&&(e=i),t=ba(t),e=xa({},e,r,Xi);var o,s,a=xa({},e.imports,r.imports,Xi),u=Ba(a),c=He(a,u),l=0,h=e.interpolate||bt,f="__p += '",p=Et((e.escape||bt).source+"|"+h.source+"|"+(h===K?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";t.replace(p,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(wt,Ke),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var v=Lt.call(e,"variable")&&e.variable;if(v){if(ct.test(v))throw new _t("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(N,""):f).replace(W,"$1").replace(H,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Qa((function(){return xt(u,d+"return "+f).apply(i,c)}));if(g.source=f,Ks(g))throw g;return g},Rn.times=function(t,e){if((t=va(t))<1||t>h)return[];var n=p,r=yn(t,p);e=so(e),t-=p;for(var i=Ue(r,e);++n<t;)e(n);return i},Rn.toFinite=da,Rn.toInteger=va,Rn.toLength=ga,Rn.toLower=function(t){return ba(t).toLowerCase()},Rn.toNumber=ma,Rn.toSafeInteger=function(t){return t?sr(va(t),-9007199254740991,h):0===t?t:0},Rn.toString=ba,Rn.toUpper=function(t){return ba(t).toUpperCase()},Rn.trim=function(t,e,n){if((t=ba(t))&&(n||e===i))return Ne(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return bi(r,Ze(r,o),Ge(r,o)+1).join("")},Rn.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,0,Ge(r,sn(e))+1).join("")},Rn.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,Ze(r,sn(e))).join("")},Rn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?va(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=ba(t)).length;if(Je(t)){var a=sn(t);s=a.length}if(n>=s)return t;var u=n-on(r);if(u<1)return r;var c=a?bi(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),sa(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=Et(o.source,ba(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Rn.unescape=function(t){return(t=ba(t))&&G.test(t)?t.replace(Y,un):t},Rn.uniqueId=function(t){var e=++It;return ba(t)+e},Rn.upperCase=Xa,Rn.upperFirst=Ka,Rn.each=bs,Rn.eachRight=ws,Rn.first=Go,uu(Rn,(yu={},br(Rn,(function(t,e){Lt.call(Rn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),Rn.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Rn[t].placeholder=Rn})),be(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===i?1:mn(va(n),0);var r=this.__filtered__&&!e?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(iu)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=qr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return kr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Os(so(t)))},Wn.prototype.slice=function(t,e){t=va(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=va(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},br(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Rn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Rn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Wn,c=a[0],l=u||Ys(e),h=function(t){var e=o.apply(Rn,Se([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,v=u&&!p;if(!s&&l){e=v?e:new Wn(this);var g=t.apply(e,a);return g.__actions__.push({func:ds,args:[h],thisArg:i}),new Nn(g,f)}return d&&v?t.apply(this,a):(g=this.thru(h),d?r?g.value()[0]:g.value():g)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Vt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Rn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ys(i)?i:[],t)}return this[n]((function(n){return e.apply(Ys(n)?n:[],t)}))}})),br(Wn.prototype,(function(t,e){var n=Rn[e];if(n){var r=n.name+"";Lt.call(jn,r)||(jn[r]=[]),jn[r].push({name:e,func:n})}})),jn[Fi(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mi(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ys(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=yn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,p=yn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return fi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var v=-1,g=t[c+=e];++v<h;){var m=l[v],y=m.iteratee,b=m.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue t;break t}}d[f++]=g}return d},Rn.prototype.at=vs,Rn.prototype.chain=function(){return ps(this)},Rn.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},Rn.prototype.next=function(){this.__values__===i&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Rn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Do(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Rn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ds,args:[es],thisArg:i}),new Nn(e,this.__chain__)}return this.thru(es)},Rn.prototype.toJSON=Rn.prototype.valueOf=Rn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Rn.prototype.first=Rn.prototype.head,se&&(Rn.prototype[se]=function(){return this}),Rn}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},154:t=>{"use strict";t.exports=function(t){for(var e=t.length,n=t[t.length-1],r=e,i=e-2;i>=0;--i){var o=n,s=t[i];(u=s-((n=o+s)-o))&&(t[--r]=n,n=u)}var a=0;for(i=r;i<e;++i){var u;(u=(s=n)-((n=(o=t[i])+s)-o))&&(t[a++]=u)}return t[a++]=n,t.length=a,t}},437:(t,e,n)=>{"use strict";var r=n(5),i=n(740),o=n(442),s=n(154);function a(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function u(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m[",n,"][",r,"]"].join("")}return e}function c(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",c(t.slice(0,e)),",",c(t.slice(e)),")"].join("")}function l(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],n=0;n<t.length;++n)e.push(["scale(",l(a(t,n)),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return c(e);var r}function h(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",l(u(t)),")};return robustDeterminant",t].join(""))(i,o,r,s)}var f=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;f.length<6;)f.push(h(f.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],r=0;r<6;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var i=Function.apply(void 0,e);for(t.exports=i.apply(void 0,f.concat([f,h])),r=0;r<f.length;++r)t.exports[r]=f[r]}()},489:(t,e,n)=>{"use strict";var r=n(437);function i(t){for(var e="robustLinearSolve"+t+"d",n=["function ",e,"(A,b){return ["],i=0;i<t;++i){n.push("det([");for(var o=0;o<t;++o){o>0&&n.push(","),n.push("[");for(var s=0;s<t;++s)s>0&&n.push(","),s===i?n.push("+b[",o,"]"):n.push("+A[",o,"][",s,"]");n.push("]")}n.push("]),")}return n.push("det(A)]}return ",e),new Function("det",n.join(""))(t<6?r[t]:r)}var o=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;o.length<6;)o.push(i(o.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],r=0;r<6;++r)e.push("s"+r),n.push("case ",r,":return s",r,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);for(t.exports=s.apply(void 0,o.concat([o,i])),r=0;r<6;++r)t.exports[r]=o[r]}()},146:(t,e,n)=>{"use strict";var r=n(5),i=n(740),o=n(442),s=n(972);function a(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",u(c(a(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function l(t){for(var e=[],n=[],l=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),h=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,c(a(l,f))):n.push.apply(n,c(a(l,f))),h.push("m"+f);var p=u(e),d=u(n),v="orientation"+t+"Exact",g=["function ",v,"(",h.join(),"){var p=",p,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",v].join("");return new Function("sum","prod","scale","sub",g)(i,r,o,s)}var h=l(3),f=l(4),p=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var a=33306690738754716e-32*r;return s>=a||s<=-a?s:h(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],h=e[2]-r[2],p=n[2]-r[2],d=o*c,v=s*u,g=s*a,m=i*c,y=i*u,b=o*a,w=l*(d-v)+h*(g-m)+p*(y-b),_=7771561172376103e-31*((Math.abs(d)+Math.abs(v))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(b))*Math.abs(p));return w>_||-w>_?w:f(t,e,n,r)}];function d(t){var e=p[t.length];return e||(e=p[t.length]=l(t.length)),e.apply(void 0,t)}!function(){for(;p.length<=5;)p.push(l(p.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[d].concat(p)),r=0;r<=5;++r)t.exports[r]=p[r]}()},442:(t,e,n)=>{"use strict";var r=n(5),i=n(359);t.exports=function(t,e){var n=t.length;if(1===n){var o=r(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*n),a=[.1,.1],u=[.1,.1],c=0;r(t[0],e,a),a[0]&&(s[c++]=a[0]);for(var l=1;l<n;++l){r(t[l],e,u);var h=a[1];i(h,u[0],a),a[0]&&(s[c++]=a[0]);var f=u[1],p=a[1],d=f+p,v=p-(d-f);a[1]=d,v&&(s[c++]=v)}return a[1]&&(s[c++]=a[1]),0===c&&(s[c++]=0),s.length=c,s}},972:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=-e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=-e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c])));for(var v,g,m=i+o,y=m-i,b=o-y,w=b,_=m;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c]))),(b=(o=w)-(y=(m=i+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(b=(o=w)-(y=(m=(i=h)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(o=w)-(y=(m=(i=p)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(c+=1)<r&&(p=-e[c]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},740:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c])));for(var v,g,m=i+o,y=m-i,b=o-y,w=b,_=m;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c]))),(b=(o=w)-(y=(m=i+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(b=(o=w)-(y=(m=(i=h)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(o=w)-(y=(m=(i=p)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(c+=1)<r&&(p=e[c]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},572:(t,e,n)=>{"use strict";n(746),n(102);function r(t,e){var n=t.length,r=t.length-e.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(a=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var a,u=i(t[0],t[1]),c=i(e[0],e[1]);return(a=i(u,t[2])-i(c,e[2]))||i(u+t[2],o)-i(c+e[2],s);default:var l=t.slice(0);l.sort();var h=e.slice(0);h.sort();for(var f=0;f<n;++f)if(r=l[f]-h[f])return r;return 0}}e.H=r},591:function(t,e,n){(function(){"use strict";var r=this.THREE||n(396);if(!r)throw new Error("MeshLine requires three.js");class i extends r.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new r.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(t){this.setGeometry(t,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(t){this.setPoints(t,this.widthCallback)}}})}}function o(t,e){var n=new r.Matrix4,i=new r.Ray,o=new r.Sphere,s=new r.Vector3,a=this.geometry;if(a.boundingSphere||a.computeBoundingSphere(),o.copy(a.boundingSphere),o.applyMatrix4(this.matrixWorld),!1!==t.ray.intersectSphere(o,s)){n.copy(this.matrixWorld).invert(),i.copy(t.ray).applyMatrix4(n);var u=new r.Vector3,c=new r.Vector3,l=new r.Vector3,h=this instanceof r.LineSegments?2:1,f=a.index,p=a.attributes;if(null!==f)for(var d=f.array,v=p.position.array,g=p.width.array,m=0,y=d.length-1;m<y;m+=h){var b=d[m],w=d[m+1];u.fromArray(v,3*b),c.fromArray(v,3*w);var _=void 0!==g[Math.floor(m/3)]?g[Math.floor(m/3)]:1,x=t.params.Line.threshold+this.material.lineWidth*_/2,C=x*x;if(!(i.distanceSqToSegment(u,c,s,l)>C)){s.applyMatrix4(this.matrixWorld);var A=t.ray.origin.distanceTo(s);A<t.near||A>t.far||(e.push({distance:A,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}),m=y)}}}}function s(t,e,n,r,i){var o;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,i&&e+i):t.slice(e,i&&e+i):t,n.set)n.set(t,r);else for(o=0;o<t.length;o++)n[o+r]=t[o];return n}i.prototype.setMatrixWorld=function(t){this.matrixWorld=t},i.prototype.setGeometry=function(t,e){this._geometry=t,this.setPoints(t.getAttribute("position").array,e)},i.prototype.setPoints=function(t,e){if(t instanceof Float32Array||t instanceof Array){if(this._points=t,this.widthCallback=e,this.positions=[],this.counters=[],t.length&&t[0]instanceof r.Vector3)for(var n=0;n<t.length;n++){var i=t[n],o=n/t.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(o),this.counters.push(o)}else for(n=0;n<t.length;n+=3)o=n/t.length,this.positions.push(t[n],t[n+1],t[n+2]),this.positions.push(t[n],t[n+1],t[n+2]),this.counters.push(o),this.counters.push(o);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")},i.prototype.raycast=o,i.prototype.compareV3=function(t,e){var n=6*t,r=6*e;return this.positions[n]===this.positions[r]&&this.positions[n+1]===this.positions[r+1]&&this.positions[n+2]===this.positions[r+2]},i.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},i.prototype.process=function(){var t,e,n=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],e=this.compareV3(0,n-1)?this.copyV3(n-2):this.copyV3(0),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(var i=0;i<n;i++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(i/(n-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(i/(n-1),0),this.uvs.push(i/(n-1),1),i<n-1){e=this.copyV3(i),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);var o=2*i;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}i>0&&(e=this.copyV3(i),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]))}e=this.compareV3(n-1,0)?this.copyV3(1):this.copyV3(n-1),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new r.BufferAttribute(new Float32Array(this.positions),3),previous:new r.BufferAttribute(new Float32Array(this.previous),3),next:new r.BufferAttribute(new Float32Array(this.next),3),side:new r.BufferAttribute(new Float32Array(this.side),1),width:new r.BufferAttribute(new Float32Array(this.width),1),uv:new r.BufferAttribute(new Float32Array(this.uvs),2),index:new r.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new r.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()},i.prototype.advance=function(t){var e=this._attributes.position.array,n=this._attributes.previous.array,r=this._attributes.next.array,i=e.length;s(e,0,n,0,i),s(e,6,e,0,i-6),e[i-6]=t.x,e[i-5]=t.y,e[i-4]=t.z,e[i-3]=t.x,e[i-2]=t.y,e[i-1]=t.z,s(e,6,r,0,i-6),r[i-6]=t.x,r[i-5]=t.y,r[i-4]=t.z,r[i-3]=t.x,r[i-2]=t.y,r[i-1]=t.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},r.ShaderChunk.meshline_vert=["",r.ShaderChunk.logdepthbuf_pars_vertex,r.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.fog_vertex,"}"].join("\n"),r.ShaderChunk.meshline_frag=["",r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",r.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",r.ShaderChunk.fog_fragment,"}"].join("\n");class a extends r.ShaderMaterial{constructor(t){super({uniforms:Object.assign({},r.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new r.Color(16777215)},opacity:{value:1},resolution:{value:new r.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new r.Vector2(1,1)}}),vertexShader:r.ShaderChunk.meshline_vert,fragmentShader:r.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}}a.prototype.copy=function(t){return r.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},t.exports&&(e=t.exports={MeshLine:i,MeshLineMaterial:a,MeshLineRaycast:o}),e.MeshLine=i,e.MeshLineMaterial=a,e.MeshLineRaycast=o}).call(this)},5:t=>{"use strict";t.exports=function(t,n,r){var i=t*n,o=e*t,s=o-(o-t),a=t-s,u=e*n,c=u-(u-n),l=n-c,h=a*l-(i-s*c-a*c-s*l);return r?(r[0]=h,r[1]=i,r):[h,i]};var e=+(Math.pow(2,27)+1)},359:t=>{"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]}},102:t=>{"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var r=n[e];n[e]=t,e=r}return t},n.link=function(t,e){var n=this.find(t),r=this.find(e);if(n!==r){var i=this.ranks,o=this.roots,s=i[n],a=i[r];s<a?o[n]=r:a<s?o[r]=n:(o[r]=n,++i[n])}}},706:t=>{"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],o=t[0],s=1;s<r;++s)if(o=i,e(i=t[s],o)){if(s===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],o=1;o<n;++o,i=r)if(i=r,(r=t[o])!==i){if(o===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},301:(t,e,n)=>{"use strict";var r=n(930),i=n(645),o=n(706);function s(t,e){return t-e}t.exports=function(t){var e=t.length;if(0===e)return{cells:[],positions:[]};var n=t[0].length;if(n<1)return{cells:[],positions:[]};if(1===n)return function(t){if(1===t.length)return{cells:[[-1]],positions:[]};var e=t.map((function(t,e){return[t[0],e]}));e.sort((function(t,e){return t-e}));for(var n=new Array(t.length),r=0;r<n.length;++r)n[r]=[-1,-1];for(var i=[],o=1;o<e.length;++o){var s=e[o-1],a=e[o],u=.5*(s[0]+a[0]),c=i.length;i.push([u]),n[s[1]][1]=c,n[a[1]][0]=c}return n[e[0][1]][1]=0,n[e[e.length-1][1]][0]=i.length-1,{cells:n,positions:i}}(t);for(var a=r(t,!0),u=new Array(e),c=0;c<e;++c)u[c]=[];var l,h=a.length,f=new Array(n+1),p=new Array(h),d=[];for(c=0;c<h;++c){for(var v=a[c],g=!1,m=0;m<=n;++m){var y=v[m];y<0?(p[c]=-1,g=!0):(u[y].push(c),f[m]=t[y])}g||(p[c]=d.length,d.push(i(f)))}if(2===n)for(l=new Array(e),c=0;c<e;++c){var b=u[c],w=[p[b[0]]],_=a[b[0]][(a[b[0]].indexOf(c)+1)%3];for(m=1;m<b.length;++m)for(var x=1;x<b.length;++x){var C=(a[b[x]].indexOf(c)+2)%3;if(a[b[x]][C]===_){w.push(p[b[x]]),_=a[b[x]][(C+2)%3];break}}l[c]=w}else{for(c=0;c<e;++c){for(_=u[c],m=0;m<_.length;++m)_[m]=p[_[m]];o(_,s)}l=u}return{cells:l,positions:d}}},990:t=>{t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}a=n[s]={exports:{}},e[s][0].call(a.exports,(function(t){return i(e[s][1][t]||t)}),a,a.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(r,i,o,s,a,u,c,l,h){"use strict";var f=t("crypto");function p(t,e){var n;return void 0===(n="passthrough"!==(e=g(t,e)).algorithm?f.createHash(e.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(e,n).dispatch(t),n.update||n.end(""),n.digest?n.digest("buffer"===e.encoding?void 0:e.encoding):(t=n.read(),"buffer"!==e.encoding?t.toString(e.encoding):t)}(n=e.exports=p).sha1=function(t){return p(t)},n.keys=function(t){return p(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return p(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return p(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var d=f.getHashes?f.getHashes().slice():["sha1","md5"],v=(d.push("passthrough"),["buffer","hex","binary","base64"]);function g(t,e){var n={};if(n.algorithm=(e=e||{}).algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<d.length;++r)d[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=d[r]);if(-1===d.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+d.join(", "));if(-1===v.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+v.join(", "));return n}function m(t){if("function"==typeof t)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function y(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){return this["_"+(null===(e=t.replacer?t.replacer(e):e)?"null":typeof e)](e)},_object:function(e){var i,s=Object.prototype.toString.call(e),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+s+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r("buffer:"),r(e);if("object"===a||"function"===a||"asyncfunction"===a)return s=Object.keys(e),t.unorderedObjects&&(s=s.sort()),!1===t.respectType||m(e)||s.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(s=s.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+s.length+":"),i=this,s.forEach((function(n){i.dispatch(n),r(":"),t.excludeValues||i.dispatch(e[n]),r(",")}));if(!this["_"+a]){if(t.ignoreUnknown)return r("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r("array:"+e.length+":"),!i||e.length<=1)return e.forEach((function(t){return o.dispatch(t)}));var s=[];return i=e.map((function(e){var r=new b,i=n.slice();return y(t,r,i).dispatch(e),s=s.concat(i.slice(n.length)),r.read().toString()})),n=n.concat(s),i.sort(),this._array(i,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),m(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("int8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("int16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("int32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){return r("map:"),e=Array.from(e),this._array(e,!1!==t.unorderedSets)},_set:function(e){return r("set:"),e=Array.from(e),this._array(e,!1!==t.unorderedSets)},_file:function(t){return r("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(t){return r("bigint:"+t.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function b(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),y(e=g(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,n){(function(t,e,r,i,o,s,a,u,c){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),u="_".charCodeAt(0);function c(t){return(t=t.charCodeAt(0))===n||t===a?62:t===r||t===u?63:t<i?-1:t<i+10?t-i+26+26:t<s+26?t-s:t<o+26?t-o+26:void 0}t.toByteArray=function(t){var n,r;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.length,o=(i="="===t.charAt(i-2)?2:"="===t.charAt(i-1)?1:0,new e(3*t.length/4-i)),s=0<i?t.length-4:t.length,a=0;function u(t){o[a++]=t}for(n=0;n<s;n+=4,0)u((16711680&(r=c(t.charAt(n))<<18|c(t.charAt(n+1))<<12|c(t.charAt(n+2))<<6|c(t.charAt(n+3))))>>16),u((65280&r)>>8),u(255&r);return 2==i?u(255&(r=c(t.charAt(n))<<2|c(t.charAt(n+1))>>4)):1==i&&(u((r=c(t.charAt(n))<<10|c(t.charAt(n+1))<<4|c(t.charAt(n+2))>>2)>>8&255),u(255&r)),o},t.fromByteArray=function(t){var e,n,r,i,o=t.length%3,s="";function a(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-o;e<r;e+=3)s+=a((i=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+a(i>>12&63)+a(i>>6&63)+a(63&i);switch(o){case 1:s=(s+=a((n=t[t.length-1])>>2))+a(n<<4&63)+"==";break;case 2:s=(s=(s+=a((n=(t[t.length-2]<<8)+t[t.length-1])>>10))+a(n>>4&63))+a(n<<2&63)+"="}return s}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,n){(function(e,r,i,o,s,a,u,c,l){var h=t("base64-js"),f=t("ieee754");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r,o,s,a,u=typeof t;if("base64"===e&&"string"==u)for(t=(a=t).trim?a.trim():a.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if("number"==u)r=M(t);else if("string"==u)r=i.byteLength(t,e);else{if("object"!=u)throw new Error("First argument needs to be a number, array or string.");r=M(t.length)}if(i._useTypedArrays?o=i._augment(new Uint8Array(r)):((o=this).length=r,o._isBuffer=!0),i._useTypedArrays&&"number"==typeof t.byteLength)o._set(t);else if(V(a=t)||i.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)for(s=0;s<r;s++)i.isBuffer(t)?o[s]=t.readUInt8(s):o[s]=t[s];else if("string"==u)o.write(t,0,e);else if("number"==u&&!i._useTypedArrays&&!n)for(s=0;s<r;s++)o[s]=0;return o}function p(t,e,n,r){var i;if(r||(T("boolean"==typeof n,"missing or invalid endian"),T(null!=e,"missing offset"),T(e+1<t.length,"Trying to read beyond buffer length")),!((r=t.length)<=e))return n?(i=t[e],e+1<r&&(i|=t[e+1]<<8)):(i=t[e]<<8,e+1<r&&(i|=t[e+1])),i}function d(t,e,n,r){var i;if(r||(T("boolean"==typeof n,"missing or invalid endian"),T(null!=e,"missing offset"),T(e+3<t.length,"Trying to read beyond buffer length")),!((r=t.length)<=e))return n?(e+2<r&&(i=t[e+2]<<16),e+1<r&&(i|=t[e+1]<<8),i|=t[e],e+3<r&&(i+=t[e+3]<<24>>>0)):(e+1<r&&(i=t[e+1]<<16),e+2<r&&(i|=t[e+2]<<8),e+3<r&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}function v(t,e,n,r){if(r||(T("boolean"==typeof n,"missing or invalid endian"),T(null!=e,"missing offset"),T(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e))return 32768&(r=p(t,e,n,!0))?-1*(65535-r+1):r}function g(t,e,n,r){if(r||(T("boolean"==typeof n,"missing or invalid endian"),T(null!=e,"missing offset"),T(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e))return 2147483648&(r=d(t,e,n,!0))?-1*(4294967295-r+1):r}function m(t,e,n,r){return r||(T("boolean"==typeof n,"missing or invalid endian"),T(e+3<t.length,"Trying to read beyond buffer length")),f.read(t,e,n,23,4)}function y(t,e,n,r){return r||(T("boolean"==typeof n,"missing or invalid endian"),T(e+7<t.length,"Trying to read beyond buffer length")),f.read(t,e,n,52,8)}function b(t,e,n,r,i){if(i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+1<t.length,"trying to write beyond buffer length"),I(e,65535)),!((i=t.length)<=n))for(var o=0,s=Math.min(i-n,2);o<s;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function w(t,e,n,r,i){if(i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+3<t.length,"trying to write beyond buffer length"),I(e,4294967295)),!((i=t.length)<=n))for(var o=0,s=Math.min(i-n,4);o<s;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function _(t,e,n,r,i){i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+1<t.length,"Trying to write beyond buffer length"),P(e,32767,-32768)),t.length<=n||b(t,0<=e?e:65535+e+1,n,r,i)}function x(t,e,n,r,i){i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+3<t.length,"Trying to write beyond buffer length"),P(e,2147483647,-2147483648)),t.length<=n||w(t,0<=e?e:4294967295+e+1,n,r,i)}function C(t,e,n,r,i){i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+3<t.length,"Trying to write beyond buffer length"),O(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||f.write(t,e,n,r,23,4)}function A(t,e,n,r,i){i||(T(null!=e,"missing value"),T("boolean"==typeof r,"missing or invalid endian"),T(null!=n,"missing offset"),T(n+7<t.length,"Trying to write beyond buffer length"),O(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||f.write(t,e,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=j(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=z(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if(T(V(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];if("number"!=typeof e)for(o=e=0;o<t.length;o++)e+=t[o].length;for(var n=new i(e),r=0,o=0;o<t.length;o++){var s=t[o];s.copy(n,r),r+=s.length}return n},i.prototype.write=function(t,e,n,r){isFinite(e)?isFinite(n)||(r=n,n=void 0):(c=r,r=e,e=n,n=c),e=Number(e)||0;var o,s,a,u,c=this.length-e;switch((!n||c<(n=Number(n)))&&(n=c),r=String(r||"utf8").toLowerCase()){case"hex":o=function(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o),T((o=e.length)%2==0,"Invalid hex string"),o/2<r&&(r=o/2);for(var s=0;s<r;s++){var a=parseInt(e.substr(2*s,2),16);T(!isNaN(a),"Invalid hex string"),t[n+s]=a}return i._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":s=this,a=e,u=n,o=i._charsWritten=B(j(t),s,a,u);break;case"ascii":case"binary":o=function(t,e,n,r){return i._charsWritten=B(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}(this,t,e,n);break;case"base64":s=this,a=e,u=n,o=i._charsWritten=B(z(t),s,a,u);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(t,e,n,r){return i._charsWritten=B(function(t){for(var e,n,r=[],i=0;i<t.length;i++)e=(n=t.charCodeAt(i))>>8,n%=256,r.push(n),r.push(e);return r}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return o},i.prototype.toString=function(t,e,n){var r,i,o,s,a=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):a.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;o++)i+=k(t[o]);return i}(a,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=L(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+L(i)}(a,e,n);break;case"ascii":case"binary":r=function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}(a,e,n);break;case"base64":i=a,s=n,r=0===(o=e)&&s===i.length?h.fromByteArray(i):h.fromByteArray(i.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(a,e,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){if(e=e||0,(r=r||0===r?r:this.length)!==(n=n||0)&&0!==t.length&&0!==this.length){T(n<=r,"sourceEnd < sourceStart"),T(0<=e&&e<t.length,"targetStart out of bounds"),T(0<=n&&n<this.length,"sourceStart out of bounds"),T(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length);var o=(r=t.length-e<r-n?t.length-e+n:r)-n;if(o<100||!i._useTypedArrays)for(var s=0;s<o;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+o),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=S(t,n,0),e=S(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),s=0;s<r;s++)o[s]=this[s+t];return o},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(T(null!=t,"missing offset"),T(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return p(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return p(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return d(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return d(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(T(null!=t,"missing offset"),T(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return v(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return v(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return g(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return g(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return m(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return m(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return y(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return y(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(T(null!=t,"missing value"),T(null!=e,"missing offset"),T(e<this.length,"trying to write beyond buffer length"),I(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){w(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){w(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(T(null!=t,"missing value"),T(null!=e,"missing offset"),T(e<this.length,"Trying to write beyond buffer length"),P(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){_(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){_(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){x(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){x(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){C(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){C(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){A(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){A(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(e=e||0,n=n||this.length,T("number"==typeof(t="string"==typeof(t=t||0)?t.charCodeAt(0):t)&&!isNaN(t),"value is not a number"),T(e<=n,"end < start"),n!==e&&0!==this.length){T(0<=e&&e<this.length,"start out of bounds"),T(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=k(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var E=i.prototype;function S(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t||0<=(t+=e)?t:0}function M(t){return(t=~~Math.ceil(+t))<0?0:t}function V(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else for(var i=n,o=(55296<=r&&r<=57343&&n++,encodeURIComponent(t.slice(i,n+1)).substr(1).split("%")),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}return e}function z(t){return h.toByteArray(t)}function B(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function L(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function I(t,e){T("number"==typeof t,"cannot write a non-number as a number"),T(0<=t,"specified a negative value for writing an unsigned value"),T(t<=e,"value is larger than maximum value for type"),T(Math.floor(t)===t,"value has a fractional component")}function P(t,e,n){T("number"==typeof t,"cannot write a non-number as a number"),T(t<=e,"value larger than maximum allowed value"),T(n<=t,"value smaller than minimum allowed value"),T(Math.floor(t)===t,"value has a fractional component")}function O(t,e,n){T("number"==typeof t,"cannot write a non-number as a number"),T(t<=e,"value larger than maximum allowed value"),T(n<=t,"value smaller than minimum allowed value")}function T(t,e){if(!t)throw new Error(e||"Failed assertion")}i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=E.get,t.set=E.set,t.write=E.write,t.toString=E.toString,t.toLocaleString=E.toString,t.toJSON=E.toJSON,t.copy=E.copy,t.slice=E.slice,t.readUInt8=E.readUInt8,t.readUInt16LE=E.readUInt16LE,t.readUInt16BE=E.readUInt16BE,t.readUInt32LE=E.readUInt32LE,t.readUInt32BE=E.readUInt32BE,t.readInt8=E.readInt8,t.readInt16LE=E.readInt16LE,t.readInt16BE=E.readInt16BE,t.readInt32LE=E.readInt32LE,t.readInt32BE=E.readInt32BE,t.readFloatLE=E.readFloatLE,t.readFloatBE=E.readFloatBE,t.readDoubleLE=E.readDoubleLE,t.readDoubleBE=E.readDoubleBE,t.writeUInt8=E.writeUInt8,t.writeUInt16LE=E.writeUInt16LE,t.writeUInt16BE=E.writeUInt16BE,t.writeUInt32LE=E.writeUInt32LE,t.writeUInt32BE=E.writeUInt32BE,t.writeInt8=E.writeInt8,t.writeInt16LE=E.writeInt16LE,t.writeInt16BE=E.writeInt16BE,t.writeInt32LE=E.writeInt32LE,t.writeInt32BE=E.writeInt32BE,t.writeFloatLE=E.writeFloatLE,t.writeFloatBE=E.writeFloatBE,t.writeDoubleLE=E.writeDoubleLE,t.writeDoubleBE=E.writeDoubleBE,t.fill=E.fill,t.inspect=E.inspect,t.toArrayBuffer=E.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){i=t("buffer").Buffer;var h=new i(4);h.fill(0),e.exports={hash:function(t,e,n,r){for(var o=e(function(t,e){t.length%4!=0&&(n=t.length+(4-t.length%4),t=i.concat([t,h],n));for(var n,r=[],o=e?t.readInt32BE:t.readInt32LE,s=0;s<t.length;s+=4)r.push(o.call(t,s));return r}(t=i.isBuffer(t)?t:new i(t),r),8*t.length),s=(e=r,new i(n)),a=e?s.writeInt32BE:s.writeInt32LE,u=0;u<o.length;u++)a.call(s,o[u],4*u,!0);return s}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,n){(function(e,r,i,o,s,a,u,c,l){i=t("buffer").Buffer;var h=t("./sha"),f=t("./sha256"),p=t("./rng"),d={sha1:h,sha256:f,md5:t("./md5")},v=64,g=new i(v);function m(t,e){var n=d[t=t||"sha1"],r=[];return n||y("algorithm:",t,"is not yet supported"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),t.length,this},digest:function(t){var o=i.concat(r);return o=e?function(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>v?e=t(e):e.length<v&&(e=i.concat([e,g],v));for(var r=new i(v),o=new i(v),s=0;s<v;s++)r[s]=54^e[s],o[s]=92^e[s];return n=t(i.concat([r,n])),t(i.concat([o,n]))}(n,e,o):n(o),r=null,t?o.toString(t):o}}}function y(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(t){return m(t)},n.createHmac=m,n.randomBytes=function(t,e){if(!e||!e.call)return new i(p(t));try{e.call(this,void 0,new i(p(t)))}catch(t){e(t)}};var b,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(t){n[t]=function(){y("sorry,",t,"is not implemented yet")}};for(b in w)_(w[b])}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){var h=t("./helpers");function f(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,u=r,c=i,l=o;n=d(n,r,i,o,t[s+0],7,-680876936),o=d(o,n,r,i,t[s+1],12,-389564586),i=d(i,o,n,r,t[s+2],17,606105819),r=d(r,i,o,n,t[s+3],22,-1044525330),n=d(n,r,i,o,t[s+4],7,-176418897),o=d(o,n,r,i,t[s+5],12,1200080426),i=d(i,o,n,r,t[s+6],17,-1473231341),r=d(r,i,o,n,t[s+7],22,-45705983),n=d(n,r,i,o,t[s+8],7,1770035416),o=d(o,n,r,i,t[s+9],12,-1958414417),i=d(i,o,n,r,t[s+10],17,-42063),r=d(r,i,o,n,t[s+11],22,-1990404162),n=d(n,r,i,o,t[s+12],7,1804603682),o=d(o,n,r,i,t[s+13],12,-40341101),i=d(i,o,n,r,t[s+14],17,-1502002290),n=v(n,r=d(r,i,o,n,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=v(o,n,r,i,t[s+6],9,-1069501632),i=v(i,o,n,r,t[s+11],14,643717713),r=v(r,i,o,n,t[s+0],20,-373897302),n=v(n,r,i,o,t[s+5],5,-701558691),o=v(o,n,r,i,t[s+10],9,38016083),i=v(i,o,n,r,t[s+15],14,-660478335),r=v(r,i,o,n,t[s+4],20,-405537848),n=v(n,r,i,o,t[s+9],5,568446438),o=v(o,n,r,i,t[s+14],9,-1019803690),i=v(i,o,n,r,t[s+3],14,-187363961),r=v(r,i,o,n,t[s+8],20,1163531501),n=v(n,r,i,o,t[s+13],5,-1444681467),o=v(o,n,r,i,t[s+2],9,-51403784),i=v(i,o,n,r,t[s+7],14,1735328473),n=g(n,r=v(r,i,o,n,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=g(o,n,r,i,t[s+8],11,-2022574463),i=g(i,o,n,r,t[s+11],16,1839030562),r=g(r,i,o,n,t[s+14],23,-35309556),n=g(n,r,i,o,t[s+1],4,-1530992060),o=g(o,n,r,i,t[s+4],11,1272893353),i=g(i,o,n,r,t[s+7],16,-155497632),r=g(r,i,o,n,t[s+10],23,-1094730640),n=g(n,r,i,o,t[s+13],4,681279174),o=g(o,n,r,i,t[s+0],11,-358537222),i=g(i,o,n,r,t[s+3],16,-722521979),r=g(r,i,o,n,t[s+6],23,76029189),n=g(n,r,i,o,t[s+9],4,-640364487),o=g(o,n,r,i,t[s+12],11,-421815835),i=g(i,o,n,r,t[s+15],16,530742520),n=m(n,r=g(r,i,o,n,t[s+2],23,-995338651),i,o,t[s+0],6,-198630844),o=m(o,n,r,i,t[s+7],10,1126891415),i=m(i,o,n,r,t[s+14],15,-1416354905),r=m(r,i,o,n,t[s+5],21,-57434055),n=m(n,r,i,o,t[s+12],6,1700485571),o=m(o,n,r,i,t[s+3],10,-1894986606),i=m(i,o,n,r,t[s+10],15,-1051523),r=m(r,i,o,n,t[s+1],21,-2054922799),n=m(n,r,i,o,t[s+8],6,1873313359),o=m(o,n,r,i,t[s+15],10,-30611744),i=m(i,o,n,r,t[s+6],15,-1560198380),r=m(r,i,o,n,t[s+13],21,1309151649),n=m(n,r,i,o,t[s+4],6,-145523070),o=m(o,n,r,i,t[s+11],10,-1120210379),i=m(i,o,n,r,t[s+2],15,718787259),r=m(r,i,o,n,t[s+9],21,-343485551),n=y(n,a),r=y(r,u),i=y(i,c),o=y(o,l)}return Array(n,r,i,o)}function p(t,e,n,r,i,o){return y((e=y(y(e,t),y(r,o)))<<i|e>>>32-i,n)}function d(t,e,n,r,i,o,s){return p(e&n|~e&r,t,e,i,o,s)}function v(t,e,n,r,i,o,s){return p(e&r|n&~r,t,e,i,o,s)}function g(t,e,n,r,i,o,s){return p(e^n^r,t,e,i,o,s)}function m(t,e,n,r,i,o,s){return p(n^(e|~r),t,e,i,o,s)}function y(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return h.hash(t,f,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,n){(function(t,n,r,i,o,s,a,u,c){e.exports=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){var h=t("./helpers");function f(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r,i,o=Array(80),s=1732584193,a=-271733879,u=-1732584194,c=271733878,l=-1009589776,h=0;h<t.length;h+=16){for(var f=s,v=a,g=u,m=c,y=l,b=0;b<80;b++){o[b]=b<16?t[h+b]:d(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);var w=p(p(d(s,5),(w=a,r=u,i=c,(n=b)<20?w&r|~w&i:!(n<40)&&n<60?w&r|w&i|r&i:w^r^i)),p(p(l,o[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));l=c,c=u,u=d(a,30),a=s,s=w}s=p(s,f),a=p(a,v),u=p(u,g),c=p(c,m),l=p(l,y)}return Array(s,a,u,c,l)}function p(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function d(t,e){return t<<e|t>>>32-e}e.exports=function(t){return h.hash(t,f,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function f(t,e){var n,r=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),o=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var s,a,u=0;u<t.length;u+=16){for(var c=i[0],l=i[1],f=i[2],p=i[3],g=i[4],m=i[5],y=i[6],b=i[7],w=0;w<64;w++)o[w]=w<16?t[w+u]:h(h(h((a=o[w-2],d(a,17)^d(a,19)^v(a,10)),o[w-7]),(a=o[w-15],d(a,7)^d(a,18)^v(a,3))),o[w-16]),n=h(h(h(h(b,d(a=g,6)^d(a,11)^d(a,25)),g&m^~g&y),r[w]),o[w]),s=h(d(s=c,2)^d(s,13)^d(s,22),c&l^c&f^l&f),b=y,y=m,m=g,g=h(p,n),p=f,f=l,l=c,c=h(n,s);i[0]=h(c,i[0]),i[1]=h(l,i[1]),i[2]=h(f,i[2]),i[3]=h(p,i[3]),i[4]=h(g,i[4]),i[5]=h(m,i[5]),i[6]=h(y,i[6]),i[7]=h(b,i[7])}return i}var p=t("./helpers"),d=function(t,e){return t>>>e|t<<32-e},v=function(t,e){return t>>>e};e.exports=function(t){return p.hash(t,f,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,n){(function(t,e,r,i,o,s,a,u,c){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1;for(i=t[e+h],h+=f,o=i&(1<<-l)-1,i>>=-l,l+=a;0<l;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=c}return(i?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1;for(o=e<0||0===e&&1/e<0?1:0,e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(e*r-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+f]=255&s,f+=p,s/=256,u-=8);t[n+f-p]|=128*o}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,n){(function(t,n,r,i,o,s,a,u,c){var l,h,f;function p(){}(t=e.exports={}).nextTick=(h="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener,h?function(t){return window.setImmediate(t)}:f?(l=[],window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<l.length&&l.shift()())}),!0),function(t){l.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},396:t=>{"use strict";t.exports=THREE}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";n.r(r),n.d(r,{BrillouinZoneViewer:()=>b,StructureViewer:()=>f});var t=n(396),e=new CustomEvent("change"),i=new CustomEvent("start"),o=new CustomEvent("end"),s=-1;class a{constructor(e,n){this._state=s,this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=.2,this.panSpeed=.3,this.enableRotate=!0,this.enableZoom=!0,this.enablePan=!0,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.rotationCenter=new t.Vector3,this.target=new t.Vector3,this._prevState=s,this._eye=new t.Vector3,this._movePrev=new t.Vector2,this._moveCurr=new t.Vector2,this._lastAxis=new t.Vector3,this._lastAngle=0,this._lastPosition=new t.Vector3,this._zoomStart=new t.Vector2,this._zoomEnd=new t.Vector2,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._panStart=new t.Vector2,this._panEnd=new t.Vector2,this._zoomed=!1,this.rotationCenter0=this.rotationCenter.clone(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.domElement.addEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.addEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.addEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.addEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.addEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.addEventListener("touchend",this.touchend.bind(this),!1),this.domElement.addEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.addEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.addEventListener("mouseup",this.mouseup.bind(this),!1),this.handleResize(),this.update()}handleResize(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}}handleEvent(t){"function"==typeof this[t.type]&&this[t.type](t)}getMouseOnScreen(e,n){var r=new t.Vector2;return r.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.width),r}getMouseOnCircle(e,n){var r=new t.Vector2;return r.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-n))/this.screen.width),r}rotateCamera(){var e,n=new t.Vector3,r=new t.Quaternion,i=new t.Vector3,o=new t.Vector3,s=new t.Vector3,a=new t.Vector3;if(a.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),e=a.length()){this._eye.copy(this.object.position).sub(this.rotationCenter),i.copy(this._eye).normalize(),o.copy(this.object.up).normalize(),s.crossVectors(o,i).normalize(),o.setLength(this._moveCurr.y-this._movePrev.y),s.setLength(this._moveCurr.x-this._movePrev.x),a.copy(o.add(s)),n.crossVectors(a,this._eye).normalize();var u=this.object.zoom;e*=this.rotateSpeed,e/=u,r.setFromAxisAngle(n,e),this._eye.applyQuaternion(r),this.object.up.applyQuaternion(r),this._lastAxis.copy(n),this._lastAngle=e}else!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.rotationCenter),r.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(r),this.object.up.applyQuaternion(r));this._movePrev.copy(this._moveCurr)}zoomCamera(){var t;4===this._state?(t=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0):1!=(t=this._zoomEnd.y-this._zoomStart.y+1)&&t>0&&(this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0,this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}panCamera(){var e=new t.Vector2,n=new t.Vector3,r=new t.Vector3;if(e.copy(this._panEnd).sub(this._panStart),e.lengthSq()){var i=this.object.zoom;e.multiplyScalar(this.panSpeed/i),r.copy(this._eye).cross(this.object.up).setLength(e.x),r.add(n.copy(this.object.up).setLength(e.y)),this.object.position.add(r),this.rotationCenter.add(r),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(e.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}checkDistances(){(this.enableZoom||this.enablePan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}update(){this._eye.subVectors(this.object.position,this.rotationCenter),this.enableRotate&&this.rotateCamera(),this.enableZoom&&this.zoomCamera(),this.enablePan&&this.panCamera(),this.object.position.addVectors(this.rotationCenter,this._eye),this.checkDistances(),this.object.lookAt(this.rotationCenter),(this._lastPosition.distanceToSquared(this.object.position)>1e-4||this._zoomed)&&(this.dispatchEvent(e),this._lastPosition.copy(this.object.position),this._zoomed=!1)}saveReset(){this.rotationCenter0.copy(this.rotationCenter),this.position0.copy(this.object.position),this.up0.copy(this.object.up),this.zoom0=this.object.zoom}reset(){this._state=s,this._prevState=s,this.rotationCenter.copy(this.rotationCenter0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this._eye.subVectors(this.object.position,this.rotationCenter),this.object.lookAt(this.rotationCenter),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(e),this._lastPosition.copy(this.object.position)}dispose(){this.domElement.removeEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.removeEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.removeEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.removeEventListener("touchend",this.touchend.bind(this),!1),this.domElement.removeEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.removeEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.removeEventListener("mouseup",this.mouseup.bind(this),!1)}mousedown(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state===s&&(this._state=t.button),0===this._state&&this.enableRotate?(this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr)):1===this._state&&this.enableZoom?(this._zoomStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._zoomEnd.copy(this._zoomStart)):2===this._state&&this.enablePan&&(this._panStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(i))}mousemove(t){!1!==this.enabled&&(this._state!==s&&(t.preventDefault(),t.stopPropagation()),0===this._state&&this.enableRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY))):1===this._state&&this.enableZoom?this._zoomEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)):2===this._state&&this.enablePan&&this._panEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this.update())}mouseup(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state=s,document.removeEventListener("mousemove",this.mousemove.bind(this)),document.removeEventListener("mouseup",this.mouseup.bind(this)),this.dispatchEvent(o))}mousewheel(t){if(!1===this.enabled)return;t.preventDefault(),t.stopPropagation();let e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e/=Math.abs(e),this._zoomStart.y+=e*this.zoomSpeed,this.dispatchEvent(i),this.dispatchEvent(o),this.update()}touchstart(t){if(!1!==this.enabled){if(1===t.touches.length)this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=4;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);var r=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(r,o)),this._panEnd.copy(this._panStart)}this.dispatchEvent(i)}}touchmove(t){if(!1!==this.enabled){if(t.preventDefault(),t.stopPropagation(),1===t.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY));else{var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(e*e+n*n);var r=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(r,i))}this.update()}}touchend(t){if(!1!==this.enabled){switch(t.touches.length){case 0:this._state=s;break;case 1:this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(o)}}contextmenu(t){t.preventDefault()}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}dispatchEvent(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e)for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}var u=n(486);class c{constructor(t,e={}){if(this.hostElement=t,this.scenes=[],this.cameraWidth=10,this.options={},!this.webglAvailable())throw Error("WebGL is not supported on this browser, cannot display viewer.");this.setOptions(e),this.setupRootElement(),this.setupRenderer(),this.setupScenes(),this.setupCamera(),this.setupControls(),this.changeHostElement(t,!1,!1),this.options.view.autoResize&&window.addEventListener("resize",this.onWindowResize.bind(this),!1)}setOptions(t){const e={controls:{enableZoom:!0,enableRotate:!0,enablePan:!0,panSpeed:10,zoomSpeed:.2,rotateSpeed:2.5,zoomLevel:1},view:{autoFit:!0,autoResize:!0,fitMargin:.5},renderer:{background:{color:"#ffffff",opacity:0},shadows:{enabled:!1}}};this.fillOptions(t,e),this.options=e}fillOptions(t,e){return(0,u.mergeWith)(e,t,((t,e,n,r,i,o)=>{if("atoms"===n&&(0,u.isArray)(e)){const n=[];for(const r of e)n.push((0,u.merge)((0,u.cloneDeep)(t),r));return n}}))}setup(){this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls()}setupScenes(){this.scenes=[],this.scene=new t.Scene,this.scenes.push(this.scene)}clear(){this.clearScenes(),this.scenes=null,this.controls=null,this.camera=null}clearScenes(){for(let t=0;t<this.scenes.length;++t){let e=this.scenes[t];for(e.traverse((function(t){let e=t.geometry,n=t.material,r=t.texture;e&&e.dispose(),n&&n.dispose(),r&&r.dispose()}));e.children.length;){let t=e.children[0];e.remove(t)}}}takeScreenShot(t){let e;try{let n="image/png",r="image/octet-stream";this.render(),e=this.renderer.domElement.toDataURL(n);let i=e.replace(n,r);t+=".png";let o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.download=t,o.href=i,o.click(),document.body.removeChild(o)}catch(t){return void console.log(t)}}webglAvailable(){let t=window;try{const e=document.createElement("canvas");return!(!t.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}setupRenderer(){this.renderer=new t.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=t.PCFSoftShadowMap,this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),this.renderer.setClearColor(this.options.renderer.background.color,this.options.renderer.background.opacity),this.rootElement.appendChild(this.renderer.domElement),this.renderer.autoClear=!1}setBackgroundColor(t,e){this.renderer.setClearColor(t,e)}setupCamera(){const e=this.rootElement.clientWidth/this.rootElement.clientHeight,n=this.cameraWidth,r=n/e;this.camera=new t.OrthographicCamera(n/-2,n/2,r/2,r/-2,-100,1e3),this.camera.name="camera",this.camera.position.z=20}setupRootElement(){this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="relative"}changeHostElement(t,e=!0,n=!0){if(void 0!==t){if(this.hostElement)for(;this.hostElement.firstChild;)this.hostElement.removeChild(this.hostElement.firstChild);t.appendChild(this.rootElement),this.resizeCanvasToHostElement(),e&&this.fitViewToContent(),n&&this.render()}}saveReset(){this.controls.saveReset()}reset(){this.controls.reset()}setupControls(){const e=new a(this.camera,this.rootElement);e.rotateSpeed=this.options.controls.rotateSpeed,e.rotationCenter=new t.Vector3,e.zoomSpeed=this.options.controls.zoomSpeed,e.panSpeed=this.options.controls.panSpeed,e.enableZoom=this.options.controls.enableZoom,e.enablePan=this.options.controls.enablePan,e.enableRotate=this.options.controls.enableRotate,e.staticMoving=!0,e.dynamicDampingFactor=.25,e.keys=[65,83,68],e.addEventListener("change",this.render.bind(this)),this.controls=e}createCornerPoints(e,n){const r=e.clone().add(n[0]).add(n[1]).add(n[2]),i=[e,r];for(let t=n.length,o=0;o<t;++o)i.push(e.clone().add(n[o].clone())),i.push(r.clone().sub(n[o].clone()));return(new t.BufferGeometry).setFromPoints(i)}fitViewToPoints(e,n,r=!0){this.scenes.forEach((t=>t.updateMatrixWorld()));const i=this.rootElement,o=i.clientWidth,s=i.clientHeight,a=[],u=e.length;this.camera.zoom=this.options.controls.zoomLevel,this.camera.updateProjectionMatrix();const c=new t.Vector3(0,0,0);c.project(this.camera),c.x=Math.round((c.x+1)*o/2),c.y=Math.round((1-c.y)*s/2),c.z=0;const l=new t.Vector3(n,n,0);l.project(this.camera),l.x=Math.round((l.x+1)*o/2),l.y=Math.round((1-l.y)*s/2),l.sub(c),l.x=Math.abs(l.x),l.y=Math.abs(l.y),l.z=0;for(let t=0;t<u;++t){const n=e[t].clone();n.project(this.camera),n.x=Math.round((n.x+1)*o/2),n.y=Math.round((1-n.y)*s/2),n.z=0,a.push(n)}let h=a[0].x,f=a[0].x,p=a[0].y,d=a[0].y;for(let t=a.length,e=0;e<t;++e){const t=a[e],n=t.x,r=t.y;n>f?f=n:n<h&&(h=n),r>d?d=r:r<p&&(p=r)}h-=l.x,f+=l.x,p-=l.y,d+=l.y;const v=o/2,g=s/2,m=v/Math.abs(f-v),y=v/Math.abs(h-v),b=g/Math.abs(p-g),w=g/Math.abs(d-g),_=Math.min(m,y,b,w);this.camera.zoom=_,this.camera.updateProjectionMatrix(),r&&this.render()}fitViewToContent(){const{points:t,margin:e}=this.getCornerPoints(),n=this.options.view.fitMargin+e;this.fitViewToPoints(t,n)}getZoom(){return this.camera.zoom}setZoom(t){this.camera.zoom=t,this.camera.updateProjectionMatrix()}resizeCanvasToHostElement(){const t=this.rootElement.clientWidth/this.rootElement.clientHeight,e=this.cameraWidth,n=e/t;this.camera.left=-e/2,this.camera.right=e/2,this.camera.top=n/2,this.camera.bottom=-n/2,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),this.controls.handleResize(),this.render()}onWindowResize(){this.resizeCanvasToHostElement(),this.options.view.autoFit&&this.fitViewToContent(),this.render()}render(){this.renderer.clear();for(let t=0;t<this.scenes.length;++t){const e=this.scenes[t];this.renderer.render(e,this.camera),t!==this.scenes.length-1&&this.renderer.clearDepth()}}createCylinder(e,n,r,i,o){const s=(new t.Vector3).subVectors(n,e),a=s.length(),u=s.clone().divideScalar(a),c=new t.ArrowHelper(u,e),l=new t.CylinderGeometry(r,r,a,i),h=new t.Mesh(l,o);return h.rotation.copy(c.rotation.clone()),h.position.copy((new t.Vector3).addVectors(e,s.multiplyScalar(.5))),h}createLabel(e,n,r,i,o,s,a=0,u="#000"){const c=document.createElement("canvas");c.width=256,c.height=256;const l=c.getContext("2d");l.fillStyle=r,l.font=`230.4px ${i}`,l.textAlign="center",l.textBaseline="middle",a>0&&(l.lineWidth=256*a,l.strokeStyle=u,l.strokeText(n,128,128)),l.fillText(n,128,128);const h=new t.Texture(c);h.needsUpdate=!0;const f=new t.SpriteMaterial({map:h}),p=new t.Sprite(f);p.scale.set(o,o,1),void 0===s&&(s=new t.Vector2(0,0));const d=new t.Vector2;d.addVectors(s,new t.Vector2(.5,.5)),p.center.copy(d);const v=new t.Object3D;return v.position.copy(e),v.add(p),v}rotateAroundWorldAxis(e,n,r){const i=new t.Matrix4;i.makeRotationAxis(n.normalize(),r),i.multiply(e.matrix),e.matrix=i,e.rotation.setFromRotationMatrix(e.matrix)}coordinateTransform(t,e,n,r=!0){return(r?n.clone():n).applyMatrix3(t).applyMatrix3(e)}alignView(e,n,r,i=!0){if(void 0===e)return;if(e.length>2)throw"At most two alignments can be performed.";const o=[],s=e=>{const i=e[0],s=e[1];let a;switch(i){case"up":a=new t.Vector3(0,1,0);break;case"down":a=new t.Vector3(0,-1,0);break;case"right":a=new t.Vector3(1,0,0);break;case"left":a=new t.Vector3(-1,0,0);break;case"front":a=new t.Vector3(0,0,1);break;case"back":a=new t.Vector3(0,0,-1)}const u=n[s];for(const t of o)u[t]=0;if(u.length()>1e-8){const e=(new t.Quaternion).setFromUnitVectors(u.clone().normalize(),a);for(const t in n)n[t].applyQuaternion(e);for(const t of r)t.applyQuaternion(e),t.updateMatrixWorld();"right"==i||"left"==i?o.push("x"):"up"==i||"down"==i?o.push("y"):"front"!=i&&"back"!=i||o.push("z")}};for(const t of e)s(t);i&&this.render()}}var l=n(990),h=n.n(l);class f extends c{constructor(){super(...arguments),this.updateBonds=!1,this.atomicRadii=[],this.elementColors=[],this.lights=[],this.bondFills=[],this.atomFills=[],this.atomOutlines=[],this.axisLabels=[],this.label_missing="X",this.elementNames=[this.label_missing,"H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"],this.elementNumbers={[this.label_missing]:0,H:1,He:2,Li:3,Be:4,B:5,C:6,N:7,O:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,S:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Nh:113,Fl:114,Mc:115,Lv:116,Ts:117,Og:118},this.radii_unknown=.3,this.covalentRadii=[this.radii_unknown,.31,.28,1.28,.96,.84,.76,.71,.66,.57,.58,1.66,1.41,1.21,1.11,1.07,1.05,1.02,1.06,2.03,1.76,1.7,1.6,1.53,1.39,1.39,1.32,1.26,1.24,1.32,1.22,1.22,1.2,1.19,1.2,1.2,1.16,2.2,1.95,1.9,1.75,1.64,1.54,1.47,1.46,1.42,1.39,1.45,1.44,1.42,1.39,1.39,1.38,1.39,1.4,2.44,2.15,2.07,2.04,2.03,2.01,1.99,1.98,1.98,1.96,1.94,1.92,1.92,1.89,1.9,1.87,1.87,1.75,1.7,1.62,1.51,1.44,1.41,1.36,1.36,1.32,1.45,1.46,1.48,1.4,1.5,1.5,2.6,2.21,2.15,2.06,2,1.96,1.9,1.87,1.8,1.69,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown],this.color_unknown="#ff1493",this.jmolColors=[this.color_unknown,"#ffffff","#d9ffff","#cc80ff","#c2ff00","#ffb5b5","#909090","#3050f8","#ff0d0d","#90e050","#b3e3f5","#ab5cf2","#8aff00","#bfa6a6","#f0c8a0","#ff8000","#ffff30","#1ff01f","#80d1e3","#8f40d4","#3dff00","#e6e6e6","#bfc2c7","#a6a6ab","#8a99c7","#9c7ac7","#e06633","#f090a0","#50d050","#c88033","#7d80b0","#c28f8f","#668f8f","#bd80e3","#ffa100","#a62929","#5cb8d1","#702eb0","#00ff00","#94ffff","#94e0e0","#73c2c9","#54b5b5","#3b9e9e","#248f8f","#0a7d8c","#006985","#c0c0c0","#ffd98f","#a67573","#668080","#9e63b5","#d47a00","#940094","#429eb0","#57178f","#00c900","#70d4ff","#ffffc7","#d9ffc7","#c7ffc7","#a3ffc7","#8fffc7","#61ffc7","#45ffc7","#30ffc7","#1fffc7","#00ff9c","#00e675","#00d452","#00bf38","#00ab24","#4dc2ff","#4da6ff","#2194d6","#267dab","#266696","#175487","#d0d0e0","#ffd123","#b8b8d0","#a6544d","#575961","#9e4fb5","#ab5c00","#754f45","#428296","#420066","#007d00","#70abfa","#00baff","#00a1ff","#008fff","#0080ff","#006bff","#545cf2","#785ce3","#8a4fe3","#a136d4","#b31fd4","#b31fba","#b30da6","#bd0d87","#c70066","#cc0059","#d1004f","#d90045","#e00038","#e6002e","#eb0026"]}setupScenes(){this.scenes=[],this.sceneStructure=new t.Scene,this.scenes.push(this.sceneStructure),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo)}setOptions(t,e=!0){var n,r,i,o,s,a,c,l;const h={view:{fitMargin:.5},layout:{periodicity:"none",translation:[0,0,0],viewCenter:"COP",wrapTolerance:.05},cell:{enabled:!0,color:"#000000",linewidth:1.5,dashSize:0,gapSize:0},latticeConstants:{enabled:!0,font:"Arial",size:.7,stroke:{width:.06,color:"#000"},a:{enabled:!0,color:"#C52929",label:"a"},b:{enabled:!0,color:"#47A823",label:"b"},c:{enabled:!0,color:"#3B5796",label:"c"},alpha:{enabled:!0,color:"#ffffff",label:"α"},beta:{enabled:!0,color:"#ffffff",label:"β"},gamma:{enabled:!0,color:"#ffffff",label:"γ"}},bonds:{enabled:!0,material:{phong:{shininess:30}},outline:{enabled:!0,color:"#000000",size:.025},color:"#ffffff",radius:.08,threshold:1,smoothness:145},atoms:{material:{phong:{shininess:30}},outline:{enabled:!0,color:"#000000",size:.025},opacity:1,color:"Jmol",radius:"covalent",scale:1,smoothness:165}};if(0===Object.keys(this.options).length)this.fillOptions(t,h),super.setOptions(h);else{if((0,u.isNil)(t.atoms))this.fillOptions(t,this.options),super.setOptions(this.options),this.needFullReload(t)&&void 0!==this.structure?this.load(this.structure):(void 0!==(null===(n=null==t?void 0:t.latticeConstants)||void 0===n?void 0:n.enabled)&&this.toggleLatticeConstants(t.latticeConstants.enabled),void 0!==(null===(r=null==t?void 0:t.cell)||void 0===r?void 0:r.enabled)&&this.toggleCell(t.cell.enabled),void 0!==(null===(i=null==t?void 0:t.bonds)||void 0===i?void 0:i.enabled)&&this.toggleBonds(t.bonds.enabled),void 0!==(null===(s=null===(o=null==t?void 0:t.renderer)||void 0===o?void 0:o.shadows)||void 0===s?void 0:s.enabled)&&this.toggleShadows(t.renderer.shadows.enabled)),void 0!==(null===(a=null==t?void 0:t.renderer)||void 0===a?void 0:a.background)&&this.setBackgroundColor(null===(c=null==t?void 0:t.renderer)||void 0===c?void 0:c.background.color,null===(l=null==t?void 0:t.renderer)||void 0===l?void 0:l.background.opacity);else{if(1!==(0,u.size)(t))throw Error("When changing style options for atoms, please do not update other properties simultaneously.");this.setAtoms(t.atoms)}e&&this.render()}}needFullReload(t){return function t(e,n){for(const r in e)if(null!==e[r]&&"[object Object]"===Object.prototype.toString.call(e[r])){if(void 0===n[r])return!0;if(t(e[r],n[r]))return!0}else if(void 0===n[r])return!0;return!1}(t,{cell:{enabled:!0},latticeConstants:{enabled:!0},bonds:{enabled:!0},shadows:{enabled:!0}})}getOptions(){return this.options}getElementInfo(){return this.elements}toggleLatticeConstants(t){void 0!==this.latticeConstants&&(this.latticeConstants.visible=t,this.angleArcs.visible=t)}toggleCell(t){void 0!==this.convCell&&(this.convCell.visible=t),void 0!==this.primCell&&(this.primCell.visible=t)}toggleBonds(t){t&&this.createBonds(),void 0!==this.bonds&&(this.bonds.visible=t)}toggleShadows(t){var e,n,r;this.renderer.shadowMap.enabled=t;for(let e=0;e<this.lights.length;++e)this.lights[e].castShadow=t;for(let e=0;e<this.atomFills.length;++e){const n=this.atomFills[e];n.receiveShadow=t,n.castShadow=t,n.material.needsUpdate=!0}for(let i=0;i<this.bondFills.length;++i){const o=this.bondFills[i];o.receiveShadow=t,void 0!==(null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.atoms)||void 0===n?void 0:n.material)||void 0===r?void 0:r.toon)?o.castShadow=!1:o.castShadow=t,o.material.needsUpdate=!0}this.render(),this.render()}clear(){super.clear(),this.structure=void 0,this.atoms=void 0,this.convCell=void 0,this.primCell=void 0,this.bonds=void 0,this.atomPos=void 0,this.positions=void 0,this.atomNumbers=void 0,this.atomicNumbers=void 0,this.latticeConstants=void 0,this.B=void 0,this.Bi=void 0,this.basisVectors=void 0,this.elements=void 0,this.maxRadii=void 0,this.atomicRadii=void 0,this.elementColors=void 0}load(e){var n,r,i,o,s,a;this.clear(),this.setup(),this.structure=e,this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls(),this.atomicRadii=this.covalentRadii,this.elementColors=this.jmolColors;const u=void 0!==e.fractional&&e.fractional,c=e.positions,l=e.species,h=e.cell;let f=e.pbc,p=e.bonds;if(!c)return console.log("No atom positions given to the structure viewer"),!1;if(!l)return console.log("No species  given to the structure viewer."),!1;const d="number"==typeof l[0]?l.map((t=>t<0||t>=this.elementNames.length?0:t)):l.map((t=>this.elementNumbers[t]||0));if(this.maxRadii=Math.max(...d.map((t=>this.getRadii(t)))),p){if(!Array.isArray(p))return console.log("Invalid value for 'bonds'. Provide a list of index pairs."),!1}else p="auto";if(c.length!=d.length)return console.log("The number of positions does not match the number of labels."),!1;null!=f&&null!=f||(f=[!1,!1,!1]),this.root=new t.Object3D,this.container=new t.Object3D,this.infoContainer=new t.Object3D,this.atoms=new t.Object3D,this.bonds=new t.Object3D,this.container.add(this.atoms),this.container.add(this.bonds),this.angleArcs=new t.Object3D,this.root.add(this.container),this.sceneStructure.add(this.root),this.sceneInfo.add(this.infoContainer),this.latticeConstants=new t.Object3D,this.container.add(this.latticeConstants),this.createBasisVectors(h);let v=[],g=[];!0===u?(v=this.toVectors(c),g=this.toCartesian(v,!0)):!1===u&&(g=this.toVectors(c),void 0!==this.B&&(v=this.toScaled(g,!0)));let m=0;const y=[],b=f[0],w=f[1],_=f[2];if(b&&w&&_)m=3;else if(b||w||_)for(let t=0;t<3;++t){const e=f[t],n=f[(t+1)%3],r=f[(t+2)%3];if(e&&!n&&!r){m=1,y.push(t);break}if(e&&n&&!r){m=2,y.push(t),y.push((t+1)%3);break}}else m=0;void 0!==this.B?(this.createConventionalCell(f,this.options.cell.enabled),this.createLatticeConstants(this.basisVectors,f,y),this.createAtoms(v,d,f,!0)):void 0!==this.basisVectors?(this.createConventionalCell(f,this.options.cell.enabled),this.createLatticeConstants(this.basisVectors,f,y),this.createAtoms(g,d,f,!1)):this.createAtoms(g,d,f,!1),this.setAtoms(this.options.atoms);const x=this.getPositions();this.createBonds(p);const C=this.options.layout.viewCenter;let A;return"COP"===C?A=this.calculateCOP(x):"COC"===C?A=(new t.Vector3).add(this.basisVectors[0]).add(this.basisVectors[1]).add(this.basisVectors[2]).multiplyScalar(.5):Array.isArray(C)&&(A=(new t.Vector3).fromArray(C)),this.centerView(A),this.translate(this.options.layout.translation),this.setZoom(this.options.controls.zoomLevel),void 0!==this.basisVectors&&this.alignView(null===(i=null===(r=null===(n=this.options)||void 0===n?void 0:n.layout)||void 0===r?void 0:r.viewRotation)||void 0===i?void 0:i.alignments),this.rotateView(null===(a=null===(s=null===(o=this.options)||void 0===o?void 0:o.layout)||void 0===s?void 0:s.viewRotation)||void 0===a?void 0:a.rotations),this.options.view.autoFit&&this.fitViewToContent(),this.toggleShadows(this.options.renderer.shadows.enabled),this.render(),!0}calculateCOP(e){const n=e.length,r=new t.Vector3;for(let t=0;t<n;++t){const n=e[t];r.add(n)}return r.divideScalar(n),r}centerView(t,e=!0){this.translation=t;const n=t.multiplyScalar(-1);this.container.position.copy(n),this.infoContainer.position.copy(n),e&&this.render()}centerViewToAtoms(t,e=!0){const n=t.map((t=>this.positions[t])),r=this.calculateCOP(n);this.centerView(r,!1),e&&this.render()}zoomToAtoms(t,e=0,n=!0){const r=t.map((t=>this.positions[t])),i=this.calculateCOP(r),o=Math.max(...t.map((t=>this.getRadii(this.atomicNumbers[t]))));this.centerView(i,!1);const s=r.map((t=>t.clone().add(this.translation)));this.fitViewToPoints(s,o+e,!1),n&&this.render()}translate(e,n=!0){const r=(new t.Vector3).fromArray(e);this.atoms.position.add(r),this.bonds.position.add(r),n&&this.render()}setPositions(t,e=!1,n=!0){if("none"!==this.options.layout.periodicity&&"wrap"!==this.options.layout.periodicity)throw"Setting new positions is not allowed when options.layout.periodicity != 'none'/'wrap'.";const r=this.toVectors(t);"wrap"===this.options.layout.periodicity&&this.wrap(r,e),e&&this.toCartesian(r,!1);for(let t=0,e=r.length;t<e;++t){const e=r[t];this.getAtom(t).position.copy(e)}this.updateBonds=!0,this.createBonds(),n&&this.render()}getPositions(t=!1){let e=[];const n=this.atoms.children,r=n.length;if(t){const t=[];for(let e=0;e<r;++e){const r=n[e].position.clone();t.push(r)}e=this.toScaled(t)}else for(let t=0;t<r;++t){const r=n[t].position.clone();e.push(r)}return e}toVectors(e,n=!0){const r=[];for(let n=0,i=e.length;n<i;++n)r.push((new t.Vector3).fromArray(e[n]));if(n)return r;e=r}toCartesian(t,e=!0){if(e){const e=[];for(let n=0,r=t.length;n<r;++n)e.push(t[n].clone().applyMatrix3(this.B));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.B)}toScaled(t,e=!0){if(e){const e=[];for(let n=0,r=t.length;n<r;++n)e.push(t[n].clone().applyMatrix3(this.Bi));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.Bi)}getAtom(t){return this.atoms.getObjectByName(`atom${t}`)}setZoom(t){this.camera.zoom=t,this.render()}setupLights(){var e,n,r,i,o,s;this.lights=[];const a=2048,u=-.001,c=new t.DirectionalLight(16777215,.45);c.shadow.mapSize.width=a,c.shadow.mapSize.height=a,c.shadow.bias=u,c.shadow.camera.left=-50,c.shadow.camera.right=50,c.shadow.camera.top=50,c.shadow.camera.bottom=-50,c.position.set(0,0,20),this.sceneStructure.add(c),this.lights.push(c);const l=new t.DirectionalLight(16777215,.3);l.shadow.mapSize.width=a,l.shadow.mapSize.height=a,l.shadow.bias=u,l.position.set(-20,0,-20),void 0===(null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.atoms)||void 0===n?void 0:n.material)||void 0===r?void 0:r.toon)&&(this.sceneStructure.add(l),this.lights.push(l));const h=new t.DirectionalLight(16777215,.25);h.shadow.mapSize.width=a,h.shadow.mapSize.height=a,h.shadow.bias=u,h.position.set(20,0,-20),void 0===(null===(s=null===(o=null===(i=this.options)||void 0===i?void 0:i.atoms)||void 0===o?void 0:o.material)||void 0===s?void 0:s.toon)&&(this.sceneStructure.add(h),this.lights.push(h));const f=new t.AmbientLight(4210752,1.7);this.sceneStructure.add(f)}createLatticeConstants(e,n,r){var i,o,s,a,u,c,l,h,f,p,d,v,g,m,y,b,w,_,x,C,A,E,S,M;if(!this.options.latticeConstants.enabled)return;this.axisLabels=[],this.infoContainer.add(this.latticeConstants),this.infoContainer.add(this.angleArcs),new t.LineBasicMaterial({color:"#000000",linewidth:1.5});let V=-1;const k=[];k.push(this.options.latticeConstants.a.color),k.push(this.options.latticeConstants.b.color),k.push(this.options.latticeConstants.c.color);const j=[];j.push(this.options.latticeConstants.alpha.color),j.push(this.options.latticeConstants.beta.color),j.push(this.options.latticeConstants.gamma.color);const z=[];z.push(void 0===(null===(o=null===(i=this.options.latticeConstants.alpha)||void 0===i?void 0:i.stroke)||void 0===o?void 0:o.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.alpha.stroke.color),z.push(void 0===(null===(a=null===(s=this.options.latticeConstants.beta)||void 0===s?void 0:s.stroke)||void 0===a?void 0:a.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.beta.stroke.color),z.push(void 0===(null===(c=null===(u=this.options.latticeConstants.gamma)||void 0===u?void 0:u.stroke)||void 0===c?void 0:c.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.gamma.stroke.color);const B=[];B.push(void 0===(null===(h=null===(l=this.options.latticeConstants.alpha)||void 0===l?void 0:l.stroke)||void 0===h?void 0:h.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.alpha.stroke.width),B.push(void 0===(null===(p=null===(f=this.options.latticeConstants.beta)||void 0===f?void 0:f.stroke)||void 0===p?void 0:p.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.beta.stroke.width),B.push(void 0===(null===(v=null===(d=this.options.latticeConstants.gamma)||void 0===d?void 0:d.stroke)||void 0===v?void 0:v.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.gamma.stroke.width);const L=[this.options.latticeConstants.gamma.label,this.options.latticeConstants.alpha.label,this.options.latticeConstants.beta.label],I=[this.options.latticeConstants.a.label,this.options.latticeConstants.b.label,this.options.latticeConstants.c.label],P=[this.options.latticeConstants.gamma.enabled,this.options.latticeConstants.alpha.enabled,this.options.latticeConstants.beta.enabled],O=[this.options.latticeConstants.a.enabled,this.options.latticeConstants.b.enabled,this.options.latticeConstants.c.enabled],T=[];T.push(void 0===this.options.latticeConstants.a.font?this.options.latticeConstants.font:this.options.latticeConstants.a.font),T.push(void 0===this.options.latticeConstants.b.font?this.options.latticeConstants.font:this.options.latticeConstants.b.font),T.push(void 0===this.options.latticeConstants.c.font?this.options.latticeConstants.font:this.options.latticeConstants.c.font);const F=[];F.push(void 0===this.options.latticeConstants.a.size?this.options.latticeConstants.size:this.options.latticeConstants.a.size),F.push(void 0===this.options.latticeConstants.b.size?this.options.latticeConstants.size:this.options.latticeConstants.b.size),F.push(void 0===this.options.latticeConstants.c.size?this.options.latticeConstants.size:this.options.latticeConstants.c.size);const R=[];R.push(void 0===(null===(m=null===(g=this.options.latticeConstants.a)||void 0===g?void 0:g.stroke)||void 0===m?void 0:m.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.a.stroke.color),R.push(void 0===(null===(b=null===(y=this.options.latticeConstants.b)||void 0===y?void 0:y.stroke)||void 0===b?void 0:b.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.b.stroke.color),R.push(void 0===(null===(_=null===(w=this.options.latticeConstants.c)||void 0===w?void 0:w.stroke)||void 0===_?void 0:_.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.c.stroke.color);const D=[];D.push(void 0===(null===(C=null===(x=this.options.latticeConstants.a)||void 0===x?void 0:x.stroke)||void 0===C?void 0:C.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.a.stroke.width),D.push(void 0===(null===(E=null===(A=this.options.latticeConstants.b)||void 0===A?void 0:A.stroke)||void 0===E?void 0:E.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.b.stroke.width),D.push(void 0===(null===(M=null===(S=this.options.latticeConstants.c)||void 0===S?void 0:S.stroke)||void 0===M?void 0:M.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.c.stroke.width);const U=[];U.push(void 0===this.options.latticeConstants.alpha.font?this.options.latticeConstants.font:this.options.latticeConstants.alpha.font),U.push(void 0===this.options.latticeConstants.beta.font?this.options.latticeConstants.font:this.options.latticeConstants.beta.font),U.push(void 0===this.options.latticeConstants.gamma.font?this.options.latticeConstants.font:this.options.latticeConstants.gamma.font);const N=[];N.push(void 0===this.options.latticeConstants.alpha.size?this.options.latticeConstants.size:this.options.latticeConstants.alpha.size),N.push(void 0===this.options.latticeConstants.beta.size?this.options.latticeConstants.size:this.options.latticeConstants.beta.size),N.push(void 0===this.options.latticeConstants.gamma.size?this.options.latticeConstants.size:this.options.latticeConstants.gamma.size);for(let n=0;n<3;++n){V+=1;const r=I[V],i=k[V],o=T[V],s=F[V],a=N[V],u=D[V],c=R[V],l=U[V],h=j[V],f=L[V],p=z[V],d=B[V],v=O[V],g=P[V],m=this.basisVectorCollapsed[n],y=this.basisVectorCollapsed[(n+1)%3],b=this.basisVectorCollapsed[(n+2)%3],w=e[n],_=e[(n+1)%3].clone(),x=e[(n+2)%3].clone();if(v&&!m){const e=new t.Vector3(0,0,0),a=w.clone(),l=a.clone().multiplyScalar(.5);let h,f;if(y&&b)f=new t.Vector3(0,0,1),h=(new t.Vector3).crossVectors(w,f);else if(y)f=(new t.Vector3).crossVectors(w,x),h=(new t.Vector3).crossVectors(w,f);else if(b)f=(new t.Vector3).crossVectors(w,_),h=(new t.Vector3).crossVectors(w,f);else{const e=(new t.Vector3).crossVectors(w,_),n=(new t.Vector3).crossVectors(w,x);h=(new t.Vector3).sub(e).add(n)}h.normalize(),h.multiplyScalar(.8),l.add(h);const p=this.createLabel(l,r,i,o,s,new t.Vector2(0,0),u,c);this.latticeConstants.add(p),this.axisLabels.push(p);const d=new t.MeshBasicMaterial({color:i,transparent:!0,opacity:.75}),v=w.clone(),g=this.createCylinder(e.clone(),v.clone().add(e),.09,10,d);this.latticeConstants.add(g);const m=new t.MeshBasicMaterial({color:"#000000"}),C=this.basisVectors[n].clone(),A=C.clone().multiplyScalar(1+1.3/C.length()),E=this.createCylinder(e.clone(),A,.02,10,m);this.latticeConstants.add(E);const S=new t.CylinderGeometry(0,.1,.5,12),M=new t.MeshBasicMaterial({color:0}),V=new t.Mesh(S,M);V.position.copy(a).multiplyScalar(1+1.3/a.length()),V.lookAt(new t.Vector3),V.rotateX(-Math.PI/2),this.latticeConstants.add(V)}if(g&&!m&&!y){const e=new t.LineDashedMaterial({color:0,linewidth:2,dashSize:.2,gapSize:.1}),n=(new t.Vector3).crossVectors(w,_),r=w.angleTo(_),i=Math.max(Math.min(1/4*w.length(),1/4*_.length()),1),o=20,s=new t.EllipseCurve(0,0,i,i,0,r,!1,0).getSpacedPoints(o),u=(new t.BufferGeometry).setFromPoints(s),c=new t.Line(u,e);c.computeLineDistances();const v=new t.Vector3(1,0,0),g=(new t.Quaternion).setFromUnitVectors(v,w.clone().normalize());c.quaternion.copy(g);const m=u.attributes.position.array,y=m.length/3,b=(new t.Vector3).fromArray(m,3*(y-1));c.updateMatrixWorld();const x=c.localToWorld(b.clone()),C=w,A=(new t.Vector3).crossVectors(C,x);let E=n.angleTo(A);(new t.Vector3).crossVectors(_,x).dot(C)>0&&(E=-E),c.rotateX(E),c.updateMatrixWorld(),c.updateMatrix();const S=c.localToWorld((new t.Vector3).fromArray(m,3*(o/2-1))),M=S.length();S.multiplyScalar(1+.3/M);const V=this.createLabel(S,f.toString(),h,l,a,new t.Vector2(0,0),d,p);this.latticeConstants.add(V),this.axisLabels.push(V),this.angleArcs.add(c)}}}createBasisVectors(e){if(void 0===e)return this.basisVectors=void 0,this.B=void 0,void(this.Bi=void 0);const n=(new t.Vector3).fromArray(e[0]),r=(new t.Vector3).fromArray(e[1]),i=(new t.Vector3).fromArray(e[2]);this.basisVectors=[n,r,i];const o=new t.Matrix3;o.set(n.x,r.x,i.x,n.y,r.y,i.y,n.z,r.z,i.z),this.basisVectorCollapsed=[];for(let t=0;t<3;++t){const e=this.basisVectors[t].length();this.basisVectorCollapsed.push(e<1e-6)}this.basisVectorCollapsed.some((t=>t))?(this.B=void 0,this.Bi=void 0):(this.B=o,this.Bi=(new t.Matrix3).copy(o).invert())}getCornerPoints(){this.atoms.updateMatrixWorld();const e=this.atoms.children,n=e.length,r=[];for(let i=0;i<n;++i){const n=e[i],o=new t.Vector3;n.getWorldPosition(o),r.push(o)}return{points:r,margin:this.maxRadii}}getRadii(t){return this.atomicRadii[t]||this.radii_unknown}getColor(t,e){return"Jmol"===t.color?this.elementColors[e]||this.color_unknown:t.color}createConventionalCell(e,n){const r=this.createCell(new t.Vector3,this.basisVectors,this.basisVectorCollapsed,e,this.options.cell.color,this.options.cell.linewidth,this.options.cell.dashSize,this.options.cell.gapSize);r.visible=n,this.convCell=r,this.container.add(this.convCell)}createCell(e,n,r,i,o,s,a,u){const c=new t.Object3D;let l;l=0!==a||0!==u?new t.LineDashedMaterial({color:o,linewidth:s,dashSize:a,gapSize:u}):new t.LineBasicMaterial({color:o,linewidth:s});for(let o=n.length,s=0;s<o;++s){const a=n[s].clone(),u=r[s],h=l.clone();if(i[s]||!u){const n=[];n.push(e.clone()),n.push(a.clone().add(e));const r=(new t.BufferGeometry).setFromPoints(n),i=new t.Line(r,h);c.add(i),i.computeLineDistances()}const f=n[(s+1)%o].clone();if(i[s]&&i[(s+1)%3]||!u){const n=l.clone(),r=[];r.push(f.clone().add(e)),r.push(a.clone().add(f).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}const p=n[(s+2)%o].clone();if(i[s]&&i[(s+2)%3]||!u){const n=l.clone(),r=[];r.push(p.clone().add(e)),r.push(a.clone().add(p).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}if(i[s]&&i[(s+2)%3]&&i[(s+1)%3]||!u){const n=l.clone(),r=[];r.push(f.clone().add(p).add(e)),r.push(a.clone().add(f).add(p).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}}return c}rotateView(e,n=!0){if(void 0!==e){for(const n of e){const e=new t.Vector3(n[0],n[1],n[2]);e.normalize();const r=n[3]/180*Math.PI;this.rotateAroundWorldAxis(this.root,e,r),this.rotateAroundWorldAxis(this.sceneInfo,e,r)}n&&this.render()}}alignView(t,e=!0){const n={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate()},r=[this.root,this.sceneInfo];super.alignView(t,n,r,e)}repeat(e,n,r){const i=new t.Vector3(1,0,0),o=new t.Vector3(0,1,0),s=new t.Vector3(0,0,1),a=[],u=[];for(let c=0;c<e[0];++c)for(let l=0;l<e[1];++l)for(let h=0;h<e[2];++h)if(0!=c||0!=l||0!=h){const e=i.clone().multiplyScalar(c),f=o.clone().multiplyScalar(l),p=s.clone().multiplyScalar(h);for(let i=0,o=n.length;i<o;++i){const o=(new t.Vector3).copy(n[i]);o.add(e),o.add(f),o.add(p);const s=r[i];a.push(o),u.push(s)}}for(let t=0;t<a.length;++t)n.push(a[t]),r.push(u[t])}wrap(t,e=!0){e||this.toScaled(t,!1);for(let e=t.length,n=0;n<e;++n){const e=t[n];this.structure.pbc[0]&&(e.x=e.x<0?1+e.x%1:e.x%1),this.structure.pbc[1]&&(e.y=e.y<0?1+e.y%1:e.y%1),this.structure.pbc[2]&&(e.z=e.z<0?1+e.z%1:e.z%1)}e||this.toCartesian(t,!1)}addBoundaryAtoms(e,n){for(let r=e.length,i=0;i<r;++i){const r=e[i],o=n[i],s=r.x,a=r.y,u=r.z,c=this.almostEqual(0,s,this.basisVectors[0],this.options.layout.wrapTolerance),l=this.almostEqual(0,a,this.basisVectors[1],this.options.layout.wrapTolerance),h=this.almostEqual(0,u,this.basisVectors[2],this.options.layout.wrapTolerance);c&&l&&h?(e.push(new t.Vector3(1,0,0).add(r)),n.push(o),e.push(new t.Vector3(0,1,0).add(r)),n.push(o),e.push(new t.Vector3(0,0,1).add(r)),n.push(o),e.push(new t.Vector3(1,1,0).add(r)),n.push(o),e.push(new t.Vector3(0,1,1).add(r)),n.push(o),e.push(new t.Vector3(1,0,1).add(r)),n.push(o),e.push(new t.Vector3(1,1,1).add(r)),n.push(o)):c&&l&&!h?(e.push(new t.Vector3(1,0,0).add(r)),n.push(o),e.push(new t.Vector3(0,1,0).add(r)),n.push(o),e.push(new t.Vector3(1,1,0).add(r)),n.push(o)):!c&&l&&h?(e.push(new t.Vector3(0,1,0).add(r)),n.push(o),e.push(new t.Vector3(0,0,1).add(r)),n.push(o),e.push(new t.Vector3(0,1,1).add(r)),n.push(o)):c&&!l&&h?(e.push(new t.Vector3(1,0,0).add(r)),n.push(o),e.push(new t.Vector3(0,0,1).add(r)),n.push(o),e.push(new t.Vector3(1,0,1).add(r)),n.push(o)):!c||l||h?c||!l||h?c||l||!h||(e.push(new t.Vector3(0,0,1).add(r)),n.push(o)):(e.push(new t.Vector3(0,1,0).add(r)),n.push(o)):(e.push(new t.Vector3(1,0,0).add(r)),n.push(o))}}createAtoms(e,n,r,i=!0){if(this.atoms.remove(...this.atoms.children),this.elements={},this.atomNumbers=[],this.atomFills=[],this.atomOutlines=[],r.some((t=>!0===t))){const t=this.options.layout.periodicity;"wrap"===t?this.wrap(e,i):i&&"boundary"===t?this.addBoundaryAtoms(e,n):i&&Array.isArray(t)&&this.repeat(t,e,n)}const o=[];for(const n of e){const e=new t.Vector3;i?(e.add(this.basisVectors[0].clone().multiplyScalar(n.x)),e.add(this.basisVectors[1].clone().multiplyScalar(n.y)),e.add(this.basisVectors[2].clone().multiplyScalar(n.z))):e.copy(n),o.push(e)}this.positions=o,this.atomicNumbers=n;for(const t of n){const e=this.elementNames[t];this.elements[e]=[this.jmolColors[t],this.covalentRadii[t]]}}setAtoms(t){(0,u.isPlainObject)(t)&&(t=[t]);for(const e of t){const t=e.include,n=e.exclude,r=!(0,u.isNil)(t),i=!(0,u.isNil)(n),o=h()(e,{algorithm:"md5"});let s;const a=this.atomicNumbers.length;if(r&&i)throw Error("Only provide include or exclude, not both.");if(r)s=t;else if(i){const t=new Set(n);s=(0,u.range)(a).filter((e=>!t.has(e)))}else s=(0,u.range)(a);const c={};for(const t of s)this.updateAtom(t,c,e,o)}}createBonds(e="auto"){var n,r,i,o,s,a,u;if(!this.options.bonds.enabled)return;if(!this.updateBonds)return;this.bondFills=[],this.bonds.remove(...this.bonds.children);const c=this.getPositions();let l;if(null===(i=null===(r=null===(n=this.options)||void 0===n?void 0:n.bonds)||void 0===r?void 0:r.material)||void 0===i?void 0:i.toon){const e=null===(u=null===(a=null===(s=null===(o=this.options)||void 0===o?void 0:o.bonds)||void 0===s?void 0:s.material)||void 0===a?void 0:a.toon)||void 0===u?void 0:u.tones,n=new Uint8Array(e);for(let t=0;t<=e;t++)n[t]=t/e*256;const r=new t.DataTexture(n,n.length,1,t.LuminanceFormat);r.minFilter=t.NearestFilter,r.magFilter=t.NearestFilter,r.generateMipmaps=!1,l=new t.MeshToonMaterial({color:this.options.bonds.color,gradientMap:r})}else l=new t.MeshPhongMaterial({color:this.options.bonds.color,shininess:this.options.bonds.material.phong.shininess});if(Array.isArray(e))for(const t of e){const e=t[0],n=t[1],r=c[e],i=c[n];this.addBond(e,n,r,i,l)}else if("auto"===e){const t=c.length;for(let e=0;e<t;++e)for(let n=0;n<t;++n)if(n>e){const t=c[e],r=c[n],i=this.atomNumbers[e],o=this.atomNumbers[n],s=r.clone().sub(t).length(),a=this.options.atoms.scale*this.getRadii(i),u=this.options.atoms.scale*this.getRadii(o);s<=1.1*this.options.bonds.threshold*(a+u)&&this.addBond(e,n,t,r,l)}}this.updateBonds=!1}almostEqual(t,e,n,r){const i=e-t;return Math.abs(n.clone().multiplyScalar(i).length())<r}addBond(e,n,r,i,o){const s=this.options.bonds.radius,a=this.options.bonds.smoothness,u=Math.ceil(360/(180-a)),c=this.createCylinder(r,i,s,u,o);c.name="fill",this.bondFills.push(c);const l=new t.Group;if(l.name="bond"+e+"-"+n,l.add(c),this.options.bonds.outline.enabled){const e=this.options.bonds.outline.size/s+1,n=new t.MeshBasicMaterial({color:this.options.bonds.outline.color,side:t.BackSide}),o=this.createCylinder(r,i,e*s,10,n);o.name="outline",l.add(o)}this.bonds.add(l)}updateAtom(e,n,r,i){var o,s,a;const c=this.atoms.getObjectByName(`atom${e}`),l=this.atomicNumbers[e];if((0,u.isNil)(c)){const a=this.positions[e],u=`${i}_${l}`;if(!(u in n)){n[u]={};const e=this.createAtomGeometry(r,l),i=this.createAtomMaterial(r,l),s=new t.Mesh(e,i);if(n[u].atom=s,null===(o=null==r?void 0:r.outline)||void 0===o?void 0:o.enabled){const e=this.createAtomOutlineGeometry(r,l),i=this.createAtomOutlineMaterial(r),o=new t.Mesh(e,i);n[u].outline=o}}const c=n[u],h=new t.Vector3;h.copy(a);const f=new t.Group;f.name="atom"+e;const p=c.atom.clone();if(p.name="fill",f.add(p),null===(s=null==r?void 0:r.outline)||void 0===s?void 0:s.enabled){const t=c.outline.clone();this.atomOutlines.push(t),t.name="outline",f.add(t)}f.position.copy(h),this.atoms.add(f),this.atomFills.push(p),this.atomNumbers.push(l),this.updateBonds=!0}else(0,u.isNil)(r.color)||c.getObjectByName("fill").material.color.set(this.getColor(r,l)),(0,u.isNil)(r.opacity)||(0===r.opacity?c.visible=!1:(c.visible=!0,c.getObjectByName("outline").material.opacity=r.opacity,c.getObjectByName("outline").material.transparent=1!==r.opacity,c.getObjectByName("fill").material.opacity=r.opacity,c.getObjectByName("fill").material.transparent=1!==r.opacity)),(0,u.isNil)(null===(a=null==r?void 0:r.outline)||void 0===a?void 0:a.color)||c.getObjectByName("outline").material.color.set(r.outline.color)}createAtomGeometry(e,n){const r="covalent"===e.radius?this.getRadii(n):e.radius,i=e.scale*r,o=e.smoothness,s=Math.ceil(360/(180-o));return new t.SphereGeometry(i,s,s)}createAtomMaterial(e,n){var r,i,o;let s;const a=this.getColor(e,n);if(void 0!==(null===(r=null==e?void 0:e.material)||void 0===r?void 0:r.toon)){const n=null===(o=null===(i=null==e?void 0:e.material)||void 0===i?void 0:i.toon)||void 0===o?void 0:o.tones,r=new Uint8Array(n);for(let t=0;t<=n;t++)r[t]=t/n*256;const u=new t.DataTexture(r,r.length,1,t.LuminanceFormat);u.minFilter=t.NearestFilter,u.magFilter=t.NearestFilter,u.generateMipmaps=!1,s=new t.MeshToonMaterial({color:a,gradientMap:u})}else s=new t.MeshPhongMaterial({color:a,shininess:e.material.phong.shininess,opacity:e.opacity,transparent:1!==e.opacity});return s}createAtomOutlineGeometry(e,n){var r;const i="covalent"===e.radius?this.getRadii(n):e.radius,o=e.scale*i,s=(null===(r=null==e?void 0:e.outline)||void 0===r?void 0:r.size)/o+1,a=e.smoothness,u=Math.ceil(360/(180-a));return new t.SphereGeometry(o*s,u,u)}createAtomOutlineMaterial(e){var n;return new t.MeshBasicMaterial({color:null===(n=null==e?void 0:e.outline)||void 0===n?void 0:n.color,side:t.BackSide,opacity:e.opacity,transparent:1!==e.opacity})}render(){const e=this.rootElement,n=e.clientWidth,r=e.clientHeight,i=new t.Vector3(1,0,0),o=new t.Vector3(0,0,0),s=[i,o];for(let t=0;t<s.length;++t){const e=s[t];this.camera.localToWorld(e),e.project(this.camera),e.x=Math.round((e.x+1)*n/2),e.y=Math.round((1-e.y)*r/2)}const a=(new t.Vector3).subVectors(o,i).length(),u=8/Math.pow(a,.5);if(void 0!==this.axisLabels)for(let t=0;t<this.axisLabels.length;++t)this.axisLabels[t].scale.set(u,u,1);super.render()}getRepetitions(t,e){const n=t.length();return Math.max(Math.floor(e/n)-1,1)}}class p{constructor(t,e){this.vertex=null,this.prev=null,this.next=null,this.twin=null,this.face=null,this.vertex=t,this.face=e}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1}lengthSquared(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1}setTwin(t){return this.twin=t,t.twin=this,this}}class d{constructor(e,n,r){this.normal=new t.Vector3,this.midpoint=new t.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null;var i=new p(e,this),o=new p(n,this),s=new p(r,this);i.next=s.prev=o,o.next=i.prev=s,s.next=o.prev=i,this.edge=i,this.compute()}getEdge(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e}compute(){var e;void 0===e&&(e=new t.Triangle);var n=this.edge.tail(),r=this.edge.head(),i=this.edge.next.head();return e.set(n.point,r.point,i.point),e.getNormal(this.normal),e.getMidpoint(this.midpoint),this.area=e.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(t){return this.normal.dot(t)-this.constant}}const v=function(){var e,n,r,i=new t.Vector3;function o(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new a,this.unassigned=new a,this.vertices=[]}function s(t){this.point=t,this.prev=null,this.next=null,this.face=null}function a(){this.head=null,this.tail=null}return Object.assign(o.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.vertices.push(new s(t[e]));return this.compute(),this},setFromObject:function(e){var n=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var r,i,o,s=e.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(r=0,i=a.length;r<i;r++)(o=a[r].clone()).applyMatrix4(e.matrixWorld),n.push(o)}else if(s.isBufferGeometry){var u=s.attributes.position;if(void 0!==u)for(r=0,i=u.count;r<i;r++)(o=new t.Vector3).fromBufferAttribute(u,r).applyMatrix4(e.matrixWorld),n.push(o)}})),this.setFromPoints(n)},containsPoint:function(t){for(var e=this.faces,n=0,r=e.length;n<r;n++)if(e[n].distanceToPoint(t)>this.tolerance)return!1;return!0},intersectRay:function(t,e){for(var n=this.faces,r=-1/0,i=1/0,o=0,s=n.length;o<s;o++){var a=n[o],u=a.distanceToPoint(t.origin),c=a.normal.dot(t.direction);if(u>0&&c>=0)return null;var l=0!==c?-u/c:0;if(!(l<=0)&&(c>0?i=Math.min(l,i):r=Math.max(l,r),r>i))return null}return r!==-1/0?t.at(r,e):t.at(i,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,i)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;e.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,e):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{for(var n=e.next,r=this.tolerance,i=null,o=0;o<t.length;o++){var s=t[o];if(0===s.mark){var a=s.distanceToPoint(e.point);if(a>r&&(r=a,i=s),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(e,i),e=n}while(null!==e)}return this},computeExtremes:function(){var e,n,r,i=new t.Vector3,o=new t.Vector3,s=[],a=[];for(e=0;e<3;e++)s[e]=a[e]=this.vertices[0];for(i.copy(this.vertices[0].point),o.copy(this.vertices[0].point),e=0,n=this.vertices.length;e<n;e++){var u=this.vertices[e],c=u.point;for(r=0;r<3;r++)c.getComponent(r)<i.getComponent(r)&&(i.setComponent(r,c.getComponent(r)),s[r]=u);for(r=0;r<3;r++)c.getComponent(r)>o.getComponent(r)&&(o.setComponent(r,c.getComponent(r)),a[r]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(i.x),Math.abs(o.x))+Math.max(Math.abs(i.y),Math.abs(o.y))+Math.max(Math.abs(i.z),Math.abs(o.z))),{min:s,max:a}},computeInitialHull:function(){void 0===e&&(e=new t.Line3,n=new t.Plane,r=new t.Vector3);var i,o,s,a,u,c,l,h,f,p=this.vertices,v=this.computeExtremes(),g=v.min,m=v.max,y=0,b=0;for(c=0;c<3;c++)(f=m[c].point.getComponent(c)-g[c].point.getComponent(c))>y&&(y=f,b=c);for(o=g[b],s=m[b],y=0,e.set(o.point,s.point),c=0,l=this.vertices.length;c<l;c++)(i=p[c])!==o&&i!==s&&(e.closestPointToPoint(i.point,!0,r),(f=r.distanceToSquared(i.point))>y&&(y=f,a=i));for(y=-1,n.setFromCoplanarPoints(o.point,s.point,a.point),c=0,l=this.vertices.length;c<l;c++)(i=p[c])!==o&&i!==s&&i!==a&&(f=Math.abs(n.distanceToPoint(i.point)))>y&&(y=f,u=i);var w=[];if(n.distanceToPoint(u.point)<0)for(w.push(new d(o,s,a),new d(u,s,o),new d(u,a,s),new d(u,o,a)),c=0;c<3;c++)h=(c+1)%3,w[c+1].getEdge(2).setTwin(w[0].getEdge(h)),w[c+1].getEdge(1).setTwin(w[h+1].getEdge(0));else for(w.push(new d(o,a,s),new d(u,o,s),new d(u,s,a),new d(u,a,o)),c=0;c<3;c++)h=(c+1)%3,w[c+1].getEdge(2).setTwin(w[0].getEdge((3-c)%3)),w[c+1].getEdge(0).setTwin(w[h+1].getEdge(1));for(c=0;c<4;c++)this.faces.push(w[c]);for(c=0,l=p.length;c<l;c++)if((i=p[c])!==o&&i!==s&&i!==a&&i!==u){y=this.tolerance;var _=null;for(h=0;h<4;h++)(f=this.faces[h].distanceToPoint(i.point))>y&&(y=f,_=this.faces[h]);null!==_&&this.addVertexToFace(i,_)}return this},reindexFaces:function(){for(var t=[],e=0;e<this.faces.length;e++){var n=this.faces[e];0===n.mark&&t.push(n)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>e&&(e=i,t=r),r=r.next}while(null!==r&&r.face===n);return t}},computeHorizon:function(t,e,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===e?e=n.getEdge(0):e.next;do{var o=i.twin,s=o.face;0===s.mark&&(s.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,o,s,r):r.push(i)),i=i.next}while(i!==e);return this},addAdjoiningFace:function(t,e){var n=new d(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];for(var n=null,r=null,i=0;i<e.length;i++){var o=e[i],s=this.addAdjoiningFace(t,o);null===n?n=s:s.next.setTwin(r),this.newFaces.push(s.face),r=s}return n.next.setTwin(r),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(a.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),o}();var g=n(591),m=n(301),y=n.n(m);class b extends c{setupScenes(){this.scenes=[],this.sceneZone=new t.Scene,this.scenes.push(this.sceneZone),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo)}setupLights(){const e=new t.DirectionalLight(16777215,.45);e.position.set(0,0,20),this.sceneZone.add(e);const n=new t.DirectionalLight(16777215,.3);n.position.set(-20,0,-20),this.sceneZone.add(n);const r=new t.DirectionalLight(16777215,.25);r.position.set(20,0,-20),this.sceneZone.add(r);const i=new t.AmbientLight(4210752,3.7);this.sceneZone.add(i)}load(t){var e,n,r,i,o,s;this.data=t,this.clear(),this.setup(),this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls();const a=t.basis,u=t.segments,c=t.kpoints;return this.basis=t.basis,a&&u?(this.createBrillouinZone(a,u,c),void 0!==this.B&&this.alignView(null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.layout)||void 0===n?void 0:n.viewRotation)||void 0===r?void 0:r.alignments),this.rotateView(null===(s=null===(o=null===(i=this.options)||void 0===i?void 0:i.layout)||void 0===o?void 0:o.viewRotation)||void 0===s?void 0:s.rotations),this.options.view.autoFit&&super.fitViewToContent(),this.render(),!0):(console.log("The data given for the Brillouin zone viewer is incomplete."),!1)}setOptions(t,e=!0,n=!0){var r,i,o;const s={controls:{rotateSpeed:40,enablePan:!1},view:{fitMargin:.075},basis:{offset:.02,font:"Arial",size:.03,stroke:{width:.06,color:"#000"},a:{label:"a"},b:{label:"b"},c:{label:"c"}},segments:{color:"#E56400",linewidth:.0025},kpoints:{point:{enabled:!0,size:.01,color:"#E56400"},label:{enabled:!0,font:"Arial",size:.025,color:"#E56400",offset2D:[0,-.75],stroke:{width:.06,color:"#000"}}},faces:{color:"#ddd",opacity:.7,outline:{width:.002,color:"#999"}}};0===Object.keys(this.options).length?(this.fillOptions(t,s),super.setOptions(s)):(this.fillOptions(t,this.options),super.setOptions(this.options),n&&void 0!==this.data&&this.load(this.data),void 0!==(null===(r=null==t?void 0:t.renderer)||void 0===r?void 0:r.background)&&this.setBackgroundColor(null===(i=null==t?void 0:t.renderer)||void 0===i?void 0:i.background.color,null===(o=null==t?void 0:t.renderer)||void 0===o?void 0:o.background.opacity),e&&this.render())}createBrillouinZone(e,n,r){var i,o,s,a,u,c,l,h,f,p,d,m,b,w,_,x,C,A,E,S,M;const V=new t.Matrix3,k=(new t.Vector3).fromArray(e[0]),j=(new t.Vector3).fromArray(e[1]),z=(new t.Vector3).fromArray(e[2]);V.set(k.x,j.x,z.x,k.y,j.y,z.y,k.z,j.z,z.z),this.basisVectors=[k,j,z],this.B=V;const B=(new t.Matrix3).identity(),L=[];for(let e=-1;e<=1;++e)for(let n=-1;n<=1;++n)for(let r=-1;r<=1;++r){const i=new t.Vector3(e,n,r),o=this.coordinateTransform(this.B,B,i,!1);L.push(o.toArray())}const I=y()(L);let P;for(const e of I.cells){const n=[];let r=!0,i=!0;for(const t of e){if(-1===t){r=!1;break}const e=I.positions[t];for(let t=0;t<3;++t)if(Number.isNaN(e[t])){i=!1;break}n.push(e)}if(!r||!i)continue;const o=new t.Vector3(0,0,0),s=[];for(let e=0;e<n.length;++e){const r=(new t.Vector3).fromArray(n[e]);s.push(r),o.add(r)}if(o.divideScalar(s.length),o.length()<1e-7){P=s;break}}this.zone=new t.Object3D,this.zone.name="zone",this.sceneZone.add(this.zone),this.info=new t.Object3D,this.info.name="info",this.sceneInfo.add(this.info);const{geometry:O,faces:T}=function(e){const n=new t.BufferGeometry,r=[],i=[],o=(new v).setFromPoints(e).faces;for(let t=0;t<o.length;t++){const e=o[t];let n=e.edge;do{const t=n.head().point;r.push(t.x,t.y,t.z),i.push(e.normal.x,e.normal.y,e.normal.z),n=n.next}while(n!==e.edge)}n.setAttribute("position",new t.Float32BufferAttribute(r,3)),n.setAttribute("normal",new t.Float32BufferAttribute(i,3));const s=[],a=new Set(o);for(let t of a){const e=[],n=t.edge;let r=t.edge;e.push(n.tail().point);do{const n=t.normal,i=r.twin.face,o=i.normal;Math.abs(n.dot(o)-1)<=1e-8?(t=i,r=r.twin.next):(e.push(r.head().point),r=r.next),a.delete(t)}while(r!==n);s.push(e)}return{geometry:n,faces:s}}(P),F=new t.Group;F.name="group";const R=new t.MeshPhongMaterial({color:this.options.faces.color,opacity:this.options.faces.opacity,transparent:!0}),D=new t.Mesh(O,R);D.name="innermesh",D.material.side=t.BackSide,D.renderOrder=0,F.add(D);const U=new t.Mesh(O,R.clone());U.name="outermesh",U.material.side=t.FrontSide,U.renderOrder=1,F.add(U),this.zone.add(F);const N=this.options.faces.outline.width,W=new g.MeshLineMaterial({color:this.options.faces.outline.color,lineWidth:N,sizeAttenuation:!0});for(const e of T){const n=[];for(const t of e){let e=t.clone();const r=e.length();e=e.multiplyScalar(1+.5*N/r),n.push(e)}const r=new g.MeshLine;r.setPoints(n);const i=new t.Mesh(r,W);this.zone.add(i)}const H=[this.options.basis.a.label,this.options.basis.b.label,this.options.basis.c.label],Y=[];Y.push(void 0===(null===(i=this.options.basis.a)||void 0===i?void 0:i.font)?this.options.basis.font:this.options.basis.a.font),Y.push(void 0===(null===(o=this.options.basis.b)||void 0===o?void 0:o.font)?this.options.basis.font:this.options.basis.b.font),Y.push(void 0===(null===(s=this.options.basis.c)||void 0===s?void 0:s.font)?this.options.basis.font:this.options.basis.c.font);const Z=[];Z.push(void 0===(null===(a=this.options.basis.a)||void 0===a?void 0:a.size)?this.options.basis.size:this.options.basis.a.size),Z.push(void 0===(null===(u=this.options.basis.b)||void 0===u?void 0:u.size)?this.options.basis.size:this.options.basis.b.size),Z.push(void 0===(null===(c=this.options.basis.c)||void 0===c?void 0:c.size)?this.options.basis.size:this.options.basis.c.size);const G=[];G.push(void 0===(null===(l=this.options.basis.a)||void 0===l?void 0:l.color)?this.options.basis.color:this.options.basis.a.color),G.push(void 0===(null===(h=this.options.basis.b)||void 0===h?void 0:h.color)?this.options.basis.color:this.options.basis.b.color),G.push(void 0===(null===(f=this.options.basis.c)||void 0===f?void 0:f.color)?this.options.basis.color:this.options.basis.c.color);const q=[];q.push(void 0===(null===(d=null===(p=this.options.basis.a)||void 0===p?void 0:p.stroke)||void 0===d?void 0:d.color)?this.options.basis.stroke.color:this.options.basis.a.stroke.color),q.push(void 0===(null===(b=null===(m=this.options.basis.b)||void 0===m?void 0:m.stroke)||void 0===b?void 0:b.color)?this.options.basis.stroke.color:this.options.basis.b.stroke.color),q.push(void 0===(null===(_=null===(w=this.options.basis.c)||void 0===w?void 0:w.stroke)||void 0===_?void 0:_.color)?this.options.basis.stroke.color:this.options.basis.c.stroke.color);const $=[];$.push(void 0===(null===(C=null===(x=this.options.basis.a)||void 0===x?void 0:x.stroke)||void 0===C?void 0:C.width)?this.options.basis.stroke.width:this.options.basis.a.stroke.width),$.push(void 0===(null===(E=null===(A=this.options.basis.b)||void 0===A?void 0:A.stroke)||void 0===E?void 0:E.width)?this.options.basis.stroke.width:this.options.basis.b.stroke.width),$.push(void 0===(null===(M=null===(S=this.options.basis.c)||void 0===S?void 0:S.stroke)||void 0===M?void 0:M.width)?this.options.basis.stroke.width:this.options.basis.c.stroke.width);for(let n=0;n<3;++n){const r=.7,i=e[n],o=new t.Vector3(0,0,0),s=(new t.Vector3).fromArray(i).multiplyScalar(r),a=[o,s],u=new g.MeshLineMaterial({color:"#000",lineWidth:75e-5,sizeAttenuation:!0,dashArray:.05,transparent:!0,depthTest:!1}),c=new g.MeshLine;c.setPoints(a);const l=new t.Mesh(c,u);this.info.add(l);const h=(new t.Vector3).copy(s).multiplyScalar(1+this.options.basis.offset/s.length()),f=H[n],p=G[n],d=Y[n],v=Z[n],m=$[n],y=q[n],b=this.createLabel(h,f,p,d,v,new t.Vector2(0,0),m,y);this.info.add(b);const w=new t.CylinderGeometry(0,.003,.012,12),_=new t.MeshBasicMaterial({color:0}),x=new t.Mesh(w,_);x.position.copy(s),x.lookAt(new t.Vector3),x.rotateX(-Math.PI/2),this.info.add(x)}const X=new g.MeshLineMaterial({color:this.options.segments.color,lineWidth:this.options.segments.linewidth,sizeAttenuation:!0}),K=[];for(let e=0;e<n.length;++e){const r=[],i=n[e];for(const e of i){const n=(new t.Vector3).fromArray(e),i=this.coordinateTransform(this.B,B,n,!1);r.push(i),r.push(i),K.push(i)}const o=new g.MeshLine;o.setPoints(r);const s=new t.Mesh(o,X);this.info.add(s)}this.labelPoints=new t.Object3D;for(const e of K){const n=new t.Object3D;n.position.copy(e),this.labelPoints.add(n)}if(this.info.add(this.labelPoints),r)for(const e of r){const n=e[0],r=(new t.Vector3).fromArray(e[1]),i=this.coordinateTransform(this.B,B,r,!1);if(this.options.kpoints.point.enabled){const t=this.createCircle(i,this.options.kpoints.point.size,this.options.kpoints.point.color);this.info.add(t)}if(this.options.kpoints.label.enabled){const e=this.createLabel(i,n,this.options.kpoints.label.color,this.options.kpoints.label.font,this.options.kpoints.label.size,(new t.Vector2).fromArray(this.options.kpoints.label.offset2D),this.options.kpoints.label.stroke.width,this.options.kpoints.label.stroke.width);this.info.add(e)}}}getCornerPoints(){const e=this.zone.getObjectByName("group").getObjectByName("outermesh");e.updateMatrixWorld();const n=[],r=e.geometry.attributes.position.array,i=r.length/3;for(let e=0;e<i;++e)n.push((new t.Vector3).fromArray(r,3*e));const o=[];for(let t=0;t<i;++t){const r=n[t];o.push(e.localToWorld(r))}return{points:o,margin:0}}rotateView(e,n=!0){if(void 0!==e){for(const n of e){const e=new t.Vector3(n[0],n[1],n[2]);e.normalize();const r=n[3]/180*Math.PI;this.rotateAroundWorldAxis(this.zone,e,r),this.rotateAroundWorldAxis(this.info,e,r)}n&&this.render()}}alignView(e,n=!0){const r=new t.Vector3,i=this.labelPoints.children.length;for(let e=0;e<i;++e){const n=this.labelPoints.children[e];r.add(n.getWorldPosition(new t.Vector3))}const o={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate(),segments:r},s=[this.zone,this.info];super.alignView(e,o,s,n)}createCircle(e,n,r){const i=document.createElement("canvas");i.width=256,i.height=256;const o=i.getContext("2d");o.beginPath(),o.arc(128,128,128,0,2*Math.PI),o.fillStyle=r,o.fill();const s=new t.Texture(i);s.needsUpdate=!0;const a=new t.SpriteMaterial({map:s}),u=new t.Sprite(a);u.scale.set(n,n,1);const c=new t.Object3D;return c.position.copy(e),c.add(u),c}}})(),materia=r})();