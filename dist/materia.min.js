/*! For license information please see materia.min.js.LICENSE.txt */
var materia;(()=>{var t={746:(t,e)=>{"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},645:(t,e,n)=>{"use strict";var i=n(841),r=n(489);function o(t,e){for(var n=0,i=t.length,r=0;r<i;++r)n+=t[r]*e[r];return n}function s(t){var e=t.length;if(0===e)return[];t[0].length;var n=i([t.length+1,t.length+1],1),s=i([t.length+1],1);n[e][e]=0;for(var a=0;a<e;++a){for(var u=0;u<=a;++u)n[u][a]=n[a][u]=2*o(t[a],t[u]);s[a]=o(t[a],t[a])}var l=r(n,s),c=0,h=l[e+1];for(a=0;a<h.length;++a)c+=h[a];var f=new Array(e);for(a=0;a<e;++a){h=l[a];var p=0;for(u=0;u<h.length;++u)p+=h[u];f[a]=p/c}return f}function a(t){if(0===t.length)return[];for(var e=t[0].length,n=i([e]),r=s(t),o=0;o<t.length;++o)for(var a=0;a<e;++a)n[a]+=t[o][a]*r[o];return n}a.barycenetric=s,t.exports=a},930:(t,e,n)=>{"use strict";var i=n(293),r=n(706);function o(t,e){this.point=t,this.index=e}function s(t,e){for(var n=t.point,i=e.point,r=n.length,o=0;o<r;++o){var s=i[o]-n[o];if(s)return s}return 0}t.exports=function(t,e){var n=t.length;if(0===n)return[];var a=t[0].length;if(a<1)return[];if(1===a)return function(t,e,n){if(1===t)return n?[[-1,0]]:[];var i=e.map((function(t,e){return[t[0],e]}));i.sort((function(t,e){return t[0]-e[0]}));for(var r=new Array(t-1),o=1;o<t;++o){var s=i[o-1],a=i[o];r[o-1]=[s[1],a[1]]}return n&&r.push([-1,r[0][1]],[r[t-1][1],-1]),r}(n,t,e);for(var u=new Array(n),l=1,c=0;c<n;++c){for(var h=t[c],f=new Array(a+1),p=0,d=0;d<a;++d){var v=h[d];f[d]=v,p+=v*v}f[a]=p,u[c]=new o(f,c),l=Math.max(p,l)}r(u,s),n=u.length;var g=new Array(n+a+1),m=new Array(n+a+1),b=(a+1)*(a+1)*l,y=new Array(a+1);for(c=0;c<=a;++c)y[c]=0;for(y[a]=b,g[0]=y.slice(),m[0]=-1,c=0;c<=a;++c)(f=y.slice())[c]=1,g[c+1]=f,m[c+1]=-1;for(c=0;c<n;++c){var w=u[c];g[c+a+1]=w.point,m[c+a+1]=w.index}var _=i(g,!1);if(_=e?_.filter((function(t){for(var e=0,n=0;n<=a;++n){var i=m[t[n]];if(i<0&&++e>=2)return!1;t[n]=i}return!0})):_.filter((function(t){for(var e=0;e<=a;++e){var n=m[t[e]];if(n<0)return!1;t[e]=n}return!0})),1&a)for(c=0;c<_.length;++c)f=(w=_[c])[0],w[0]=w[1],w[1]=f;return _}},841:t=>{"use strict";function e(t,n,i){var r=0|t[i];if(r<=0)return[];var o,s=new Array(r);if(i===t.length-1)for(o=0;o<r;++o)s[o]=n;else for(o=0;o<r;++o)s[o]=e(t,n,i+1);return s}t.exports=function(t,n){switch(void 0===n&&(n=0),typeof t){case"number":if(t>0)return function(t,e){var n,i;for(n=new Array(t),i=0;i<t;++i)n[i]=e;return n}(0|t,n);break;case"object":if("number"==typeof t.length)return e(t,n,0)}return[]}},293:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var s=t.slice(0,r+1),a=i.apply(void 0,s);if(0===a)throw new Error("Input not in general position");for(var u=new Array(r+1),c=0;c<=r;++c)u[c]=c;a<0&&(u[0]=1,u[1]=0);var h=new o(u,new Array(r+1),!1),f=h.adjacent,p=new Array(r+2);for(c=0;c<=r;++c){for(var d=u.slice(),v=0;v<=r;++v)v===c&&(d[v]=-1);var g=d[0];d[0]=d[1],d[1]=g;var m=new o(d,new Array(r+1),!0);f[c]=m,p[c]=m}for(p[r+1]=h,c=0;c<=r;++c){d=f[c].vertices;var b=f[c].adjacent;for(v=0;v<=r;++v){var y=d[v];if(y<0)b[v]=h;else for(var w=0;w<=r;++w)f[w].vertices.indexOf(y)<0&&(b[v]=f[w])}}var _=new l(r,s,p),x=!!e;for(c=r+1;c<n;++c)_.insert(t[c],x);return _.boundary()};var i=n(146),r=n(572).H;function o(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function s(t,e,n){this.vertices=t,this.cell=e,this.index=n}function a(t,e){return r(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function l(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var r=0;r<=t;++r)this.tuple[r]=this.vertices[r];var o=u[t];o||(o=u[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var r=new Function("test",e.join("")),o=i[t+1];return o||(o=i),r(o)}(t)),this.orient=o}var c=l.prototype;c.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,i=this.vertices.length-1,r=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-i;s.length>0;){(t=s.pop()).vertices;for(var a=t.adjacent,u=0;u<=n;++u){var l=a[u];if(l.boundary&&!(l.lastVisited<=-i)){for(var c=l.vertices,h=0;h<=n;++h){var f=c[h];r[h]=f<0?e:o[f]}var p=this.orient();if(p>0)return l;l.lastVisited=-i,0===p&&s.push(l)}}}return null},c.walk=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var u=a.vertices,l=a.adjacent,c=0;c<=i;++c)o[c]=r[u[c]];for(a.lastVisited=n,c=0;c<=i;++c){var h=l[c];if(!(h.lastVisited>=n)){var f=o[c];o[c]=t;var p=this.orient();if(o[c]=f,p<0){a=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return a},c.addPeaks=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,u=this.tuple,l=this.interior,c=this.simplices,h=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,l.push(e);for(var f=[];h.length>0;){var p=(e=h.pop()).vertices,d=e.adjacent,v=p.indexOf(n);if(!(v<0))for(var g=0;g<=i;++g)if(g!==v){var m=d[g];if(m.boundary&&!(m.lastVisited>=n)){var b=m.vertices;if(m.lastVisited!==-n){for(var y=0,w=0;w<=i;++w)b[w]<0?(y=w,u[w]=t):u[w]=r[b[w]];if(this.orient()>0){b[y]=n,m.boundary=!1,l.push(m),h.push(m),m.lastVisited=n;continue}m.lastVisited=-n}var _=m.adjacent,x=p.slice(),C=d.slice(),A=new o(x,C,!0);c.push(A);var M=_.indexOf(e);if(!(M<0))for(_[M]=A,C[v]=m,x[g]=-1,C[g]=e,d[g]=A,A.flip(),w=0;w<=i;++w){var V=x[w];if(!(V<0||V===n)){for(var S=new Array(i-1),z=0,E=0;E<=i;++E){var k=x[E];k<0||E===w||(S[z++]=k)}f.push(new s(S,A,w))}}}}}for(f.sort(a),g=0;g+1<f.length;g+=2){var j=f[g],P=f[g+1],O=j.index,L=P.index;O<0||L<0||(j.cell.adjacent[j.index]=P.cell,P.cell.adjacent[P.index]=j.cell)}},c.insert=function(t,e){var n=this.vertices;n.push(t);var i=this.walk(t,e);if(i){for(var r=this.dimension,o=this.tuple,s=0;s<=r;++s){var a=i.vertices[s];o[s]=a<0?t:n[a]}var u=this.orient(o);u<0||(0!==u||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},c.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,i=n.length,r=0;r<i;++r){var o=n[r];if(o.boundary){for(var s=new Array(t),a=o.vertices,u=0,l=0,c=0;c<=t;++c)a[c]>=0?s[u++]=a[c]:l=1&c;if(l===(1&t)){var h=s[0];s[0]=s[1],s[1]=h}e.push(s)}}return e}},486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],v="[object Arguments]",g="[object Array]",m="[object Boolean]",b="[object Date]",y="[object Error]",w="[object Function]",_="[object GeneratorFunction]",x="[object Map]",C="[object Number]",A="[object Object]",M="[object Promise]",V="[object RegExp]",S="[object Set]",z="[object String]",E="[object Symbol]",k="[object WeakMap]",j="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",L="[object Float64Array]",T="[object Int8Array]",R="[object Int16Array]",B="[object Int32Array]",F="[object Uint8Array]",D="[object Uint8ClampedArray]",W="[object Uint16Array]",I="[object Uint32Array]",N=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,q=RegExp(Z.source),$=RegExp(G.source),X=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="["+At+"]",Vt="["+_t+"]",St="\\d+",zt="["+xt+"]",Et="[^\\ud800-\\udfff"+At+St+"\\u2700-\\u27bf"+xt+Ct+"]",kt="\\ud83c[\\udffb-\\udfff]",jt="[^\\ud800-\\udfff]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",Lt="["+Ct+"]",Tt="(?:"+zt+"|"+Et+")",Rt="(?:"+Lt+"|"+Et+")",Bt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",Dt="(?:"+Vt+"|"+kt+")?",Wt="[\\ufe0e\\ufe0f]?",It=Wt+Dt+"(?:\\u200d(?:"+[jt,Pt,Ot].join("|")+")"+Wt+Dt+")*",Nt="(?:"+["[\\u2700-\\u27bf]",Pt,Ot].join("|")+")"+It,Ut="(?:"+[jt+Vt+"?",Vt,Pt,Ot,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['’]","g"),Zt=RegExp(Vt,"g"),Gt=RegExp(kt+"(?="+kt+")|"+Ut+It,"g"),qt=RegExp([Lt+"?"+zt+"+"+Bt+"(?="+[Mt,Lt,"$"].join("|")+")",Rt+"+"+Ft+"(?="+[Mt,Lt+Tt,"$"].join("|")+")",Lt+"?"+Tt+"+"+Bt,Lt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",St,Nt].join("|"),"g"),$t=RegExp("[\\u200d\\ud800-\\udfff"+_t+"\\ufe0e\\ufe0f]"),Xt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Qt={};Qt[O]=Qt[L]=Qt[T]=Qt[R]=Qt[B]=Qt[F]=Qt[D]=Qt[W]=Qt[I]=!0,Qt[v]=Qt[g]=Qt[j]=Qt[m]=Qt[P]=Qt[b]=Qt[y]=Qt[w]=Qt[x]=Qt[C]=Qt[A]=Qt[V]=Qt[S]=Qt[z]=Qt[k]=!1;var Jt={};Jt[v]=Jt[g]=Jt[j]=Jt[P]=Jt[m]=Jt[b]=Jt[O]=Jt[L]=Jt[T]=Jt[R]=Jt[B]=Jt[x]=Jt[C]=Jt[A]=Jt[V]=Jt[S]=Jt[z]=Jt[E]=Jt[F]=Jt[D]=Jt[W]=Jt[I]=!0,Jt[y]=Jt[w]=Jt[k]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ie||re||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,ue=ae&&ae.exports===se,le=ue&&ie.process,ce=function(){try{return ae&&ae.require&&ae.require("util").types||le&&le.binding&&le.binding("util")}catch(t){}}(),he=ce&&ce.isArrayBuffer,fe=ce&&ce.isDate,pe=ce&&ce.isMap,de=ce&&ce.isRegExp,ve=ce&&ce.isSet,ge=ce&&ce.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function be(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function ye(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function Ce(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function Ae(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Me(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ve(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Se(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function ze(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ee(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ke=Be("length");function je(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Pe(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Oe(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Pe(t,Te,n)}function Le(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Te(t){return t!=t}function Re(t,e){var n=null==t?0:t.length;return n?We(t,e)/n:f}function Be(t){return function(e){return null==e?r:e[t]}}function Fe(t){return function(e){return null==t?r:t[e]}}function De(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function We(t,e){for(var n,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ie(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ne(t){return t?t.slice(0,an(t)+1).replace(it,""):t}function Ue(t){return function(e){return t(e)}}function He(t,e){return Me(e,(function(e){return t[e]}))}function Ze(t,e){return t.has(e)}function Ge(t,e){for(var n=-1,i=t.length;++n<i&&Oe(e,t[n],0)>-1;);return n}function qe(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}function $e(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Xe=Fe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ye=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ke(t){return"\\"+te[t]}function Qe(t){return $t.test(t)}function Je(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[r++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Qe(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):ke(t)}function sn(t){return Qe(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var un=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ln=function t(e){var n,i=(e=null==e?oe:ln.defaults(oe.Object(),e,ln.pick(oe,Yt))).Array,rt=e.Date,_t=e.Error,xt=e.Function,Ct=e.Math,At=e.Object,Mt=e.RegExp,Vt=e.String,St=e.TypeError,zt=i.prototype,Et=xt.prototype,kt=At.prototype,jt=e["__core-js_shared__"],Pt=Et.toString,Ot=kt.hasOwnProperty,Lt=0,Tt=(n=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Rt=kt.toString,Bt=Pt.call(At),Ft=oe._,Dt=Mt("^"+Pt.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=ue?e.Buffer:r,It=e.Symbol,Nt=e.Uint8Array,Ut=Wt?Wt.allocUnsafe:r,Gt=tn(At.getPrototypeOf,At),$t=At.create,te=kt.propertyIsEnumerable,ie=zt.splice,re=It?It.isConcatSpreadable:r,se=It?It.iterator:r,ae=It?It.toStringTag:r,le=function(){try{var t=lo(At,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,ke=rt&&rt.now!==oe.Date.now&&rt.now,Fe=e.setTimeout!==oe.setTimeout&&e.setTimeout,cn=Ct.ceil,hn=Ct.floor,fn=At.getOwnPropertySymbols,pn=Wt?Wt.isBuffer:r,dn=e.isFinite,vn=zt.join,gn=tn(At.keys,At),mn=Ct.max,bn=Ct.min,yn=rt.now,wn=e.parseInt,_n=Ct.random,xn=zt.reverse,Cn=lo(e,"DataView"),An=lo(e,"Map"),Mn=lo(e,"Promise"),Vn=lo(e,"Set"),Sn=lo(e,"WeakMap"),zn=lo(At,"create"),En=Sn&&new Sn,kn={},jn=Do(Cn),Pn=Do(An),On=Do(Mn),Ln=Do(Vn),Tn=Do(Sn),Rn=It?It.prototype:r,Bn=Rn?Rn.valueOf:r,Fn=Rn?Rn.toString:r;function Dn(t){if(na(t)&&!Zs(t)&&!(t instanceof Un)){if(t instanceof Nn)return t;if(Ot.call(t,"__wrapped__"))return Wo(t)}return new Nn(t)}var Wn=function(){function t(){}return function(e){if(!ea(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function In(){}function Nn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Un(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function $n(t){var e=this.__data__=new Zn(t);this.size=e.size}function Xn(t,e){var n=Zs(t),i=!n&&Hs(t),r=!n&&!i&&Xs(t),o=!n&&!i&&!r&&ca(t),s=n||i||r||o,a=s?Ie(t.length,Vt):[],u=a.length;for(var l in t)!e&&!Ot.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||mo(l,u))||a.push(l);return a}function Yn(t){var e=t.length;return e?t[Gi(0,e-1)]:r}function Kn(t,e){return Lo(Sr(t),si(e,0,t.length))}function Qn(t){return Lo(Sr(t))}function Jn(t,e,n){(n!==r&&!Is(t[e],n)||n===r&&!(e in t))&&ri(t,e,n)}function ti(t,e,n){var i=t[e];Ot.call(t,e)&&Is(i,n)&&(n!==r||e in t)||ri(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(Is(t[n][0],e))return n;return-1}function ni(t,e,n,i){return hi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ii(t,e){return t&&zr(e,Pa(e),t)}function ri(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var n=-1,o=e.length,s=i(o),a=null==t;++n<o;)s[n]=a?r:Sa(t,e[n]);return s}function si(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ai(t,e,n,i,o,s){var a,u=1&e,l=2&e,c=4&e;if(n&&(a=o?n(t,i,o,s):n(t)),a!==r)return a;if(!ea(t))return t;var h=Zs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Sr(t,a)}else{var f=fo(t),p=f==w||f==_;if(Xs(t))return _r(t,u);if(f==A||f==v||p&&!o){if(a=l||p?{}:vo(t),!u)return l?function(t,e){return zr(t,ho(t),e)}(t,function(t,e){return t&&zr(e,Oa(e),t)}(a,t)):function(t,e){return zr(t,co(t),e)}(t,ii(a,t))}else{if(!Jt[f])return o?t:{};a=function(t,e,n){var i,r=t.constructor;switch(e){case j:return xr(t);case m:case b:return new r(+t);case P:return function(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case L:case T:case R:case B:case F:case D:case W:case I:return Cr(t,n);case x:return new r;case C:case z:return new r(t);case V:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new r;case E:return i=t,Bn?At(Bn.call(i)):{}}}(t,f,u)}}s||(s=new $n);var d=s.get(t);if(d)return d;s.set(t,a),aa(t)?t.forEach((function(i){a.add(ai(i,e,n,i,t,s))})):ia(t)&&t.forEach((function(i,r){a.set(r,ai(i,e,n,r,t,s))}));var g=h?r:(c?l?no:eo:l?Oa:Pa)(t);return ye(g||t,(function(i,r){g&&(i=t[r=i]),ti(a,r,ai(i,e,n,r,t,s))})),a}function ui(t,e,n){var i=n.length;if(null==t)return!i;for(t=At(t);i--;){var o=n[i],s=e[o],a=t[o];if(a===r&&!(o in t)||!s(a))return!1}return!0}function li(t,e,n){if("function"!=typeof t)throw new St(o);return ko((function(){t.apply(r,n)}),e)}function ci(t,e,n,i){var r=-1,o=Ce,s=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=Me(e,Ue(n))),i?(o=Ae,s=!1):e.length>=200&&(o=Ze,s=!1,e=new qn(e));t:for(;++r<a;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,i)||u.push(c)}return u}Dn.templateSettings={escape:X,evaluate:Y,interpolate:K,variable:"",imports:{_:Dn}},Dn.prototype=In.prototype,Dn.prototype.constructor=Dn,Nn.prototype=Wn(In.prototype),Nn.prototype.constructor=Nn,Un.prototype=Wn(In.prototype),Un.prototype.constructor=Un,Hn.prototype.clear=function(){this.__data__=zn?zn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(zn){var n=e[t];return n===s?r:n}return Ot.call(e,t)?e[t]:r},Hn.prototype.has=function(t){var e=this.__data__;return zn?e[t]!==r:Ot.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zn&&e===r?s:e,this},Zn.prototype.clear=function(){this.__data__=[],this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Zn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?r:e[n][1]},Zn.prototype.has=function(t){return ei(this.__data__,t)>-1},Zn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(An||Zn),string:new Hn}},Gn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return ao(this,t).get(t)},Gn.prototype.has=function(t){return ao(this,t).has(t)},Gn.prototype.set=function(t,e){var n=ao(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,s),this},qn.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.clear=function(){this.__data__=new Zn,this.size=0},$n.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$n.prototype.get=function(t){return this.__data__.get(t)},$n.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Zn){var i=n.__data__;if(!An||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(i)}return n.set(t,e),this.size=n.size,this};var hi=jr(yi),fi=jr(wi,!0);function pi(t,e){var n=!0;return hi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function di(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(u===r?a==a&&!la(a):n(a,u)))var u=a,l=s}return l}function vi(t,e){var n=[];return hi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function gi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=go),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gi(a,e-1,n,i,r):Ve(r,a):i||(r[r.length]=a)}return r}var mi=Pr(),bi=Pr(!0);function yi(t,e){return t&&mi(t,e,Pa)}function wi(t,e){return t&&bi(t,e,Pa)}function _i(t,e){return xe(e,(function(e){return Qs(t[e])}))}function xi(t,e){for(var n=0,i=(e=mr(e,t)).length;null!=t&&n<i;)t=t[Fo(e[n++])];return n&&n==i?t:r}function Ci(t,e,n){var i=e(t);return Zs(t)?i:Ve(i,n(t))}function Ai(t){return null==t?t===r?"[object Undefined]":"[object Null]":ae&&ae in At(t)?function(t){var e=Ot.call(t,ae),n=t[ae];try{t[ae]=r;var i=!0}catch(t){}var o=Rt.call(t);return i&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Rt.call(t)}(t)}function Mi(t,e){return t>e}function Vi(t,e){return null!=t&&Ot.call(t,e)}function Si(t,e){return null!=t&&e in At(t)}function zi(t,e,n){for(var o=n?Ae:Ce,s=t[0].length,a=t.length,u=a,l=i(a),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Me(f,Ue(e))),c=bn(f.length,c),l[u]=!n&&(e||s>=120&&f.length>=120)?new qn(u&&f):r}f=t[0];var p=-1,d=l[0];t:for(;++p<s&&h.length<c;){var v=f[p],g=e?e(v):v;if(v=n||0!==v?v:0,!(d?Ze(d,g):o(h,g,n))){for(u=a;--u;){var m=l[u];if(!(m?Ze(m,g):o(t[u],g,n)))continue t}d&&d.push(g),h.push(v)}}return h}function Ei(t,e,n){var i=null==(t=Vo(t,e=mr(e,t)))?t:t[Fo(Ko(e))];return null==i?r:me(i,t,n)}function ki(t){return na(t)&&Ai(t)==v}function ji(t,e,n,i,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,i,o,s){var a=Zs(t),u=Zs(e),l=a?g:fo(t),c=u?g:fo(e),h=(l=l==v?A:l)==A,f=(c=c==v?A:c)==A,p=l==c;if(p&&Xs(t)){if(!Xs(e))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new $n),a||ca(t)?Jr(t,e,n,i,o,s):function(t,e,n,i,r,o,s){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case j:return!(t.byteLength!=e.byteLength||!o(new Nt(t),new Nt(e)));case m:case b:case C:return Is(+t,+e);case y:return t.name==e.name&&t.message==e.message;case V:case z:return t==e+"";case x:var a=Je;case S:var u=1&i;if(a||(a=nn),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;i|=2,s.set(t,e);var c=Jr(a(t),a(e),i,r,o,s);return s.delete(t),c;case E:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,l,n,i,o,s);if(!(1&n)){var d=h&&Ot.call(t,"__wrapped__"),w=f&&Ot.call(e,"__wrapped__");if(d||w){var _=d?t.value():t,M=w?e.value():e;return s||(s=new $n),o(_,M,n,i,s)}}return!!p&&(s||(s=new $n),function(t,e,n,i,o,s){var a=1&n,u=eo(t),l=u.length;if(l!=eo(e).length&&!a)return!1;for(var c=l;c--;){var h=u[c];if(!(a?h in e:Ot.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var d=!0;s.set(t,e),s.set(e,t);for(var v=a;++c<l;){var g=t[h=u[c]],m=e[h];if(i)var b=a?i(m,g,h,e,t,s):i(g,m,h,t,e,s);if(!(b===r?g===m||o(g,m,n,i,s):b)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,i,o,s))}(t,e,n,i,ji,o))}function Pi(t,e,n,i){var o=n.length,s=o,a=!i;if(null==t)return!s;for(t=At(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var l=(u=n[o])[0],c=t[l],h=u[1];if(a&&u[2]){if(c===r&&!(l in t))return!1}else{var f=new $n;if(i)var p=i(c,h,l,t,e,f);if(!(p===r?ji(h,c,3,i,f):p))return!1}}return!0}function Oi(t){return!(!ea(t)||(e=t,Tt&&Tt in e))&&(Qs(t)?Dt:vt).test(Do(t));var e}function Li(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Zs(t)?Di(t[0],t[1]):Fi(t):pu(t)}function Ti(t){if(!xo(t))return gn(t);var e=[];for(var n in At(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ri(t,e){return t<e}function Bi(t,e){var n=-1,r=qs(t)?i(t.length):[];return hi(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Fi(t){var e=uo(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Pi(n,t,e)}}function Di(t,e){return yo(t)&&Co(e)?Ao(Fo(t),e):function(n){var i=Sa(n,t);return i===r&&i===e?za(n,t):ji(e,i,3)}}function Wi(t,e,n,i,o){t!==e&&mi(e,(function(s,a){if(o||(o=new $n),ea(s))!function(t,e,n,i,o,s,a){var u=zo(t,n),l=zo(e,n),c=a.get(l);if(c)Jn(t,n,c);else{var h=s?s(u,l,n+"",t,e,a):r,f=h===r;if(f){var p=Zs(l),d=!p&&Xs(l),v=!p&&!d&&ca(l);h=l,p||d||v?Zs(u)?h=u:$s(u)?h=Sr(u):d?(f=!1,h=_r(l,!0)):v?(f=!1,h=Cr(l,!0)):h=[]:oa(l)||Hs(l)?(h=u,Hs(u)?h=ba(u):ea(u)&&!Qs(u)||(h=vo(l))):f=!1}f&&(a.set(l,h),o(h,l,i,s,a),a.delete(l)),Jn(t,n,h)}}(t,e,a,n,Wi,i,o);else{var u=i?i(zo(t,a),s,a+"",t,e,o):r;u===r&&(u=s),Jn(t,a,u)}}),Oa)}function Ii(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:r}function Ni(t,e,n){e=e.length?Me(e,(function(t){return Zs(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[ru];var i=-1;e=Me(e,Ue(so()));var r=Bi(t,(function(t,n,r){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=Ar(r[i],o[i]);if(u)return i>=a?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(r)}function Ui(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=xi(t,s);n(a,s)&&Ki(o,mr(s,t),a)}return o}function Hi(t,e,n,i){var r=i?Le:Oe,o=-1,s=e.length,a=t;for(t===e&&(e=Sr(e)),n&&(a=Me(t,Ue(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=r(a,c,u,i))>-1;)a!==t&&ie.call(a,u,1),ie.call(t,u,1);return t}function Zi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;mo(r)?ie.call(t,r,1):lr(t,r)}}return t}function Gi(t,e){return t+hn(_n()*(e-t+1))}function qi(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function $i(t,e){return jo(Mo(t,e,ru),t+"")}function Xi(t){return Yn(Ia(t))}function Yi(t,e){var n=Ia(t);return Lo(n,si(e,0,n.length))}function Ki(t,e,n,i){if(!ea(t))return t;for(var o=-1,s=(e=mr(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var l=Fo(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=a){var h=u[l];(c=i?i(h,l,u):r)===r&&(c=ea(h)?h:mo(e[o+1])?[]:{})}ti(u,l,c),u=u[l]}return t}var Qi=En?function(t,e){return En.set(t,e),t}:ru,Ji=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ru;function tr(t){return Lo(Ia(t))}function er(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=i(o);++r<o;)s[r]=t[r+e];return s}function nr(t,e){var n;return hi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ir(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!la(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return rr(t,e,ru,n)}function rr(t,e,n,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,l=la(e),c=e===r;o<s;){var h=hn((o+s)/2),f=n(t[h]),p=f!==r,d=null===f,v=f==f,g=la(f);if(a)var m=i||v;else m=c?v&&(i||p):u?v&&p&&(i||!d):l?v&&p&&!d&&(i||!g):!d&&!g&&(i?f<=e:f<e);m?o=h+1:s=h}return bn(s,4294967294)}function or(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!Is(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function sr(t){return"number"==typeof t?t:la(t)?f:+t}function ar(t){if("string"==typeof t)return t;if(Zs(t))return Me(t,ar)+"";if(la(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ur(t,e,n){var i=-1,r=Ce,o=t.length,s=!0,a=[],u=a;if(n)s=!1,r=Ae;else if(o>=200){var l=e?null:qr(t);if(l)return nn(l);s=!1,r=Ze,u=new qn}else u=e?[]:a;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(c)}else r(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function lr(t,e){return null==(t=Vo(t,e=mr(e,t)))||delete t[Fo(Ko(e))]}function cr(t,e,n,i){return Ki(t,e,n(xi(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?er(t,i?0:o,i?o+1:r):er(t,i?o+1:0,i?r:o)}function fr(t,e){var n=t;return n instanceof Un&&(n=n.value()),Se(e,(function(t,e){return e.func.apply(e.thisArg,Ve([t],e.args))}),n)}function pr(t,e,n){var r=t.length;if(r<2)return r?ur(t[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=t[o],u=-1;++u<r;)u!=o&&(s[o]=ci(s[o]||a,t[u],e,n));return ur(gi(s,1),e,n)}function dr(t,e,n){for(var i=-1,o=t.length,s=e.length,a={};++i<o;){var u=i<s?e[i]:r;n(a,t[i],u)}return a}function vr(t){return $s(t)?t:[]}function gr(t){return"function"==typeof t?t:ru}function mr(t,e){return Zs(t)?t:yo(t,e)?[t]:Bo(ya(t))}var br=$i;function yr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:er(t,e,n)}var wr=ce||function(t){return oe.clearTimeout(t)};function _r(t,e){if(e)return t.slice();var n=t.length,i=Ut?Ut(n):new t.constructor(n);return t.copy(i),i}function xr(t){var e=new t.constructor(t.byteLength);return new Nt(e).set(new Nt(t)),e}function Cr(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ar(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,s=la(t),a=e!==r,u=null===e,l=e==e,c=la(e);if(!u&&!c&&!s&&t>e||s&&a&&l&&!u&&!c||i&&a&&l||!n&&l||!o)return 1;if(!i&&!s&&!c&&t<e||c&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!l)return-1}return 0}function Mr(t,e,n,r){for(var o=-1,s=t.length,a=n.length,u=-1,l=e.length,c=mn(s-a,0),h=i(l+c),f=!r;++u<l;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function Vr(t,e,n,r){for(var o=-1,s=t.length,a=-1,u=n.length,l=-1,c=e.length,h=mn(s-u,0),f=i(h+c),p=!r;++o<h;)f[o]=t[o];for(var d=o;++l<c;)f[d+l]=e[l];for(;++a<u;)(p||o<s)&&(f[d+n[a]]=t[o++]);return f}function Sr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function zr(t,e,n,i){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],l=i?i(n[u],t[u],u,n,t):r;l===r&&(l=t[u]),o?ri(n,u,l):ti(n,u,l)}return n}function Er(t,e){return function(n,i){var r=Zs(n)?be:ni,o=e?e():{};return r(n,t,so(i,2),o)}}function kr(t){return $i((function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(o--,s):r,a&&bo(n[0],n[1],a)&&(s=o<3?r:s,o=1),e=At(e);++i<o;){var u=n[i];u&&t(e,u,i,s)}return e}))}function jr(t,e){return function(n,i){if(null==n)return n;if(!qs(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=At(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Pr(t){return function(e,n,i){for(var r=-1,o=At(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function Or(t){return function(e){var n=Qe(e=ya(e))?sn(e):r,i=n?n[0]:e.charAt(0),o=n?yr(n,1).join(""):e.slice(1);return i[t]()+o}}function Lr(t){return function(e){return Se(Qa(Ha(e).replace(Ht,"")),t,"")}}function Tr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Wn(t.prototype),i=t.apply(n,e);return ea(i)?i:n}}function Rr(t){return function(e,n,i){var o=At(e);if(!qs(e)){var s=so(n,3);e=Pa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,i);return a>-1?o[s?e[a]:a]:r}}function Br(t){return to((function(e){var n=e.length,i=n,s=Nn.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new St(o);if(s&&!u&&"wrapper"==ro(a))var u=new Nn([],!0)}for(i=u?i:n;++i<n;){var l=ro(a=e[i]),c="wrapper"==l?io(a):r;u=c&&wo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==a.length&&wo(a)?u[l]():u.thru(a)}return function(){var t=arguments,i=t[0];if(u&&1==t.length&&Zs(i))return u.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Fr(t,e,n,o,s,a,u,c,h,f){var p=e&l,d=1&e,v=2&e,g=24&e,m=512&e,b=v?r:Tr(t);return function r(){for(var l=arguments.length,y=i(l),w=l;w--;)y[w]=arguments[w];if(g)var _=oo(r),x=$e(y,_);if(o&&(y=Mr(y,o,s,g)),a&&(y=Vr(y,a,u,g)),l-=x,g&&l<f){var C=en(y,_);return Zr(t,e,Fr,r.placeholder,n,y,C,c,h,f-l)}var A=d?n:this,M=v?A[t]:t;return l=y.length,c?y=So(y,c):m&&l>1&&y.reverse(),p&&h<l&&(y.length=h),this&&this!==oe&&this instanceof r&&(M=b||Tr(M)),M.apply(A,y)}}function Dr(t,e){return function(n,i){return function(t,e,n,i){return yi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Wr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=ar(n),i=ar(i)):(n=sr(n),i=sr(i)),o=t(n,i)}return o}}function Ir(t){return to((function(e){return e=Me(e,Ue(so())),$i((function(n){var i=this;return t(e,(function(t){return me(t,i,n)}))}))}))}function Nr(t,e){var n=(e=e===r?" ":ar(e)).length;if(n<2)return n?qi(e,t):e;var i=qi(e,cn(t/on(e)));return Qe(e)?yr(sn(i),0,t).join(""):i.slice(0,t)}function Ur(t){return function(e,n,o){return o&&"number"!=typeof o&&bo(e,n,o)&&(n=o=r),e=da(e),n===r?(n=e,e=0):n=da(n),function(t,e,n,r){for(var o=-1,s=mn(cn((e-t)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=t,t+=n;return a}(e,n,o=o===r?e<n?1:-1:da(o),t)}}function Hr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Zr(t,e,n,i,o,s,a,l,c,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?s:r,f?a:r,f?r:s,f?r:a,l,c,h],d=n.apply(r,p);return wo(t)&&Eo(d,p),d.placeholder=i,Po(d,t,e)}function Gr(t){var e=Ct[t];return function(t,n){if(t=ma(t),(n=null==n?0:bn(va(n),292))&&dn(t)){var i=(ya(t)+"e").split("e");return+((i=(ya(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var qr=Vn&&1/nn(new Vn([,-0]))[1]==c?function(t){return new Vn(t)}:lu;function $r(t){return function(e){var n=fo(e);return n==x?Je(e):n==S?rn(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xr(t,e,n,s,c,h,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new St(o);var v=s?s.length:0;if(v||(e&=-97,s=c=r),f=f===r?f:mn(va(f),0),p=p===r?p:va(p),v-=c?c.length:0,64&e){var g=s,m=c;s=c=r}var b=d?r:io(t),y=[t,e,n,s,c,g,m,h,f,p];if(b&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,s=i==l&&8==n||i==l&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Mr(c,u,e[4]):u,t[4]=c?en(t[3],a):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Vr(c,u,e[6]):u,t[6]=c?en(t[5],a):e[6]),(u=e[7])&&(t[7]=u),i&l&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(y,b),t=y[0],e=y[1],n=y[2],s=y[3],c=y[4],!(p=y[9]=y[9]===r?d?0:t.length:mn(y[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Tr(t);return function s(){for(var a=arguments.length,u=i(a),l=a,c=oo(s);l--;)u[l]=arguments[l];var h=a<3&&u[0]!==c&&u[a-1]!==c?[]:en(u,c);return(a-=h.length)<n?Zr(t,e,Fr,s.placeholder,r,u,h,r,r,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,u)}}(t,e,p):e!=u&&33!=e||c.length?Fr.apply(r,y):function(t,e,n,r){var o=1&e,s=Tr(t);return function e(){for(var a=-1,u=arguments.length,l=-1,c=r.length,h=i(c+u),f=this&&this!==oe&&this instanceof e?s:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++a];return me(f,o?n:this,h)}}(t,e,n,s);else var w=function(t,e,n){var i=1&e,r=Tr(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Po((b?Qi:Eo)(w,y),t,e)}function Yr(t,e,n,i){return t===r||Is(t,kt[n])&&!Ot.call(i,n)?e:t}function Kr(t,e,n,i,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Wi(t,e,r,Kr,s),s.delete(e)),t}function Qr(t){return oa(t)?r:t}function Jr(t,e,n,i,o,s){var a=1&n,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var f=-1,p=!0,d=2&n?new qn:r;for(s.set(t,e),s.set(e,t);++f<u;){var v=t[f],g=e[f];if(i)var m=a?i(g,v,f,e,t,s):i(v,g,f,t,e,s);if(m!==r){if(m)continue;p=!1;break}if(d){if(!Ee(e,(function(t,e){if(!Ze(d,e)&&(v===t||o(v,t,n,i,s)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!o(v,g,n,i,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function to(t){return jo(Mo(t,r,Go),t+"")}function eo(t){return Ci(t,Pa,co)}function no(t){return Ci(t,Oa,ho)}var io=En?function(t){return En.get(t)}:lu;function ro(t){for(var e=t.name+"",n=kn[e],i=Ot.call(kn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Ot.call(Dn,"placeholder")?Dn:t).placeholder}function so(){var t=Dn.iteratee||ou;return t=t===ou?Li:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function uo(t){for(var e=Pa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Co(r)]}return e}function lo(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Oi(n)?n:r}var co=fn?function(t){return null==t?[]:(t=At(t),xe(fn(t),(function(e){return te.call(t,e)})))}:gu,ho=fn?function(t){for(var e=[];t;)Ve(e,co(t)),t=Gt(t);return e}:gu,fo=Ai;function po(t,e,n){for(var i=-1,r=(e=mr(e,t)).length,o=!1;++i<r;){var s=Fo(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ta(r)&&mo(s,r)&&(Zs(t)||Hs(t))}function vo(t){return"function"!=typeof t.constructor||xo(t)?{}:Wn(Gt(t))}function go(t){return Zs(t)||Hs(t)||!!(re&&t&&t[re])}function mo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function bo(t,e,n){if(!ea(n))return!1;var i=typeof e;return!!("number"==i?qs(n)&&mo(e,n.length):"string"==i&&e in n)&&Is(n[e],t)}function yo(t,e){if(Zs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!la(t))||J.test(t)||!Q.test(t)||null!=e&&t in At(e)}function wo(t){var e=ro(t),n=Dn[e];if("function"!=typeof n||!(e in Un.prototype))return!1;if(t===n)return!0;var i=io(n);return!!i&&t===i[0]}(Cn&&fo(new Cn(new ArrayBuffer(1)))!=P||An&&fo(new An)!=x||Mn&&fo(Mn.resolve())!=M||Vn&&fo(new Vn)!=S||Sn&&fo(new Sn)!=k)&&(fo=function(t){var e=Ai(t),n=e==A?t.constructor:r,i=n?Do(n):"";if(i)switch(i){case jn:return P;case Pn:return x;case On:return M;case Ln:return S;case Tn:return k}return e});var _o=jt?Qs:mu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function Co(t){return t==t&&!ea(t)}function Ao(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in At(n))}}function Mo(t,e,n){return e=mn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=mn(r.length-e,0),a=i(s);++o<s;)a[o]=r[e+o];o=-1;for(var u=i(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),me(t,this,u)}}function Vo(t,e){return e.length<2?t:xi(t,er(e,0,-1))}function So(t,e){for(var n=t.length,i=bn(e.length,n),o=Sr(t);i--;){var s=e[i];t[i]=mo(s,n)?o[s]:r}return t}function zo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Eo=Oo(Qi),ko=Fe||function(t,e){return oe.setTimeout(t,e)},jo=Oo(Ji);function Po(t,e,n){var i=e+"";return jo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return ye(d,(function(n){var i="_."+n[0];e&n[1]&&!Ce(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(i),n)))}function Oo(t){var e=0,n=0;return function(){var i=yn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Lo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var s=Gi(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var To,Ro,Bo=(To=Ts((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Ro.size&&Ro.clear(),t})),Ro=To.cache,To);function Fo(t){if("string"==typeof t||la(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Do(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wo(t){if(t instanceof Un)return t.clone();var e=new Nn(t.__wrapped__,t.__chain__);return e.__actions__=Sr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Io=$i((function(t,e){return $s(t)?ci(t,gi(e,1,$s,!0)):[]})),No=$i((function(t,e){var n=Ko(e);return $s(n)&&(n=r),$s(t)?ci(t,gi(e,1,$s,!0),so(n,2)):[]})),Uo=$i((function(t,e){var n=Ko(e);return $s(n)&&(n=r),$s(t)?ci(t,gi(e,1,$s,!0),r,n):[]}));function Ho(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:va(n);return r<0&&(r=mn(i+r,0)),Pe(t,so(e,3),r)}function Zo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=va(n),o=n<0?mn(i+o,0):bn(o,i-1)),Pe(t,so(e,3),o,!0)}function Go(t){return null!=t&&t.length?gi(t,1):[]}function qo(t){return t&&t.length?t[0]:r}var $o=$i((function(t){var e=Me(t,vr);return e.length&&e[0]===t[0]?zi(e):[]})),Xo=$i((function(t){var e=Ko(t),n=Me(t,vr);return e===Ko(n)?e=r:n.pop(),n.length&&n[0]===t[0]?zi(n,so(e,2)):[]})),Yo=$i((function(t){var e=Ko(t),n=Me(t,vr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?zi(n,r,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Qo=$i(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Hi(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return Zi(t,Me(e,(function(t){return mo(t,n)?+t:t})).sort(Ar)),i}));function es(t){return null==t?t:xn.call(t)}var ns=$i((function(t){return ur(gi(t,1,$s,!0))})),is=$i((function(t){var e=Ko(t);return $s(e)&&(e=r),ur(gi(t,1,$s,!0),so(e,2))})),rs=$i((function(t){var e=Ko(t);return e="function"==typeof e?e:r,ur(gi(t,1,$s,!0),r,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if($s(t))return e=mn(t.length,e),!0})),Ie(e,(function(e){return Me(t,Be(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Me(n,(function(t){return me(e,r,t)}))}var as=$i((function(t,e){return $s(t)?ci(t,e):[]})),us=$i((function(t){return pr(xe(t,$s))})),ls=$i((function(t){var e=Ko(t);return $s(e)&&(e=r),pr(xe(t,$s),so(e,2))})),cs=$i((function(t){var e=Ko(t);return e="function"==typeof e?e:r,pr(xe(t,$s),r,e)})),hs=$i(os),fs=$i((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,ss(t,n)}));function ps(t){var e=Dn(t);return e.__chain__=!0,e}function ds(t,e){return e(t)}var vs=to((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Un&&mo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ds,args:[o],thisArg:r}),new Nn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),gs=Er((function(t,e,n){Ot.call(t,n)?++t[n]:ri(t,n,1)})),ms=Rr(Ho),bs=Rr(Zo);function ys(t,e){return(Zs(t)?ye:hi)(t,so(e,3))}function ws(t,e){return(Zs(t)?we:fi)(t,so(e,3))}var _s=Er((function(t,e,n){Ot.call(t,n)?t[n].push(e):ri(t,n,[e])})),xs=$i((function(t,e,n){var r=-1,o="function"==typeof e,s=qs(t)?i(t.length):[];return hi(t,(function(t){s[++r]=o?me(e,t,n):Ei(t,e,n)})),s})),Cs=Er((function(t,e,n){ri(t,n,e)}));function As(t,e){return(Zs(t)?Me:Bi)(t,so(e,3))}var Ms=Er((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Vs=$i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bo(t,e[0],e[1])?e=[]:n>2&&bo(e[0],e[1],e[2])&&(e=[e[0]]),Ni(t,gi(e,1),[])})),Ss=ke||function(){return oe.Date.now()};function zs(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xr(t,l,r,r,r,r,e)}function Es(t,e){var n;if("function"!=typeof e)throw new St(o);return t=va(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ks=$i((function(t,e,n){var i=1;if(n.length){var r=en(n,oo(ks));i|=u}return Xr(t,i,e,n,r)})),js=$i((function(t,e,n){var i=3;if(n.length){var r=en(n,oo(js));i|=u}return Xr(e,i,t,n,r)}));function Ps(t,e,n){var i,s,a,u,l,c,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new St(o);function v(e){var n=i,o=s;return i=s=r,h=e,u=t.apply(o,n)}function g(t){return h=t,l=ko(b,e),f?v(t):u}function m(t){var n=t-c;return c===r||n>=e||n<0||p&&t-h>=a}function b(){var t=Ss();if(m(t))return y(t);l=ko(b,function(t){var n=e-(t-c);return p?bn(n,a-(t-h)):n}(t))}function y(t){return l=r,d&&i?v(t):(i=s=r,u)}function w(){var t=Ss(),n=m(t);if(i=arguments,s=this,c=t,n){if(l===r)return g(c);if(p)return wr(l),l=ko(b,e),v(c)}return l===r&&(l=ko(b,e)),u}return e=ma(e)||0,ea(n)&&(f=!!n.leading,a=(p="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),w.cancel=function(){l!==r&&wr(l),h=0,i=c=s=l=r},w.flush=function(){return l===r?u:y(Ss())},w}var Os=$i((function(t,e){return li(t,1,e)})),Ls=$i((function(t,e,n){return li(t,ma(e)||0,n)}));function Ts(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ts.Cache||Gn),n}function Rs(t){if("function"!=typeof t)throw new St(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ts.Cache=Gn;var Bs=br((function(t,e){var n=(e=1==e.length&&Zs(e[0])?Me(e[0],Ue(so())):Me(gi(e,1),Ue(so()))).length;return $i((function(i){for(var r=-1,o=bn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return me(t,this,i)}))})),Fs=$i((function(t,e){var n=en(e,oo(Fs));return Xr(t,u,r,e,n)})),Ds=$i((function(t,e){var n=en(e,oo(Ds));return Xr(t,64,r,e,n)})),Ws=to((function(t,e){return Xr(t,256,r,r,r,e)}));function Is(t,e){return t===e||t!=t&&e!=e}var Ns=Hr(Mi),Us=Hr((function(t,e){return t>=e})),Hs=ki(function(){return arguments}())?ki:function(t){return na(t)&&Ot.call(t,"callee")&&!te.call(t,"callee")},Zs=i.isArray,Gs=he?Ue(he):function(t){return na(t)&&Ai(t)==j};function qs(t){return null!=t&&ta(t.length)&&!Qs(t)}function $s(t){return na(t)&&qs(t)}var Xs=pn||mu,Ys=fe?Ue(fe):function(t){return na(t)&&Ai(t)==b};function Ks(t){if(!na(t))return!1;var e=Ai(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Qs(t){if(!ea(t))return!1;var e=Ai(t);return e==w||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Js(t){return"number"==typeof t&&t==va(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ia=pe?Ue(pe):function(t){return na(t)&&fo(t)==x};function ra(t){return"number"==typeof t||na(t)&&Ai(t)==C}function oa(t){if(!na(t)||Ai(t)!=A)return!1;var e=Gt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Bt}var sa=de?Ue(de):function(t){return na(t)&&Ai(t)==V},aa=ve?Ue(ve):function(t){return na(t)&&fo(t)==S};function ua(t){return"string"==typeof t||!Zs(t)&&na(t)&&Ai(t)==z}function la(t){return"symbol"==typeof t||na(t)&&Ai(t)==E}var ca=ge?Ue(ge):function(t){return na(t)&&ta(t.length)&&!!Qt[Ai(t)]},ha=Hr(Ri),fa=Hr((function(t,e){return t<=e}));function pa(t){if(!t)return[];if(qs(t))return ua(t)?sn(t):Sr(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==x?Je:e==S?nn:Ia)(t)}function da(t){return t?(t=ma(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function va(t){var e=da(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?si(va(t),0,p):0}function ma(t){if("number"==typeof t)return t;if(la(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ne(t);var n=dt.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function ba(t){return zr(t,Oa(t))}function ya(t){return null==t?"":ar(t)}var wa=kr((function(t,e){if(xo(e)||qs(e))zr(e,Pa(e),t);else for(var n in e)Ot.call(e,n)&&ti(t,n,e[n])})),_a=kr((function(t,e){zr(e,Oa(e),t)})),xa=kr((function(t,e,n,i){zr(e,Oa(e),t,i)})),Ca=kr((function(t,e,n,i){zr(e,Pa(e),t,i)})),Aa=to(oi),Ma=$i((function(t,e){t=At(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&bo(e[0],e[1],o)&&(i=1);++n<i;)for(var s=e[n],a=Oa(s),u=-1,l=a.length;++u<l;){var c=a[u],h=t[c];(h===r||Is(h,kt[c])&&!Ot.call(t,c))&&(t[c]=s[c])}return t})),Va=$i((function(t){return t.push(r,Kr),me(Ta,r,t)}));function Sa(t,e,n){var i=null==t?r:xi(t,e);return i===r?n:i}function za(t,e){return null!=t&&po(t,e,Si)}var Ea=Dr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),t[e]=n}),eu(ru)),ka=Dr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),so),ja=$i(Ei);function Pa(t){return qs(t)?Xn(t):Ti(t)}function Oa(t){return qs(t)?Xn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in At(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var i in t)("constructor"!=i||!e&&Ot.call(t,i))&&n.push(i);return n}(t)}var La=kr((function(t,e,n){Wi(t,e,n)})),Ta=kr((function(t,e,n,i){Wi(t,e,n,i)})),Ra=to((function(t,e){var n={};if(null==t)return n;var i=!1;e=Me(e,(function(e){return e=mr(e,t),i||(i=e.length>1),e})),zr(t,no(t),n),i&&(n=ai(n,7,Qr));for(var r=e.length;r--;)lr(n,e[r]);return n})),Ba=to((function(t,e){return null==t?{}:function(t,e){return Ui(t,e,(function(e,n){return za(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=Me(no(t),(function(t){return[t]}));return e=so(e),Ui(t,n,(function(t,n){return e(t,n[0])}))}var Da=$r(Pa),Wa=$r(Oa);function Ia(t){return null==t?[]:He(t,Pa(t))}var Na=Lr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ua(e):e)}));function Ua(t){return Ka(ya(t).toLowerCase())}function Ha(t){return(t=ya(t))&&t.replace(bt,Xe).replace(Zt,"")}var Za=Lr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ga=Lr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qa=Or("toLowerCase"),$a=Lr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Xa=Lr((function(t,e,n){return t+(n?" ":"")+Ka(e)})),Ya=Lr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ka=Or("toUpperCase");function Qa(t,e,n){return t=ya(t),(e=n?r:e)===r?function(t){return Xt.test(t)}(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Ja=$i((function(t,e){try{return me(t,r,e)}catch(t){return Ks(t)?t:new _t(t)}})),tu=to((function(t,e){return ye(e,(function(e){e=Fo(e),ri(t,e,ks(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Br(),iu=Br(!0);function ru(t){return t}function ou(t){return Li("function"==typeof t?t:ai(t,1))}var su=$i((function(t,e){return function(n){return Ei(n,t,e)}})),au=$i((function(t,e){return function(n){return Ei(t,n,e)}}));function uu(t,e,n){var i=Pa(e),r=_i(e,i);null!=n||ea(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=_i(e,Pa(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Qs(t);return ye(r,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Sr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Ve([this.value()],arguments))})})),t}function lu(){}var cu=Ir(Me),hu=Ir(_e),fu=Ir(Ee);function pu(t){return yo(t)?Be(Fo(t)):function(t){return function(e){return xi(e,t)}}(t)}var du=Ur(),vu=Ur(!0);function gu(){return[]}function mu(){return!1}var bu,yu=Wr((function(t,e){return t+e}),0),wu=Gr("ceil"),_u=Wr((function(t,e){return t/e}),1),xu=Gr("floor"),Cu=Wr((function(t,e){return t*e}),1),Au=Gr("round"),Mu=Wr((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new St(o);return t=va(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=zs,Dn.assign=wa,Dn.assignIn=_a,Dn.assignInWith=xa,Dn.assignWith=Ca,Dn.at=Aa,Dn.before=Es,Dn.bind=ks,Dn.bindAll=tu,Dn.bindKey=js,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Zs(t)?t:[t]},Dn.chain=ps,Dn.chunk=function(t,e,n){e=(n?bo(t,e,n):e===r)?1:mn(va(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=i(cn(o/e));s<o;)u[a++]=er(t,s,s+=e);return u},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ve(Zs(n)?Sr(n):[n],gi(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new St(o);return[n(t[0]),t[1]]})):[],$i((function(n){for(var i=-1;++i<e;){var r=t[i];if(me(r[0],this,n))return me(r[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Pa(t);return function(n){return ui(n,t,e)}}(ai(t,1))},Dn.constant=eu,Dn.countBy=gs,Dn.create=function(t,e){var n=Wn(t);return null==e?n:ii(n,e)},Dn.curry=function t(e,n,i){var o=Xr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Dn.curryRight=function t(e,n,i){var o=Xr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Dn.debounce=Ps,Dn.defaults=Ma,Dn.defaultsDeep=Va,Dn.defer=Os,Dn.delay=Ls,Dn.difference=Io,Dn.differenceBy=No,Dn.differenceWith=Uo,Dn.drop=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=n||e===r?1:va(e))<0?0:e,i):[]},Dn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,0,(e=i-(e=n||e===r?1:va(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?hr(t,so(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?hr(t,so(e,3),!0):[]},Dn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&bo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=va(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:va(i))<0&&(i+=o),i=n>i?0:ga(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Dn.filter=function(t,e){return(Zs(t)?xe:vi)(t,so(e,3))},Dn.flatMap=function(t,e){return gi(As(t,e),1)},Dn.flatMapDeep=function(t,e){return gi(As(t,e),c)},Dn.flatMapDepth=function(t,e,n){return n=n===r?1:va(n),gi(As(t,e),n)},Dn.flatten=Go,Dn.flattenDeep=function(t){return null!=t&&t.length?gi(t,c):[]},Dn.flattenDepth=function(t,e){return null!=t&&t.length?gi(t,e=e===r?1:va(e)):[]},Dn.flip=function(t){return Xr(t,512)},Dn.flow=nu,Dn.flowRight=iu,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Dn.functions=function(t){return null==t?[]:_i(t,Pa(t))},Dn.functionsIn=function(t){return null==t?[]:_i(t,Oa(t))},Dn.groupBy=_s,Dn.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Dn.intersection=$o,Dn.intersectionBy=Xo,Dn.intersectionWith=Yo,Dn.invert=Ea,Dn.invertBy=ka,Dn.invokeMap=xs,Dn.iteratee=ou,Dn.keyBy=Cs,Dn.keys=Pa,Dn.keysIn=Oa,Dn.map=As,Dn.mapKeys=function(t,e){var n={};return e=so(e,3),yi(t,(function(t,i,r){ri(n,e(t,i,r),t)})),n},Dn.mapValues=function(t,e){var n={};return e=so(e,3),yi(t,(function(t,i,r){ri(n,i,e(t,i,r))})),n},Dn.matches=function(t){return Fi(ai(t,1))},Dn.matchesProperty=function(t,e){return Di(t,ai(e,1))},Dn.memoize=Ts,Dn.merge=La,Dn.mergeWith=Ta,Dn.method=su,Dn.methodOf=au,Dn.mixin=uu,Dn.negate=Rs,Dn.nthArg=function(t){return t=va(t),$i((function(e){return Ii(e,t)}))},Dn.omit=Ra,Dn.omitBy=function(t,e){return Fa(t,Rs(so(e)))},Dn.once=function(t){return Es(2,t)},Dn.orderBy=function(t,e,n,i){return null==t?[]:(Zs(e)||(e=null==e?[]:[e]),Zs(n=i?r:n)||(n=null==n?[]:[n]),Ni(t,e,n))},Dn.over=cu,Dn.overArgs=Bs,Dn.overEvery=hu,Dn.overSome=fu,Dn.partial=Fs,Dn.partialRight=Ds,Dn.partition=Ms,Dn.pick=Ba,Dn.pickBy=Fa,Dn.property=pu,Dn.propertyOf=function(t){return function(e){return null==t?r:xi(t,e)}},Dn.pull=Qo,Dn.pullAll=Jo,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hi(t,e,so(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hi(t,e,r,n):t},Dn.pullAt=ts,Dn.range=du,Dn.rangeRight=vu,Dn.rearg=Ws,Dn.reject=function(t,e){return(Zs(t)?xe:vi)(t,Rs(so(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=so(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Zi(t,r),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new St(o);return $i(t,e=e===r?e:va(e))},Dn.reverse=es,Dn.sampleSize=function(t,e,n){return e=(n?bo(t,e,n):e===r)?1:va(e),(Zs(t)?Kn:Yi)(t,e)},Dn.set=function(t,e,n){return null==t?t:Ki(t,e,n)},Dn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ki(t,e,n,i)},Dn.shuffle=function(t){return(Zs(t)?Qn:tr)(t)},Dn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&bo(t,e,n)?(e=0,n=i):(e=null==e?0:va(e),n=n===r?i:va(n)),er(t,e,n)):[]},Dn.sortBy=Vs,Dn.sortedUniq=function(t){return t&&t.length?or(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?or(t,so(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&bo(t,e,n)&&(e=n=r),(n=n===r?p:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ar(e))&&Qe(t)?yr(sn(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new St(o);return e=null==e?0:mn(va(e),0),$i((function(n){var i=n[e],r=yr(n,0,e);return i&&Ve(r,i),me(t,this,r)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?er(t,0,(e=n||e===r?1:va(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=i-(e=n||e===r?1:va(e)))<0?0:e,i):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?hr(t,so(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?hr(t,so(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new St(o);return ea(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ps(t,e,{leading:i,maxWait:e,trailing:r})},Dn.thru=ds,Dn.toArray=pa,Dn.toPairs=Da,Dn.toPairsIn=Wa,Dn.toPath=function(t){return Zs(t)?Me(t,Fo):la(t)?[t]:Sr(Bo(ya(t)))},Dn.toPlainObject=ba,Dn.transform=function(t,e,n){var i=Zs(t),r=i||Xs(t)||ca(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ea(t)&&Qs(o)?Wn(Gt(t)):{}}return(r?ye:yi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Dn.unary=function(t){return zs(t,1)},Dn.union=ns,Dn.unionBy=is,Dn.unionWith=rs,Dn.uniq=function(t){return t&&t.length?ur(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?ur(t,so(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?ur(t,r,e):[]},Dn.unset=function(t,e){return null==t||lr(t,e)},Dn.unzip=os,Dn.unzipWith=ss,Dn.update=function(t,e,n){return null==t?t:cr(t,e,gr(n))},Dn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:cr(t,e,gr(n),i)},Dn.values=Ia,Dn.valuesIn=function(t){return null==t?[]:He(t,Oa(t))},Dn.without=as,Dn.words=Qa,Dn.wrap=function(t,e){return Fs(gr(e),t)},Dn.xor=us,Dn.xorBy=ls,Dn.xorWith=cs,Dn.zip=hs,Dn.zipObject=function(t,e){return dr(t||[],e||[],ti)},Dn.zipObjectDeep=function(t,e){return dr(t||[],e||[],Ki)},Dn.zipWith=fs,Dn.entries=Da,Dn.entriesIn=Wa,Dn.extend=_a,Dn.extendWith=xa,uu(Dn,Dn),Dn.add=yu,Dn.attempt=Ja,Dn.camelCase=Na,Dn.capitalize=Ua,Dn.ceil=wu,Dn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=ma(n))==n?n:0),e!==r&&(e=(e=ma(e))==e?e:0),si(ma(t),e,n)},Dn.clone=function(t){return ai(t,4)},Dn.cloneDeep=function(t){return ai(t,5)},Dn.cloneDeepWith=function(t,e){return ai(t,5,e="function"==typeof e?e:r)},Dn.cloneWith=function(t,e){return ai(t,4,e="function"==typeof e?e:r)},Dn.conformsTo=function(t,e){return null==e||ui(t,e,Pa(e))},Dn.deburr=Ha,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=_u,Dn.endsWith=function(t,e,n){t=ya(t),e=ar(e);var i=t.length,o=n=n===r?i:si(va(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Dn.eq=Is,Dn.escape=function(t){return(t=ya(t))&&$.test(t)?t.replace(G,Ye):t},Dn.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Dn.every=function(t,e,n){var i=Zs(t)?_e:pi;return n&&bo(t,e,n)&&(e=r),i(t,so(e,3))},Dn.find=ms,Dn.findIndex=Ho,Dn.findKey=function(t,e){return je(t,so(e,3),yi)},Dn.findLast=bs,Dn.findLastIndex=Zo,Dn.findLastKey=function(t,e){return je(t,so(e,3),wi)},Dn.floor=xu,Dn.forEach=ys,Dn.forEachRight=ws,Dn.forIn=function(t,e){return null==t?t:mi(t,so(e,3),Oa)},Dn.forInRight=function(t,e){return null==t?t:bi(t,so(e,3),Oa)},Dn.forOwn=function(t,e){return t&&yi(t,so(e,3))},Dn.forOwnRight=function(t,e){return t&&wi(t,so(e,3))},Dn.get=Sa,Dn.gt=Ns,Dn.gte=Us,Dn.has=function(t,e){return null!=t&&po(t,e,Vi)},Dn.hasIn=za,Dn.head=qo,Dn.identity=ru,Dn.includes=function(t,e,n,i){t=qs(t)?t:Ia(t),n=n&&!i?va(n):0;var r=t.length;return n<0&&(n=mn(r+n,0)),ua(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Oe(t,e,n)>-1},Dn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:va(n);return r<0&&(r=mn(i+r,0)),Oe(t,e,r)},Dn.inRange=function(t,e,n){return e=da(e),n===r?(n=e,e=0):n=da(n),function(t,e,n){return t>=bn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Dn.invoke=ja,Dn.isArguments=Hs,Dn.isArray=Zs,Dn.isArrayBuffer=Gs,Dn.isArrayLike=qs,Dn.isArrayLikeObject=$s,Dn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Ai(t)==m},Dn.isBuffer=Xs,Dn.isDate=Ys,Dn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(qs(t)&&(Zs(t)||"string"==typeof t||"function"==typeof t.splice||Xs(t)||ca(t)||Hs(t)))return!t.length;var e=fo(t);if(e==x||e==S)return!t.size;if(xo(t))return!Ti(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return ji(t,e)},Dn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?ji(t,e,r,n):!!i},Dn.isError=Ks,Dn.isFinite=function(t){return"number"==typeof t&&dn(t)},Dn.isFunction=Qs,Dn.isInteger=Js,Dn.isLength=ta,Dn.isMap=ia,Dn.isMatch=function(t,e){return t===e||Pi(t,e,uo(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Pi(t,e,uo(e),n)},Dn.isNaN=function(t){return ra(t)&&t!=+t},Dn.isNative=function(t){if(_o(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Oi(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=ra,Dn.isObject=ea,Dn.isObjectLike=na,Dn.isPlainObject=oa,Dn.isRegExp=sa,Dn.isSafeInteger=function(t){return Js(t)&&t>=-9007199254740991&&t<=h},Dn.isSet=aa,Dn.isString=ua,Dn.isSymbol=la,Dn.isTypedArray=ca,Dn.isUndefined=function(t){return t===r},Dn.isWeakMap=function(t){return na(t)&&fo(t)==k},Dn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Ai(t)},Dn.join=function(t,e){return null==t?"":vn.call(t,e)},Dn.kebabCase=Za,Dn.last=Ko,Dn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=va(n))<0?mn(i+o,0):bn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Pe(t,Te,o,!0)},Dn.lowerCase=Ga,Dn.lowerFirst=qa,Dn.lt=ha,Dn.lte=fa,Dn.max=function(t){return t&&t.length?di(t,ru,Mi):r},Dn.maxBy=function(t,e){return t&&t.length?di(t,so(e,2),Mi):r},Dn.mean=function(t){return Re(t,ru)},Dn.meanBy=function(t,e){return Re(t,so(e,2))},Dn.min=function(t){return t&&t.length?di(t,ru,Ri):r},Dn.minBy=function(t,e){return t&&t.length?di(t,so(e,2),Ri):r},Dn.stubArray=gu,Dn.stubFalse=mu,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=Cu,Dn.nth=function(t,e){return t&&t.length?Ii(t,va(e)):r},Dn.noConflict=function(){return oe._===this&&(oe._=Ft),this},Dn.noop=lu,Dn.now=Ss,Dn.pad=function(t,e,n){t=ya(t);var i=(e=va(e))?on(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Nr(hn(r),n)+t+Nr(cn(r),n)},Dn.padEnd=function(t,e,n){t=ya(t);var i=(e=va(e))?on(t):0;return e&&i<e?t+Nr(e-i,n):t},Dn.padStart=function(t,e,n){t=ya(t);var i=(e=va(e))?on(t):0;return e&&i<e?Nr(e-i,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(ya(t).replace(it,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&bo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=da(t),e===r?(e=t,t=0):e=da(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=_n();return bn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Gi(t,e)},Dn.reduce=function(t,e,n){var i=Zs(t)?Se:De,r=arguments.length<3;return i(t,so(e,4),n,r,hi)},Dn.reduceRight=function(t,e,n){var i=Zs(t)?ze:De,r=arguments.length<3;return i(t,so(e,4),n,r,fi)},Dn.repeat=function(t,e,n){return e=(n?bo(t,e,n):e===r)?1:va(e),qi(ya(t),e)},Dn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var i=-1,o=(e=mr(e,t)).length;for(o||(o=1,t=r);++i<o;){var s=null==t?r:t[Fo(e[i])];s===r&&(i=o,s=n),t=Qs(s)?s.call(t):s}return t},Dn.round=Au,Dn.runInContext=t,Dn.sample=function(t){return(Zs(t)?Yn:Xi)(t)},Dn.size=function(t){if(null==t)return 0;if(qs(t))return ua(t)?on(t):t.length;var e=fo(t);return e==x||e==S?t.size:Ti(t).length},Dn.snakeCase=$a,Dn.some=function(t,e,n){var i=Zs(t)?Ee:nr;return n&&bo(t,e,n)&&(e=r),i(t,so(e,3))},Dn.sortedIndex=function(t,e){return ir(t,e)},Dn.sortedIndexBy=function(t,e,n){return rr(t,e,so(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ir(t,e);if(i<n&&Is(t[i],e))return i}return-1},Dn.sortedLastIndex=function(t,e){return ir(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return rr(t,e,so(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(Is(t[n],e))return n}return-1},Dn.startCase=Xa,Dn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:si(va(n),0,t.length),e=ar(e),t.slice(n,n+e.length)==e},Dn.subtract=Mu,Dn.sum=function(t){return t&&t.length?We(t,ru):0},Dn.sumBy=function(t,e){return t&&t.length?We(t,so(e,2)):0},Dn.template=function(t,e,n){var i=Dn.templateSettings;n&&bo(t,e,n)&&(e=r),t=ya(t),e=xa({},e,i,Yr);var o,s,a=xa({},e.imports,i.imports,Yr),u=Pa(a),l=He(a,u),c=0,h=e.interpolate||yt,f="__p += '",p=Mt((e.escape||yt).source+"|"+h.source+"|"+(h===K?ht:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),d="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";t.replace(p,(function(e,n,i,r,a,u){return i||(i=r),f+=t.slice(c,u).replace(wt,Ke),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var v=Ot.call(e,"variable")&&e.variable;if(v){if(lt.test(v))throw new _t("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(N,""):f).replace(U,"$1").replace(H,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ja((function(){return xt(u,d+"return "+f).apply(r,l)}));if(g.source=f,Ks(g))throw g;return g},Dn.times=function(t,e){if((t=va(t))<1||t>h)return[];var n=p,i=bn(t,p);e=so(e),t-=p;for(var r=Ie(i,e);++n<t;)e(n);return r},Dn.toFinite=da,Dn.toInteger=va,Dn.toLength=ga,Dn.toLower=function(t){return ya(t).toLowerCase()},Dn.toNumber=ma,Dn.toSafeInteger=function(t){return t?si(va(t),-9007199254740991,h):0===t?t:0},Dn.toString=ya,Dn.toUpper=function(t){return ya(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=ya(t))&&(n||e===r))return Ne(t);if(!t||!(e=ar(e)))return t;var i=sn(t),o=sn(e);return yr(i,Ge(i,o),qe(i,o)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.slice(0,an(t)+1);if(!t||!(e=ar(e)))return t;var i=sn(t);return yr(i,0,qe(i,sn(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=ar(e)))return t;var i=sn(t);return yr(i,Ge(i,sn(e))).join("")},Dn.truncate=function(t,e){var n=30,i="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?va(e.length):n,i="omission"in e?ar(e.omission):i}var s=(t=ya(t)).length;if(Qe(t)){var a=sn(t);s=a.length}if(n>=s)return t;var u=n-on(i);if(u<1)return i;var l=a?yr(a,0,u).join(""):t.slice(0,u);if(o===r)return l+i;if(a&&(u+=l.length-u),sa(o)){if(t.slice(u).search(o)){var c,h=l;for(o.global||(o=Mt(o.source,ya(ft.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var f=c.index;l=l.slice(0,f===r?u:f)}}else if(t.indexOf(ar(o),u)!=u){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+i},Dn.unescape=function(t){return(t=ya(t))&&q.test(t)?t.replace(Z,un):t},Dn.uniqueId=function(t){var e=++Lt;return ya(t)+e},Dn.upperCase=Ya,Dn.upperFirst=Ka,Dn.each=ys,Dn.eachRight=ws,Dn.first=qo,uu(Dn,(bu={},yi(Dn,(function(t,e){Ot.call(Dn.prototype,e)||(bu[e]=t)})),bu),{chain:!1}),Dn.VERSION="4.17.21",ye(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),ye(["drop","take"],(function(t,e){Un.prototype[t]=function(n){n=n===r?1:mn(va(n),0);var i=this.__filtered__&&!e?new Un(this):this.clone();return i.__filtered__?i.__takeCount__=bn(n,i.__takeCount__):i.__views__.push({size:bn(n,p),type:t+(i.__dir__<0?"Right":"")}),i},Un.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ye(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Un.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),ye(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Un.prototype[t]=function(){return this[n](1).value()[0]}})),ye(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Un.prototype[t]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(ru)},Un.prototype.find=function(t){return this.filter(t).head()},Un.prototype.findLast=function(t){return this.reverse().find(t)},Un.prototype.invokeMap=$i((function(t,e){return"function"==typeof t?new Un(this):this.map((function(n){return Ei(n,t,e)}))})),Un.prototype.reject=function(t){return this.filter(Rs(so(t)))},Un.prototype.slice=function(t,e){t=va(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Un(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=va(e))<0?n.dropRight(-e):n.take(e-t)),n)},Un.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Un.prototype.toArray=function(){return this.take(p)},yi(Un.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Dn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(Dn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,u=e instanceof Un,l=a[0],c=u||Zs(e),h=function(t){var e=o.apply(Dn,Ve([t],a));return i&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,v=u&&!p;if(!s&&c){e=v?e:new Un(this);var g=t.apply(e,a);return g.__actions__.push({func:ds,args:[h],thisArg:r}),new Nn(g,f)}return d&&v?t.apply(this,a):(g=this.thru(h),d?i?g.value()[0]:g.value():g)})})),ye(["pop","push","shift","sort","splice","unshift"],(function(t){var e=zt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Zs(r)?r:[],t)}return this[n]((function(n){return e.apply(Zs(n)?n:[],t)}))}})),yi(Un.prototype,(function(t,e){var n=Dn[e];if(n){var i=n.name+"";Ot.call(kn,i)||(kn[i]=[]),kn[i].push({name:e,func:n})}})),kn[Fr(r,2).name]=[{name:"wrapper",func:r}],Un.prototype.clone=function(){var t=new Un(this.__wrapped__);return t.__actions__=Sr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Sr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Sr(this.__views__),t},Un.prototype.reverse=function(){if(this.__filtered__){var t=new Un(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Un.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Zs(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=bn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,h=c.length,f=0,p=bn(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return fr(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var v=-1,g=t[l+=e];++v<h;){var m=c[v],b=m.iteratee,y=m.type,w=b(g);if(2==y)g=w;else if(!w){if(1==y)continue t;break t}}d[f++]=g}return d},Dn.prototype.at=vs,Dn.prototype.chain=function(){return ps(this)},Dn.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===r&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof In;){var i=Wo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Un){var e=t;return this.__actions__.length&&(e=new Un(this)),(e=e.reverse()).__actions__.push({func:ds,args:[es],thisArg:r}),new Nn(e,this.__chain__)}return this.thru(es)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,se&&(Dn.prototype[se]=function(){return this}),Dn}();oe._=ln,(i=function(){return ln}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},154:t=>{"use strict";t.exports=function(t){for(var e=t.length,n=t[t.length-1],i=e,r=e-2;r>=0;--r){var o=n,s=t[r];(u=s-((n=o+s)-o))&&(t[--i]=n,n=u)}var a=0;for(r=i;r<e;++r){var u;(u=(s=n)-((n=(o=t[r])+s)-o))&&(t[a++]=u)}return t[a++]=n,t.length=a,t}},437:(t,e,n)=>{"use strict";var i=n(5),r=n(740),o=n(442),s=n(154);function a(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function u(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m[",n,"][",i,"]"].join("")}return e}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],n=0;n<t.length;++n)e.push(["scale(",c(a(t,n)),",",(i=n,1&i?"-":""),t[0][n],")"].join(""));return l(e);var i}function h(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",c(u(t)),")};return robustDeterminant",t].join(""))(r,o,i,s)}var f=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;f.length<6;)f.push(h(f.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],i=0;i<6;++i)e.push("det"+i),n.push("case ",i,":return det",i,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var r=Function.apply(void 0,e);for(t.exports=r.apply(void 0,f.concat([f,h])),i=0;i<f.length;++i)t.exports[i]=f[i]}()},489:(t,e,n)=>{"use strict";var i=n(437);function r(t){for(var e="robustLinearSolve"+t+"d",n=["function ",e,"(A,b){return ["],r=0;r<t;++r){n.push("det([");for(var o=0;o<t;++o){o>0&&n.push(","),n.push("[");for(var s=0;s<t;++s)s>0&&n.push(","),s===r?n.push("+b[",o,"]"):n.push("+A[",o,"][",s,"]");n.push("]")}n.push("]),")}return n.push("det(A)]}return ",e),new Function("det",n.join(""))(t<6?i[t]:i)}var o=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;o.length<6;)o.push(r(o.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;i<6;++i)e.push("s"+i),n.push("case ",i,":return s",i,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);for(t.exports=s.apply(void 0,o.concat([o,r])),i=0;i<6;++i)t.exports[i]=o[i]}()},146:(t,e,n)=>{"use strict";var i=n(5),r=n(740),o=n(442),s=n(972);function a(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function l(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",u(l(a(t,n))),",",(i=n,1&i?"-":""),t[0][n],")"].join(""));return e;var i}function c(t){for(var e=[],n=[],c=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),h=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,l(a(c,f))):n.push.apply(n,l(a(c,f))),h.push("m"+f);var p=u(e),d=u(n),v="orientation"+t+"Exact",g=["function ",v,"(",h.join(),"){var p=",p,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",v].join("");return new Function("sum","prod","scale","sub",g)(r,i,o,s)}var h=c(3),f=c(4),p=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=r-o;if(r>0){if(o<=0)return s;i=r+o}else{if(!(r<0))return s;if(o>=0)return s;i=-(r+o)}var a=33306690738754716e-32*i;return s>=a||s<=-a?s:h(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],a=t[1]-i[1],u=e[1]-i[1],l=n[1]-i[1],c=t[2]-i[2],h=e[2]-i[2],p=n[2]-i[2],d=o*l,v=s*u,g=s*a,m=r*l,b=r*u,y=o*a,w=c*(d-v)+h*(g-m)+p*(b-y),_=7771561172376103e-31*((Math.abs(d)+Math.abs(v))*Math.abs(c)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(b)+Math.abs(y))*Math.abs(p));return w>_||-w>_?w:f(t,e,n,i)}];function d(t){var e=p[t.length];return e||(e=p[t.length]=c(t.length)),e.apply(void 0,t)}!function(){for(;p.length<=5;)p.push(c(p.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[d].concat(p)),i=0;i<=5;++i)t.exports[i]=p[i]}()},442:(t,e,n)=>{"use strict";var i=n(5),r=n(359);t.exports=function(t,e){var n=t.length;if(1===n){var o=i(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*n),a=[.1,.1],u=[.1,.1],l=0;i(t[0],e,a),a[0]&&(s[l++]=a[0]);for(var c=1;c<n;++c){i(t[c],e,u);var h=a[1];r(h,u[0],a),a[0]&&(s[l++]=a[0]);var f=u[1],p=a[1],d=f+p,v=p-(d-f);a[1]=d,v&&(s[l++]=v)}return a[1]&&(s[l++]=a[1]),0===l&&(s[l++]=0),s.length=l,s}},972:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<i&&(d=c(p=-e[l]))),u<n&&f<d||l>=i?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=p,(l+=1)<i&&(d=c(p=-e[l])));for(var v,g,m=r+o,b=m-r,y=o-b,w=y,_=m;u<n&&l<i;)f<d?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=p,(l+=1)<i&&(d=c(p=-e[l]))),(y=(o=w)-(b=(m=r+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(y=(o=w)-(b=(m=(r=h)+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;l<i;)(y=(o=w)-(b=(m=(r=p)+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(l+=1)<i&&(p=-e[l]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},740:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<i&&(d=c(p=e[l]))),u<n&&f<d||l>=i?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=p,(l+=1)<i&&(d=c(p=e[l])));for(var v,g,m=r+o,b=m-r,y=o-b,w=y,_=m;u<n&&l<i;)f<d?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=p,(l+=1)<i&&(d=c(p=e[l]))),(y=(o=w)-(b=(m=r+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(y=(o=w)-(b=(m=(r=h)+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;l<i;)(y=(o=w)-(b=(m=(r=p)+o)-r))&&(s[a++]=y),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(l+=1)<i&&(p=e[l]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},572:(t,e,n)=>{"use strict";n(746),n(102);function i(t,e){var n=t.length,i=t.length-e.length,r=Math.min;if(i)return i;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(a=t[0]+t[1]-e[0]-e[1])||r(t[0],t[1])-r(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var a,u=r(t[0],t[1]),l=r(e[0],e[1]);return(a=r(u,t[2])-r(l,e[2]))||r(u+t[2],o)-r(l+e[2],s);default:var c=t.slice(0);c.sort();var h=e.slice(0);h.sort();for(var f=0;f<n;++f)if(i=c[f]-h[f])return i;return 0}}e.H=i},591:function(t,e,n){(function(){"use strict";var i=this.THREE||n(396);if(!i)throw new Error("MeshLine requires three.js");class r extends i.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new i.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(t){this.setGeometry(t,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(t){this.setPoints(t,this.widthCallback)}}})}}function o(t,e){var n=new i.Matrix4,r=new i.Ray,o=new i.Sphere,s=new i.Vector3,a=this.geometry;if(a.boundingSphere||a.computeBoundingSphere(),o.copy(a.boundingSphere),o.applyMatrix4(this.matrixWorld),!1!==t.ray.intersectSphere(o,s)){n.copy(this.matrixWorld).invert(),r.copy(t.ray).applyMatrix4(n);var u=new i.Vector3,l=new i.Vector3,c=new i.Vector3,h=this instanceof i.LineSegments?2:1,f=a.index,p=a.attributes;if(null!==f)for(var d=f.array,v=p.position.array,g=p.width.array,m=0,b=d.length-1;m<b;m+=h){var y=d[m],w=d[m+1];u.fromArray(v,3*y),l.fromArray(v,3*w);var _=void 0!==g[Math.floor(m/3)]?g[Math.floor(m/3)]:1,x=t.params.Line.threshold+this.material.lineWidth*_/2,C=x*x;if(!(r.distanceSqToSegment(u,l,s,c)>C)){s.applyMatrix4(this.matrixWorld);var A=t.ray.origin.distanceTo(s);A<t.near||A>t.far||(e.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}),m=b)}}}}function s(t,e,n,i,r){var o;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(o=0;o<t.length;o++)n[o+i]=t[o];return n}r.prototype.setMatrixWorld=function(t){this.matrixWorld=t},r.prototype.setGeometry=function(t,e){this._geometry=t,this.setPoints(t.getAttribute("position").array,e)},r.prototype.setPoints=function(t,e){if(t instanceof Float32Array||t instanceof Array){if(this._points=t,this.widthCallback=e,this.positions=[],this.counters=[],t.length&&t[0]instanceof i.Vector3)for(var n=0;n<t.length;n++){var r=t[n],o=n/t.length;this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(o),this.counters.push(o)}else for(n=0;n<t.length;n+=3)o=n/t.length,this.positions.push(t[n],t[n+1],t[n+2]),this.positions.push(t[n],t[n+1],t[n+2]),this.counters.push(o),this.counters.push(o);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")},r.prototype.raycast=o,r.prototype.compareV3=function(t,e){var n=6*t,i=6*e;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},r.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},r.prototype.process=function(){var t,e,n=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],e=this.compareV3(0,n-1)?this.copyV3(n-2):this.copyV3(0),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(var r=0;r<n;r++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(r/(n-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(r/(n-1),0),this.uvs.push(r/(n-1),1),r<n-1){e=this.copyV3(r),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);var o=2*r;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}r>0&&(e=this.copyV3(r),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]))}e=this.compareV3(n-1,0)?this.copyV3(1):this.copyV3(n-1),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new i.BufferAttribute(new Float32Array(this.positions),3),previous:new i.BufferAttribute(new Float32Array(this.previous),3),next:new i.BufferAttribute(new Float32Array(this.next),3),side:new i.BufferAttribute(new Float32Array(this.side),1),width:new i.BufferAttribute(new Float32Array(this.width),1),uv:new i.BufferAttribute(new Float32Array(this.uvs),2),index:new i.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new i.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()},r.prototype.advance=function(t){var e=this._attributes.position.array,n=this._attributes.previous.array,i=this._attributes.next.array,r=e.length;s(e,0,n,0,r),s(e,6,e,0,r-6),e[r-6]=t.x,e[r-5]=t.y,e[r-4]=t.z,e[r-3]=t.x,e[r-2]=t.y,e[r-1]=t.z,s(e,6,i,0,r-6),i[r-6]=t.x,i[r-5]=t.y,i[r-4]=t.z,i[r-3]=t.x,i[r-2]=t.y,i[r-1]=t.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},i.ShaderChunk.meshline_vert=["",i.ShaderChunk.logdepthbuf_pars_vertex,i.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.fog_vertex,"}"].join("\n"),i.ShaderChunk.meshline_frag=["",i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",i.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",i.ShaderChunk.fog_fragment,"}"].join("\n");class a extends i.ShaderMaterial{constructor(t){super({uniforms:Object.assign({},i.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new i.Color(16777215)},opacity:{value:1},resolution:{value:new i.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new i.Vector2(1,1)}}),vertexShader:i.ShaderChunk.meshline_vert,fragmentShader:i.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}}a.prototype.copy=function(t){return i.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},t.exports&&(e=t.exports={MeshLine:r,MeshLineMaterial:a,MeshLineRaycast:o}),e.MeshLine=r,e.MeshLineMaterial=a,e.MeshLineRaycast=o}).call(this)},5:t=>{"use strict";t.exports=function(t,n,i){var r=t*n,o=e*t,s=o-(o-t),a=t-s,u=e*n,l=u-(u-n),c=n-l,h=a*c-(r-s*l-a*l-s*c);return i?(i[0]=h,i[1]=r,i):[h,r]};var e=+(Math.pow(2,27)+1)},359:t=>{"use strict";t.exports=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);return n?(n[0]=s+o,n[1]=i,n):[s+o,i]}},102:t=>{"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var i=n[e];n[e]=t,e=i}return t},n.link=function(t,e){var n=this.find(t),i=this.find(e);if(n!==i){var r=this.ranks,o=this.roots,s=r[n],a=r[i];s<a?o[n]=i:a<s?o[i]=n:(o[i]=n,++r[n])}}},706:t=>{"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,i=t.length,r=t[0],o=t[0],s=1;s<i;++s)if(o=r,e(r=t[s],o)){if(s===n){n++;continue}t[n++]=r}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,i=t[0],r=t[0],o=1;o<n;++o,r=i)if(r=i,(i=t[o])!==r){if(o===e){e++;continue}t[e++]=i}return t.length=e,t}(t))}},301:(t,e,n)=>{"use strict";var i=n(930),r=n(645),o=n(706);function s(t,e){return t-e}t.exports=function(t){var e=t.length;if(0===e)return{cells:[],positions:[]};var n=t[0].length;if(n<1)return{cells:[],positions:[]};if(1===n)return function(t){if(1===t.length)return{cells:[[-1]],positions:[]};var e=t.map((function(t,e){return[t[0],e]}));e.sort((function(t,e){return t-e}));for(var n=new Array(t.length),i=0;i<n.length;++i)n[i]=[-1,-1];for(var r=[],o=1;o<e.length;++o){var s=e[o-1],a=e[o],u=.5*(s[0]+a[0]),l=r.length;r.push([u]),n[s[1]][1]=l,n[a[1]][0]=l}return n[e[0][1]][1]=0,n[e[e.length-1][1]][0]=r.length-1,{cells:n,positions:r}}(t);for(var a=i(t,!0),u=new Array(e),l=0;l<e;++l)u[l]=[];var c,h=a.length,f=new Array(n+1),p=new Array(h),d=[];for(l=0;l<h;++l){for(var v=a[l],g=!1,m=0;m<=n;++m){var b=v[m];b<0?(p[l]=-1,g=!0):(u[b].push(l),f[m]=t[b])}g||(p[l]=d.length,d.push(r(f)))}if(2===n)for(c=new Array(e),l=0;l<e;++l){var y=u[l],w=[p[y[0]]],_=a[y[0]][(a[y[0]].indexOf(l)+1)%3];for(m=1;m<y.length;++m)for(var x=1;x<y.length;++x){var C=(a[y[x]].indexOf(l)+2)%3;if(a[y[x]][C]===_){w.push(p[y[x]]),_=a[y[x]][(C+2)%3];break}}c[l]=w}else{for(l=0;l<e;++l){for(_=u[l],m=0;m<_.length;++m)_[m]=p[_[m]];o(_,s)}c=u}return{cells:c,positions:d}}},396:t=>{"use strict";t.exports=THREE}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};(()=>{"use strict";n.r(i),n.d(i,{BrillouinZoneViewer:()=>m,StructureViewer:()=>c});var t=n(396),e=new CustomEvent("change"),r=new CustomEvent("start"),o=new CustomEvent("end"),s=-1;class a{constructor(e,n){this._state=s,this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=.2,this.panSpeed=.3,this.enableRotate=!0,this.enableZoom=!0,this.enablePan=!0,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.rotationCenter=new t.Vector3,this.target=new t.Vector3,this._prevState=s,this._eye=new t.Vector3,this._movePrev=new t.Vector2,this._moveCurr=new t.Vector2,this._lastAxis=new t.Vector3,this._lastAngle=0,this._lastPosition=new t.Vector3,this._zoomStart=new t.Vector2,this._zoomEnd=new t.Vector2,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._panStart=new t.Vector2,this._panEnd=new t.Vector2,this._zoomed=!1,this.rotationCenter0=this.rotationCenter.clone(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.domElement.addEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.addEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.addEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.addEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.addEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.addEventListener("touchend",this.touchend.bind(this),!1),this.domElement.addEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.addEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.addEventListener("mouseup",this.mouseup.bind(this),!1),this.handleResize(),this.update()}handleResize(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}}handleEvent(t){"function"==typeof this[t.type]&&this[t.type](t)}getMouseOnScreen(e,n){var i=new t.Vector2;return i.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.width),i}getMouseOnCircle(e,n){var i=new t.Vector2;return i.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-n))/this.screen.width),i}rotateCamera(){var e,n=new t.Vector3,i=new t.Quaternion,r=new t.Vector3,o=new t.Vector3,s=new t.Vector3,a=new t.Vector3;if(a.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),e=a.length()){this._eye.copy(this.object.position).sub(this.rotationCenter),r.copy(this._eye).normalize(),o.copy(this.object.up).normalize(),s.crossVectors(o,r).normalize(),o.setLength(this._moveCurr.y-this._movePrev.y),s.setLength(this._moveCurr.x-this._movePrev.x),a.copy(o.add(s)),n.crossVectors(a,this._eye).normalize();var u=this.object.zoom;e*=this.rotateSpeed,e/=u,i.setFromAxisAngle(n,e),this._eye.applyQuaternion(i),this.object.up.applyQuaternion(i),this._lastAxis.copy(n),this._lastAngle=e}else!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.rotationCenter),i.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(i),this.object.up.applyQuaternion(i));this._movePrev.copy(this._moveCurr)}zoomCamera(){var t;4===this._state?(t=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0):1!=(t=this._zoomEnd.y-this._zoomStart.y+1)&&t>0&&(this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0,this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}panCamera(){var e=new t.Vector2,n=new t.Vector3,i=new t.Vector3;if(e.copy(this._panEnd).sub(this._panStart),e.lengthSq()){var r=this.object.zoom;e.multiplyScalar(this.panSpeed/r),i.copy(this._eye).cross(this.object.up).setLength(e.x),i.add(n.copy(this.object.up).setLength(e.y)),this.object.position.add(i),this.rotationCenter.add(i),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(e.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}checkDistances(){(this.enableZoom||this.enablePan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}update(){this._eye.subVectors(this.object.position,this.rotationCenter),this.enableRotate&&this.rotateCamera(),this.enableZoom&&this.zoomCamera(),this.enablePan&&this.panCamera(),this.object.position.addVectors(this.rotationCenter,this._eye),this.checkDistances(),this.object.lookAt(this.rotationCenter),(this._lastPosition.distanceToSquared(this.object.position)>1e-4||this._zoomed)&&(this.dispatchEvent(e),this._lastPosition.copy(this.object.position),this._zoomed=!1)}saveReset(){this.rotationCenter0.copy(this.rotationCenter),this.position0.copy(this.object.position),this.up0.copy(this.object.up),this.zoom0=this.object.zoom}reset(){this._state=s,this._prevState=s,this.rotationCenter.copy(this.rotationCenter0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this._eye.subVectors(this.object.position,this.rotationCenter),this.object.lookAt(this.rotationCenter),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(e),this._lastPosition.copy(this.object.position)}dispose(){this.domElement.removeEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.removeEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.removeEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.removeEventListener("touchend",this.touchend.bind(this),!1),this.domElement.removeEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.removeEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.removeEventListener("mouseup",this.mouseup.bind(this),!1)}mousedown(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state===s&&(this._state=t.button),0===this._state&&this.enableRotate?(this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr)):1===this._state&&this.enableZoom?(this._zoomStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._zoomEnd.copy(this._zoomStart)):2===this._state&&this.enablePan&&(this._panStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(r))}mousemove(t){!1!==this.enabled&&(this._state!==s&&(t.preventDefault(),t.stopPropagation()),0===this._state&&this.enableRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY))):1===this._state&&this.enableZoom?this._zoomEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)):2===this._state&&this.enablePan&&this._panEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this.update())}mouseup(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state=s,document.removeEventListener("mousemove",this.mousemove.bind(this)),document.removeEventListener("mouseup",this.mouseup.bind(this)),this.dispatchEvent(o))}mousewheel(t){if(!1===this.enabled)return;t.preventDefault(),t.stopPropagation();let e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e/=Math.abs(e),this._zoomStart.y+=e*this.zoomSpeed,this.dispatchEvent(r),this.dispatchEvent(o),this.update()}touchstart(t){if(!1!==this.enabled){if(1===t.touches.length)this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=4;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(i,o)),this._panEnd.copy(this._panStart)}this.dispatchEvent(r)}}touchmove(t){if(!1!==this.enabled){if(t.preventDefault(),t.stopPropagation(),1===t.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY));else{var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(i,r))}this.update()}}touchend(t){if(!1!==this.enabled){switch(t.touches.length){case 0:this._state=s;break;case 1:this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(o)}}contextmenu(t){t.preventDefault()}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}}dispatchEvent(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e)for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}class u{constructor(t,e={}){if(this.hostElement=t,this.scenes=[],this.cameraWidth=10,this.options={},!this.webglAvailable())throw Error("WebGL is not supported on this browser, cannot display viewer.");this.setOptions(e),this.setupRootElement(),this.setupRenderer(),this.setupScenes(),this.setupCamera(),this.setupControls(),this.changeHostElement(t,!1,!1),this.options.view.autoResize&&window.addEventListener("resize",this.onWindowResize.bind(this),!1)}setOptions(t){const e={controls:{enableZoom:!0,enableRotate:!0,enablePan:!0,panSpeed:10,zoomSpeed:.2,rotateSpeed:2.5,zoomLevel:1},view:{autoFit:!0,autoResize:!0,fitMargin:.5},renderer:{background:{color:"#ffffff",opacity:0},shadows:{enabled:!1}}};this.fillOptions(t,e),this.options=e}fillOptions(t,e){!function t(e,n){for(const i in e)null!==e[i]&&"[object Object]"===Object.prototype.toString.call(e[i])?(void 0===n[i]&&(n[i]={}),t(e[i],n[i])):n[i]=e[i]}(t,e)}setup(){this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls()}setupScenes(){this.scenes=[],this.scene=new t.Scene,this.scenes.push(this.scene)}clear(){this.clearScenes(),this.scenes=null,this.controls=null,this.camera=null}clearScenes(){for(let t=0;t<this.scenes.length;++t){let e=this.scenes[t];for(e.traverse((function(t){let e=t.geometry,n=t.material,i=t.texture;e&&e.dispose(),n&&n.dispose(),i&&i.dispose()}));e.children.length;){let t=e.children[0];e.remove(t)}}}takeScreenShot(t){let e;try{let n="image/png",i="image/octet-stream";this.render(),e=this.renderer.domElement.toDataURL(n);let r=e.replace(n,i);t+=".png";let o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.download=t,o.href=r,o.click(),document.body.removeChild(o)}catch(t){return void console.log(t)}}webglAvailable(){let t=window;try{let e=document.createElement("canvas");return!(!t.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}setupRenderer(){this.renderer=new t.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=t.PCFSoftShadowMap,this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),this.renderer.setClearColor(this.options.renderer.background.color,this.options.renderer.background.opacity),this.rootElement.appendChild(this.renderer.domElement),this.renderer.autoClear=!1}setBackgroundColor(t,e){this.renderer.setClearColor(t,e)}setupCamera(){let e=this.rootElement.clientWidth/this.rootElement.clientHeight,n=this.cameraWidth,i=n/e;this.camera=new t.OrthographicCamera(n/-2,n/2,i/2,i/-2,-100,1e3),this.camera.name="camera",this.camera.position.z=20}setupRootElement(){this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="relative"}changeHostElement(t,e=!0,n=!0){if(void 0!==t){if(this.hostElement)for(;this.hostElement.firstChild;)this.hostElement.removeChild(this.hostElement.firstChild);t.appendChild(this.rootElement),this.resizeCanvasToHostElement(),e&&this.fitToCanvas(),n&&this.render()}}saveReset(){this.controls.saveReset()}reset(){this.controls.reset()}setupControls(){let e=new a(this.camera,this.rootElement);e.rotateSpeed=this.options.controls.rotateSpeed,e.rotationCenter=new t.Vector3,e.zoomSpeed=this.options.controls.zoomSpeed,e.panSpeed=this.options.controls.panSpeed,e.enableZoom=this.options.controls.enableZoom,e.enablePan=this.options.controls.enablePan,e.enableRotate=this.options.controls.enableRotate,e.staticMoving=!0,e.dynamicDampingFactor=.25,e.keys=[65,83,68],e.addEventListener("change",this.render.bind(this)),this.controls=e}createCornerPoints(e,n){const i=e.clone().add(n[0]).add(n[1]).add(n[2]),r=[e,i];for(let t=n.length,o=0;o<t;++o)r.push(e.clone().add(n[o].clone())),r.push(i.clone().sub(n[o].clone()));return(new t.BufferGeometry).setFromPoints(r)}fitToCanvas(){const{points:e,margin:n}=this.getCornerPoints();this.scenes.forEach((t=>t.updateMatrixWorld()));const i=this.rootElement,r=i.clientWidth,o=i.clientHeight,s=[],a=e.length;this.camera.zoom=this.options.controls.zoomLevel,this.camera.updateProjectionMatrix();const u=this.options.view.fitMargin+n,l=new t.Vector3(0,0,0);l.project(this.camera),l.x=Math.round((l.x+1)*r/2),l.y=Math.round((1-l.y)*o/2),l.z=0;const c=new t.Vector3(u,u,0);c.project(this.camera),c.x=Math.round((c.x+1)*r/2),c.y=Math.round((1-c.y)*o/2),c.sub(l),c.x=Math.abs(c.x),c.y=Math.abs(c.y),c.z=0;for(let t=0;t<a;++t){const n=e[t].clone();n.project(this.camera),n.x=Math.round((n.x+1)*r/2),n.y=Math.round((1-n.y)*o/2),n.z=0,s.push(n)}let h=s[0].x,f=s[0].x,p=s[0].y,d=s[0].y;for(let t=s.length,e=0;e<t;++e){const t=s[e],n=t.x,i=t.y;n>f?f=n:n<h&&(h=n),i>d?d=i:i<p&&(p=i)}h-=c.x,f+=c.x,p-=c.y,d+=c.y;const v=r/2,g=o/2,m=v/Math.abs(f-v),b=v/Math.abs(h-v),y=g/Math.abs(p-g),w=g/Math.abs(d-g),_=Math.min(m,b,y,w);this.camera.zoom=_,this.camera.updateProjectionMatrix()}getZoom(){return this.camera.zoom}setZoom(t){this.camera.zoom=t,this.camera.updateProjectionMatrix()}resizeCanvasToHostElement(){let t=this.rootElement.clientWidth/this.rootElement.clientHeight,e=this.cameraWidth,n=e/t;this.camera.left=-e/2,this.camera.right=e/2,this.camera.top=n/2,this.camera.bottom=-n/2,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),this.controls.handleResize(),this.render()}onWindowResize(){this.resizeCanvasToHostElement(),this.options.view.autoFit&&this.fitToCanvas(),this.render()}render(){this.renderer.clear();for(let t=0;t<this.scenes.length;++t){let e=this.scenes[t];this.renderer.render(e,this.camera),t!==this.scenes.length-1&&this.renderer.clearDepth()}}createCylinder(e,n,i,r,o){const s=(new t.Vector3).subVectors(n,e),a=s.length(),u=s.clone().divideScalar(a),l=new t.ArrowHelper(u,e),c=new t.CylinderGeometry(i,i,a,r),h=new t.Mesh(c,o);return h.rotation.copy(l.rotation.clone()),h.position.copy((new t.Vector3).addVectors(e,s.multiplyScalar(.5))),h}createLabel(e,n,i,r,o,s,a=0,u="#000"){const l=document.createElement("canvas");l.width=256,l.height=256;const c=l.getContext("2d");c.fillStyle=i,c.font=`230.4px ${r}`,c.textAlign="center",c.textBaseline="middle",a>0&&(c.lineWidth=256*a,c.strokeStyle=u,c.strokeText(n,128,128)),c.fillText(n,128,128);const h=new t.Texture(l);h.needsUpdate=!0;const f=new t.SpriteMaterial({map:h}),p=new t.Sprite(f);p.scale.set(o,o,1),void 0===s&&(s=new t.Vector2(0,0));const d=new t.Vector2;d.addVectors(s,new t.Vector2(.5,.5)),p.center.copy(d);const v=new t.Object3D;return v.position.copy(e),v.add(p),v}rotateAroundWorldAxis(e,n,i){const r=new t.Matrix4;r.makeRotationAxis(n.normalize(),i),r.multiply(e.matrix),e.matrix=r,e.rotation.setFromRotationMatrix(e.matrix)}coordinateTransform(t,e,n,i=!0){return(i?n.clone():n).applyMatrix3(t).applyMatrix3(e)}alignView(e,n,i,r=!0){if(void 0===e)return;if(e.length>2)throw"At most two alignments can be performed.";const o=[],s=e=>{const r=e[0],s=e[1];let a;switch(r){case"up":a=new t.Vector3(0,1,0);break;case"down":a=new t.Vector3(0,-1,0);break;case"right":a=new t.Vector3(1,0,0);break;case"left":a=new t.Vector3(-1,0,0);break;case"front":a=new t.Vector3(0,0,1);break;case"back":a=new t.Vector3(0,0,-1)}const u=n[s];for(const t of o)u[t]=0;if(u.length()>1e-8){const e=(new t.Quaternion).setFromUnitVectors(u.clone().normalize(),a);for(const t in n)n[t].applyQuaternion(e);for(const t of i)t.applyQuaternion(e),t.updateMatrixWorld();"right"==r||"left"==r?o.push("x"):"up"==r||"down"==r?o.push("y"):"front"!=r&&"back"!=r||o.push("z")}};for(const t of e)s(t);r&&this.render()}}var l=n(486);class c extends u{constructor(){super(...arguments),this.updateBonds=!1,this.atomicRadii=[],this.elementColors=[],this.lights=[],this.bondFills=[],this.atomFills=[],this.atomOutlines=[],this.axisLabels=[],this.label_missing="X",this.elementNames=[this.label_missing,"H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"],this.elementNumbers={[this.label_missing]:0,H:1,He:2,Li:3,Be:4,B:5,C:6,N:7,O:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,S:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Nh:113,Fl:114,Mc:115,Lv:116,Ts:117,Og:118},this.radii_unknown=.3,this.covalentRadii=[this.radii_unknown,.31,.28,1.28,.96,.84,.76,.71,.66,.57,.58,1.66,1.41,1.21,1.11,1.07,1.05,1.02,1.06,2.03,1.76,1.7,1.6,1.53,1.39,1.39,1.32,1.26,1.24,1.32,1.22,1.22,1.2,1.19,1.2,1.2,1.16,2.2,1.95,1.9,1.75,1.64,1.54,1.47,1.46,1.42,1.39,1.45,1.44,1.42,1.39,1.39,1.38,1.39,1.4,2.44,2.15,2.07,2.04,2.03,2.01,1.99,1.98,1.98,1.96,1.94,1.92,1.92,1.89,1.9,1.87,1.87,1.75,1.7,1.62,1.51,1.44,1.41,1.36,1.36,1.32,1.45,1.46,1.48,1.4,1.5,1.5,2.6,2.21,2.15,2.06,2,1.96,1.9,1.87,1.8,1.69,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown],this.color_unknown="#ff1493",this.jmolColors=[this.color_unknown,"#ffffff","#d9ffff","#cc80ff","#c2ff00","#ffb5b5","#909090","#3050f8","#ff0d0d","#90e050","#b3e3f5","#ab5cf2","#8aff00","#bfa6a6","#f0c8a0","#ff8000","#ffff30","#1ff01f","#80d1e3","#8f40d4","#3dff00","#e6e6e6","#bfc2c7","#a6a6ab","#8a99c7","#9c7ac7","#e06633","#f090a0","#50d050","#c88033","#7d80b0","#c28f8f","#668f8f","#bd80e3","#ffa100","#a62929","#5cb8d1","#702eb0","#00ff00","#94ffff","#94e0e0","#73c2c9","#54b5b5","#3b9e9e","#248f8f","#0a7d8c","#006985","#c0c0c0","#ffd98f","#a67573","#668080","#9e63b5","#d47a00","#940094","#429eb0","#57178f","#00c900","#70d4ff","#ffffc7","#d9ffc7","#c7ffc7","#a3ffc7","#8fffc7","#61ffc7","#45ffc7","#30ffc7","#1fffc7","#00ff9c","#00e675","#00d452","#00bf38","#00ab24","#4dc2ff","#4da6ff","#2194d6","#267dab","#266696","#175487","#d0d0e0","#ffd123","#b8b8d0","#a6544d","#575961","#9e4fb5","#ab5c00","#754f45","#428296","#420066","#007d00","#70abfa","#00baff","#00a1ff","#008fff","#0080ff","#006bff","#545cf2","#785ce3","#8a4fe3","#a136d4","#b31fd4","#b31fba","#b30da6","#bd0d87","#c70066","#cc0059","#d1004f","#d90045","#e00038","#e6002e","#eb0026"]}setupScenes(){this.scenes=[],this.sceneStructure=new t.Scene,this.scenes.push(this.sceneStructure),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo)}setOptions(t,e=!0,n=!0){var i,r,o,s,a,u,l,c;const h={view:{fitMargin:.5},layout:{periodicity:"none",translation:[0,0,0],viewCenter:"COP",wrapTolerance:.05},outline:{enabled:!0,color:"#000000",size:.025},cell:{enabled:!0,color:"#000000",linewidth:1.5,dashSize:0,gapSize:0},latticeConstants:{enabled:!0,font:"Arial",size:.7,stroke:{width:.06,color:"#000"},a:{enabled:!0,color:"#C52929",label:"a"},b:{enabled:!0,color:"#47A823",label:"b"},c:{enabled:!0,color:"#3B5796",label:"c"},alpha:{enabled:!0,color:"#ffffff",label:"α"},beta:{enabled:!0,color:"#ffffff",label:"β"},gamma:{enabled:!0,color:"#ffffff",label:"γ"}},bonds:{enabled:!0,material:{phong:{shininess:30}},color:"#ffffff",radius:.08,threshold:1,smoothness:145},atoms:{material:{phong:{shininess:30}},colors:"Jmol",radii:"covalent",scale:1,smoothness:165}};0===Object.keys(this.options).length?(this.fillOptions(t,h),super.setOptions(h)):(this.fillOptions(t,this.options),super.setOptions(this.options),n&&(this.needFullReload(t)&&void 0!==this.structure?this.load(this.structure):(void 0!==(null===(i=null==t?void 0:t.latticeConstants)||void 0===i?void 0:i.enabled)&&this.toggleLatticeConstants(t.latticeConstants.enabled),void 0!==(null===(r=null==t?void 0:t.cell)||void 0===r?void 0:r.enabled)&&this.toggleCell(t.cell.enabled),void 0!==(null===(o=null==t?void 0:t.bonds)||void 0===o?void 0:o.enabled)&&this.toggleBonds(t.bonds.enabled),void 0!==(null===(a=null===(s=null==t?void 0:t.renderer)||void 0===s?void 0:s.shadows)||void 0===a?void 0:a.enabled)&&this.toggleShadows(t.renderer.shadows.enabled))),void 0!==(null===(u=null==t?void 0:t.renderer)||void 0===u?void 0:u.background)&&this.setBackgroundColor(null===(l=null==t?void 0:t.renderer)||void 0===l?void 0:l.background.color,null===(c=null==t?void 0:t.renderer)||void 0===c?void 0:c.background.opacity),e&&this.render())}needFullReload(t){return function t(e,n){for(const i in e)if(null!==e[i]&&"[object Object]"===Object.prototype.toString.call(e[i])){if(void 0===n[i])return!0;if(t(e[i],n[i]))return!0}else if(void 0===n[i])return!0;return!1}(t,{cell:{enabled:!0},latticeConstants:{enabled:!0},bonds:{enabled:!0},shadows:{enabled:!0}})}getOptions(){return this.options}getElementInfo(){return this.elements}toggleLatticeConstants(t){void 0!==this.latticeConstants&&(this.latticeConstants.visible=t,this.angleArcs.visible=t)}toggleCell(t){void 0!==this.convCell&&(this.convCell.visible=t),void 0!==this.primCell&&(this.primCell.visible=t)}toggleBonds(t){t&&this.createBonds(),void 0!==this.bonds&&(this.bonds.visible=t)}toggleShadows(t){var e,n,i;this.renderer.shadowMap.enabled=t;for(let e=0;e<this.lights.length;++e)this.lights[e].castShadow=t;for(let e=0;e<this.atomFills.length;++e){let n=this.atomFills[e];n.receiveShadow=t,n.castShadow=t,n.material.needsUpdate=!0}for(let r=0;r<this.bondFills.length;++r){let o=this.bondFills[r];o.receiveShadow=t,void 0!==(null===(i=null===(n=null===(e=this.options)||void 0===e?void 0:e.atoms)||void 0===n?void 0:n.material)||void 0===i?void 0:i.toon)?o.castShadow=!1:o.castShadow=t,o.material.needsUpdate=!0}this.render(),this.render()}clear(){super.clear(),this.structure=void 0,this.atoms=void 0,this.convCell=void 0,this.primCell=void 0,this.bonds=void 0,this.atomPos=void 0,this.positions=void 0,this.atomNumbers=void 0,this.atomicNumbers=void 0,this.latticeConstants=void 0,this.B=void 0,this.Bi=void 0,this.basisVectors=void 0,this.elements=void 0,this.maxRadii=void 0,this.atomicRadii=void 0,this.elementColors=void 0}load(e){var n,i,r,o,s,a;this.clear(),this.setup(),this.structure=e,this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls(),this.atomicRadii=this.covalentRadii,this.elementColors=this.jmolColors;const u=void 0!==e.fractional&&e.fractional,l=e.positions,c=e.species,h=e.cell;let f=e.pbc,p=e.bonds;if(!l)return console.log("No atom positions given to the structure viewer"),!1;if(!c)return console.log("No species  given to the structure viewer."),!1;const d="number"==typeof c[0]?c.map((t=>t<0||t>=this.elementNames.length?0:t)):c.map((t=>this.elementNumbers[t]||0));if(this.maxRadii=Math.max(...d.map((t=>this.getRadii(t)))),p){if(!Array.isArray(p))return console.log("Invalid value for 'bonds'. Provide a list of index pairs."),!1}else p="auto";if(l.length!=d.length)return console.log("The number of positions does not match the number of labels."),!1;null!=f&&null!=f||(f=[!1,!1,!1]),this.root=new t.Object3D,this.container=new t.Object3D,this.infoContainer=new t.Object3D,this.atoms=new t.Object3D,this.bonds=new t.Object3D,this.container.add(this.atoms),this.container.add(this.bonds),this.angleArcs=new t.Object3D,this.root.add(this.container),this.sceneStructure.add(this.root),this.sceneInfo.add(this.infoContainer),this.latticeConstants=new t.Object3D,this.container.add(this.latticeConstants),this.createBasisVectors(h);let v=[],g=[];!0===u?(v=this.toVectors(l),g=this.toCartesian(v,!0)):!1===u&&(g=this.toVectors(l),void 0!==this.B&&(v=this.toScaled(g,!0)));let m=0;const b=[],y=f[0],w=f[1],_=f[2];if(y&&w&&_)m=3;else if(y||w||_)for(let t=0;t<3;++t){const e=f[t],n=f[(t+1)%3],i=f[(t+2)%3];if(e&&!n&&!i){m=1,b.push(t);break}if(e&&n&&!i){m=2,b.push(t),b.push((t+1)%3);break}}else m=0;void 0!==this.B?(this.createConventionalCell(f,this.options.cell.enabled),this.createLatticeConstants(this.basisVectors,f,b),this.createAtoms(v,d,f,!0)):void 0!==this.basisVectors?(this.createConventionalCell(f,this.options.cell.enabled),this.createLatticeConstants(this.basisVectors,f,b),this.createAtoms(g,d,f,!1)):this.createAtoms(g,d,f,!1),this.styleAtoms(this.options.atoms);const x=this.getPositions();this.createBonds(p);const C=this.options.layout.viewCenter;let A;return"COP"===C?A=this.calculateCOP(x):"COC"===C?A=(new t.Vector3).add(this.basisVectors[0]).add(this.basisVectors[1]).add(this.basisVectors[2]).multiplyScalar(.5):Array.isArray(C)&&(A=(new t.Vector3).fromArray(C)),this.setViewCenter(A),this.translate(this.options.layout.translation),this.setZoom(this.options.controls.zoomLevel),void 0!==this.basisVectors&&this.alignView(null===(r=null===(i=null===(n=this.options)||void 0===n?void 0:n.layout)||void 0===i?void 0:i.viewRotation)||void 0===r?void 0:r.alignments),this.rotateView(null===(a=null===(s=null===(o=this.options)||void 0===o?void 0:o.layout)||void 0===s?void 0:s.viewRotation)||void 0===a?void 0:a.rotations),this.options.view.autoFit&&this.fitToCanvas(),this.toggleShadows(this.options.renderer.shadows.enabled),this.render(),!0}calculateCOP(e){let n=e.length,i=new t.Vector3;for(let t=0;t<n;++t){let n=e[t];i.add(n)}return i.divideScalar(n),i}setViewCenter(t){this.container.position.sub(t),this.infoContainer.position.sub(t),this.render()}translate(e){const n=(new t.Vector3).fromArray(e);this.atoms.position.add(n),this.bonds.position.add(n),this.render()}setPositions(t,e=!1,n=!0){if("none"!==this.options.layout.periodicity&&"wrap"!==this.options.layout.periodicity)throw"Setting new positions is not allowed when options.layout.periodicity != 'none'/'wrap'.";const i=this.toVectors(t);"wrap"===this.options.layout.periodicity&&this.wrap(i,e),e&&this.toCartesian(i,!1);for(let t=0,e=i.length;t<e;++t){const e=i[t];this.getAtom(t).position.copy(e)}this.updateBonds=!0,this.createBonds(),n&&this.render()}getPositions(t=!1){let e=[],n=this.atoms.children,i=n.length;if(t){let t=[];for(let e=0;e<i;++e){let i=n[e].position.clone();t.push(i)}e=this.toScaled(t)}else for(let t=0;t<i;++t){let i=n[t].position.clone();e.push(i)}return e}toVectors(e,n=!0){const i=[];for(let n=0,r=e.length;n<r;++n)i.push((new t.Vector3).fromArray(e[n]));if(n)return i;e=i}toCartesian(t,e=!0){if(e){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone().applyMatrix3(this.B));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.B)}toScaled(t,e=!0){if(e){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone().applyMatrix3(this.Bi));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.Bi)}getAtom(t){return this.atoms.getObjectByName(`atom${t}`)}setZoom(t){this.camera.zoom=t,this.render()}setupLights(){var e,n,i,r,o,s;this.lights=[];let a=2048,u=-.001,l=new t.DirectionalLight(16777215,.45);l.shadow.mapSize.width=a,l.shadow.mapSize.height=a,l.shadow.bias=u,l.shadow.camera.left=-50,l.shadow.camera.right=50,l.shadow.camera.top=50,l.shadow.camera.bottom=-50,l.position.set(0,0,20),this.sceneStructure.add(l),this.lights.push(l);let c=new t.DirectionalLight(16777215,.3);c.shadow.mapSize.width=a,c.shadow.mapSize.height=a,c.shadow.bias=u,c.position.set(-20,0,-20),void 0===(null===(i=null===(n=null===(e=this.options)||void 0===e?void 0:e.atoms)||void 0===n?void 0:n.material)||void 0===i?void 0:i.toon)&&(this.sceneStructure.add(c),this.lights.push(c));let h=new t.DirectionalLight(16777215,.25);h.shadow.mapSize.width=a,h.shadow.mapSize.height=a,h.shadow.bias=u,h.position.set(20,0,-20),void 0===(null===(s=null===(o=null===(r=this.options)||void 0===r?void 0:r.atoms)||void 0===o?void 0:o.material)||void 0===s?void 0:s.toon)&&(this.sceneStructure.add(h),this.lights.push(h));let f=new t.AmbientLight(4210752,1.7);this.sceneStructure.add(f)}createLatticeConstants(e,n,i){var r,o,s,a,u,l,c,h,f,p,d,v,g,m,b,y,w,_,x,C,A,M,V,S;if(!this.options.latticeConstants.enabled)return;this.axisLabels=[],this.infoContainer.add(this.latticeConstants),this.infoContainer.add(this.angleArcs),new t.LineBasicMaterial({color:"#000000",linewidth:1.5});let z=-1,E=[];E.push(this.options.latticeConstants.a.color),E.push(this.options.latticeConstants.b.color),E.push(this.options.latticeConstants.c.color);const k=[];k.push(this.options.latticeConstants.alpha.color),k.push(this.options.latticeConstants.beta.color),k.push(this.options.latticeConstants.gamma.color);const j=[];j.push(void 0===(null===(o=null===(r=this.options.latticeConstants.alpha)||void 0===r?void 0:r.stroke)||void 0===o?void 0:o.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.alpha.stroke.color),j.push(void 0===(null===(a=null===(s=this.options.latticeConstants.beta)||void 0===s?void 0:s.stroke)||void 0===a?void 0:a.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.beta.stroke.color),j.push(void 0===(null===(l=null===(u=this.options.latticeConstants.gamma)||void 0===u?void 0:u.stroke)||void 0===l?void 0:l.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.gamma.stroke.color);const P=[];P.push(void 0===(null===(h=null===(c=this.options.latticeConstants.alpha)||void 0===c?void 0:c.stroke)||void 0===h?void 0:h.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.alpha.stroke.width),P.push(void 0===(null===(p=null===(f=this.options.latticeConstants.beta)||void 0===f?void 0:f.stroke)||void 0===p?void 0:p.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.beta.stroke.width),P.push(void 0===(null===(v=null===(d=this.options.latticeConstants.gamma)||void 0===d?void 0:d.stroke)||void 0===v?void 0:v.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.gamma.stroke.width);let O=[this.options.latticeConstants.gamma.label,this.options.latticeConstants.alpha.label,this.options.latticeConstants.beta.label],L=[this.options.latticeConstants.a.label,this.options.latticeConstants.b.label,this.options.latticeConstants.c.label],T=[this.options.latticeConstants.gamma.enabled,this.options.latticeConstants.alpha.enabled,this.options.latticeConstants.beta.enabled],R=[this.options.latticeConstants.a.enabled,this.options.latticeConstants.b.enabled,this.options.latticeConstants.c.enabled],B=[];B.push(void 0===this.options.latticeConstants.a.font?this.options.latticeConstants.font:this.options.latticeConstants.a.font),B.push(void 0===this.options.latticeConstants.b.font?this.options.latticeConstants.font:this.options.latticeConstants.b.font),B.push(void 0===this.options.latticeConstants.c.font?this.options.latticeConstants.font:this.options.latticeConstants.c.font);const F=[];F.push(void 0===this.options.latticeConstants.a.size?this.options.latticeConstants.size:this.options.latticeConstants.a.size),F.push(void 0===this.options.latticeConstants.b.size?this.options.latticeConstants.size:this.options.latticeConstants.b.size),F.push(void 0===this.options.latticeConstants.c.size?this.options.latticeConstants.size:this.options.latticeConstants.c.size);const D=[];D.push(void 0===(null===(m=null===(g=this.options.latticeConstants.a)||void 0===g?void 0:g.stroke)||void 0===m?void 0:m.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.a.stroke.color),D.push(void 0===(null===(y=null===(b=this.options.latticeConstants.b)||void 0===b?void 0:b.stroke)||void 0===y?void 0:y.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.b.stroke.color),D.push(void 0===(null===(_=null===(w=this.options.latticeConstants.c)||void 0===w?void 0:w.stroke)||void 0===_?void 0:_.color)?this.options.latticeConstants.stroke.color:this.options.latticeConstants.c.stroke.color);const W=[];W.push(void 0===(null===(C=null===(x=this.options.latticeConstants.a)||void 0===x?void 0:x.stroke)||void 0===C?void 0:C.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.a.stroke.width),W.push(void 0===(null===(M=null===(A=this.options.latticeConstants.b)||void 0===A?void 0:A.stroke)||void 0===M?void 0:M.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.b.stroke.width),W.push(void 0===(null===(S=null===(V=this.options.latticeConstants.c)||void 0===V?void 0:V.stroke)||void 0===S?void 0:S.width)?this.options.latticeConstants.stroke.width:this.options.latticeConstants.c.stroke.width);const I=[];I.push(void 0===this.options.latticeConstants.alpha.font?this.options.latticeConstants.font:this.options.latticeConstants.alpha.font),I.push(void 0===this.options.latticeConstants.beta.font?this.options.latticeConstants.font:this.options.latticeConstants.beta.font),I.push(void 0===this.options.latticeConstants.gamma.font?this.options.latticeConstants.font:this.options.latticeConstants.gamma.font);const N=[];N.push(void 0===this.options.latticeConstants.alpha.size?this.options.latticeConstants.size:this.options.latticeConstants.alpha.size),N.push(void 0===this.options.latticeConstants.beta.size?this.options.latticeConstants.size:this.options.latticeConstants.beta.size),N.push(void 0===this.options.latticeConstants.gamma.size?this.options.latticeConstants.size:this.options.latticeConstants.gamma.size);for(let n=0;n<3;++n){z+=1;let i=L[z],r=E[z],o=B[z],s=F[z],a=N[z],u=W[z],l=D[z],c=I[z],h=k[z],f=O[z],p=j[z],d=P[z],v=R[z],g=T[z];const m=this.basisVectorCollapsed[n],b=this.basisVectorCollapsed[(n+1)%3],y=this.basisVectorCollapsed[(n+2)%3];let w=e[n],_=e[(n+1)%3].clone(),x=e[(n+2)%3].clone();if(v&&!m){const e=new t.Vector3(0,0,0),a=w.clone(),c=a.clone().multiplyScalar(.5);let h,f;if(b&&y)f=new t.Vector3(0,0,1),h=(new t.Vector3).crossVectors(w,f);else if(b)f=(new t.Vector3).crossVectors(w,x),h=(new t.Vector3).crossVectors(w,f);else if(y)f=(new t.Vector3).crossVectors(w,_),h=(new t.Vector3).crossVectors(w,f);else{const e=(new t.Vector3).crossVectors(w,_),n=(new t.Vector3).crossVectors(w,x);h=(new t.Vector3).sub(e).add(n)}h.normalize(),h.multiplyScalar(.8),c.add(h);const p=this.createLabel(c,i,r,o,s,new t.Vector2(0,0),u,l);this.latticeConstants.add(p),this.axisLabels.push(p);const d=new t.MeshBasicMaterial({color:r,transparent:!0,opacity:.75}),v=w.clone(),g=this.createCylinder(e.clone(),v.clone().add(e),.09,10,d);this.latticeConstants.add(g);const m=new t.MeshBasicMaterial({color:"#000000"}),C=this.basisVectors[n].clone(),A=C.clone().multiplyScalar(1+1.3/C.length()),M=this.createCylinder(e.clone(),A,.02,10,m);this.latticeConstants.add(M);const V=new t.CylinderGeometry(0,.1,.5,12),S=new t.MeshBasicMaterial({color:0}),z=new t.Mesh(V,S);z.position.copy(a).multiplyScalar(1+1.3/a.length()),z.lookAt(new t.Vector3),z.rotateX(-Math.PI/2),this.latticeConstants.add(z)}if(g&&!m&&!b){const e=new t.LineDashedMaterial({color:0,linewidth:2,dashSize:.2,gapSize:.1}),n=(new t.Vector3).crossVectors(w,_),i=w.angleTo(_),r=Math.max(Math.min(1/4*w.length(),1/4*_.length()),1),o=20,s=new t.EllipseCurve(0,0,r,r,0,i,!1,0).getSpacedPoints(o),u=(new t.BufferGeometry).setFromPoints(s),l=new t.Line(u,e);l.computeLineDistances();const v=new t.Vector3(1,0,0),g=(new t.Quaternion).setFromUnitVectors(v,w.clone().normalize());l.quaternion.copy(g);const m=u.attributes.position.array,b=m.length/3,y=(new t.Vector3).fromArray(m,3*(b-1));l.updateMatrixWorld();const x=l.localToWorld(y.clone()),C=w,A=(new t.Vector3).crossVectors(C,x);let M=n.angleTo(A);(new t.Vector3).crossVectors(_,x).dot(C)>0&&(M=-M),l.rotateX(M),l.updateMatrixWorld(),l.updateMatrix();const V=l.localToWorld((new t.Vector3).fromArray(m,3*(o/2-1))),S=V.length();V.multiplyScalar(1+.3/S);const z=this.createLabel(V,f.toString(),h,c,a,new t.Vector2(0,0),d,p);this.latticeConstants.add(z),this.axisLabels.push(z),this.angleArcs.add(l)}}}createBasisVectors(e){if(void 0===e)return this.basisVectors=void 0,this.B=void 0,void(this.Bi=void 0);const n=(new t.Vector3).fromArray(e[0]),i=(new t.Vector3).fromArray(e[1]),r=(new t.Vector3).fromArray(e[2]);this.basisVectors=[n,i,r];const o=new t.Matrix3;o.set(n.x,i.x,r.x,n.y,i.y,r.y,n.z,i.z,r.z),this.basisVectorCollapsed=[];for(let t=0;t<3;++t){const e=this.basisVectors[t].length();this.basisVectorCollapsed.push(e<1e-6)}this.basisVectorCollapsed.some((t=>t))?(this.B=void 0,this.Bi=void 0):(this.B=o,this.Bi=(new t.Matrix3).copy(o).invert())}getCornerPoints(){this.atoms.updateMatrixWorld();const e=this.atoms.children,n=e.length,i=[];for(let r=0;r<n;++r){const n=e[r],o=new t.Vector3;n.getWorldPosition(o),i.push(o)}return{points:i,margin:this.maxRadii}}getRadii(t){return this.atomicRadii[t]||this.radii_unknown}getColor(t){return this.elementColors[t]||this.color_unknown}createConventionalCell(e,n){const i=this.createCell(new t.Vector3,this.basisVectors,this.basisVectorCollapsed,e,this.options.cell.color,this.options.cell.linewidth,this.options.cell.dashSize,this.options.cell.gapSize);i.visible=n,this.convCell=i,this.container.add(this.convCell)}createCell(e,n,i,r,o,s,a,u){let l,c=new t.Object3D;l=0!==a||0!==u?new t.LineDashedMaterial({color:o,linewidth:s,dashSize:a,gapSize:u}):new t.LineBasicMaterial({color:o,linewidth:s});for(let o=n.length,s=0;s<o;++s){let a=n[s].clone(),u=i[s],h=l.clone();if(r[s]||!u){const n=[];n.push(e.clone()),n.push(a.clone().add(e));const i=(new t.BufferGeometry).setFromPoints(n);let r=new t.Line(i,h);c.add(r),r.computeLineDistances()}let f=n[(s+1)%o].clone();if(r[s]&&r[(s+1)%3]||!u){let n=l.clone();const i=[];i.push(f.clone().add(e)),i.push(a.clone().add(f).add(e));let r=(new t.BufferGeometry).setFromPoints(i),o=new t.Line(r,n);c.add(o),o.computeLineDistances()}let p=n[(s+2)%o].clone();if(r[s]&&r[(s+2)%3]||!u){const n=l.clone(),i=[];i.push(p.clone().add(e)),i.push(a.clone().add(p).add(e));const r=(new t.BufferGeometry).setFromPoints(i),o=new t.Line(r,n);c.add(o),o.computeLineDistances()}if(r[s]&&r[(s+2)%3]&&r[(s+1)%3]||!u){const n=l.clone(),i=[];i.push(f.clone().add(p).add(e)),i.push(a.clone().add(f).add(p).add(e));const r=(new t.BufferGeometry).setFromPoints(i),o=new t.Line(r,n);c.add(o),o.computeLineDistances()}}return c}rotateView(e,n=!0){if(void 0!==e){for(const n of e){const e=new t.Vector3(n[0],n[1],n[2]);e.normalize();const i=n[3]/180*Math.PI;this.rotateAroundWorldAxis(this.root,e,i),this.rotateAroundWorldAxis(this.sceneInfo,e,i)}n&&this.render()}}alignView(t,e=!0){const n={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate()},i=[this.root,this.sceneInfo];super.alignView(t,n,i,e)}repeat(e,n,i){let r=new t.Vector3(1,0,0),o=new t.Vector3(0,1,0),s=new t.Vector3(0,0,1),a=[],u=[];for(let l=0;l<e[0];++l)for(let c=0;c<e[1];++c)for(let h=0;h<e[2];++h)if(0!=l||0!=c||0!=h){let e=r.clone().multiplyScalar(l),f=o.clone().multiplyScalar(c),p=s.clone().multiplyScalar(h);for(let r=0,o=n.length;r<o;++r){let o=(new t.Vector3).copy(n[r]);o.add(e),o.add(f),o.add(p);let s=i[r];a.push(o),u.push(s)}}for(let t=0;t<a.length;++t)n.push(a[t]),i.push(u[t])}wrap(t,e=!0){e||this.toScaled(t,!1);for(let e=t.length,n=0;n<e;++n){const e=t[n];this.structure.pbc[0]&&(e.x=e.x<0?1+e.x%1:e.x%1),this.structure.pbc[1]&&(e.y=e.y<0?1+e.y%1:e.y%1),this.structure.pbc[2]&&(e.z=e.z<0?1+e.z%1:e.z%1)}e||this.toCartesian(t,!1)}addBoundaryAtoms(e,n){for(let i=e.length,r=0;r<i;++r){let i=e[r],o=n[r],s=i.x,a=i.y,u=i.z,l=this.almostEqual(0,s,this.basisVectors[0],this.options.layout.wrapTolerance),c=this.almostEqual(0,a,this.basisVectors[1],this.options.layout.wrapTolerance),h=this.almostEqual(0,u,this.basisVectors[2],this.options.layout.wrapTolerance);l&&c&&h?(e.push(new t.Vector3(1,0,0).add(i)),n.push(o),e.push(new t.Vector3(0,1,0).add(i)),n.push(o),e.push(new t.Vector3(0,0,1).add(i)),n.push(o),e.push(new t.Vector3(1,1,0).add(i)),n.push(o),e.push(new t.Vector3(0,1,1).add(i)),n.push(o),e.push(new t.Vector3(1,0,1).add(i)),n.push(o),e.push(new t.Vector3(1,1,1).add(i)),n.push(o)):l&&c&&!h?(e.push(new t.Vector3(1,0,0).add(i)),n.push(o),e.push(new t.Vector3(0,1,0).add(i)),n.push(o),e.push(new t.Vector3(1,1,0).add(i)),n.push(o)):!l&&c&&h?(e.push(new t.Vector3(0,1,0).add(i)),n.push(o),e.push(new t.Vector3(0,0,1).add(i)),n.push(o),e.push(new t.Vector3(0,1,1).add(i)),n.push(o)):l&&!c&&h?(e.push(new t.Vector3(1,0,0).add(i)),n.push(o),e.push(new t.Vector3(0,0,1).add(i)),n.push(o),e.push(new t.Vector3(1,0,1).add(i)),n.push(o)):!l||c||h?l||!c||h?l||c||!h||(e.push(new t.Vector3(0,0,1).add(i)),n.push(o)):(e.push(new t.Vector3(0,1,0).add(i)),n.push(o)):(e.push(new t.Vector3(1,0,0).add(i)),n.push(o))}}createAtoms(e,n,i,r=!0){if(this.atoms.remove(...this.atoms.children),this.elements={},this.atomNumbers=[],this.atomFills=[],this.atomOutlines=[],i.some((t=>!0===t))){let t=this.options.layout.periodicity;"wrap"===t?this.wrap(e,r):r&&"boundary"===t?this.addBoundaryAtoms(e,n):r&&Array.isArray(t)&&this.repeat(t,e,n)}const o=[];for(let n of e){const e=new t.Vector3;r?(e.add(this.basisVectors[0].clone().multiplyScalar(n.x)),e.add(this.basisVectors[1].clone().multiplyScalar(n.y)),e.add(this.basisVectors[2].clone().multiplyScalar(n.z))):e.copy(n),o.push(e)}this.positions=o,this.atomicNumbers=n}styleAtoms(t){(0,l.isPlainObject)(t)&&(t=[t]);for(const e of t){const t=e.include,n=e.exclude,i=!(0,l.isNil)(t),r=!(0,l.isNil)(n);let o;const s=this.atomicNumbers.length;if(i&&r)throw Error("Only provide include or exclude, not both");if(i)o=t;else{if(r)throw Error("Exclude not supported yet.");o=(0,l.range)(s)}const a={},u=this.positions,c=this.atomicNumbers;for(const t of o){let n=u[t],i=c[t];this.addAtom(t,n,i,a,e);let r=this.elementNames[i];this.elements[r]=[this.getColor(i),this.getRadii(i)]}}}createBonds(e="auto"){var n,i,r,o,s,a,u;if(!this.options.bonds.enabled)return;if(!this.updateBonds)return;this.bondFills=[],this.bonds.remove(...this.bonds.children);let l,c=this.getPositions();if(null===(r=null===(i=null===(n=this.options)||void 0===n?void 0:n.bonds)||void 0===i?void 0:i.material)||void 0===r?void 0:r.toon){const e=null===(u=null===(a=null===(s=null===(o=this.options)||void 0===o?void 0:o.bonds)||void 0===s?void 0:s.material)||void 0===a?void 0:a.toon)||void 0===u?void 0:u.tones,n=new Uint8Array(e);for(let t=0;t<=e;t++)n[t]=t/e*256;let i=new t.DataTexture(n,n.length,1,t.LuminanceFormat);i.minFilter=t.NearestFilter,i.magFilter=t.NearestFilter,i.generateMipmaps=!1,l=new t.MeshToonMaterial({color:this.options.bonds.color,gradientMap:i})}else l=new t.MeshPhongMaterial({color:this.options.bonds.color,shininess:this.options.bonds.material.phong.shininess});if(Array.isArray(e))for(let t of e){let e=t[0],n=t[1],i=c[e],r=c[n];this.addBond(e,n,i,r,l)}else if("auto"===e){let t=c.length;for(let e=0;e<t;++e)for(let n=0;n<t;++n)if(n>e){let t=c[e],i=c[n],r=this.atomNumbers[e],o=this.atomNumbers[n],s=i.clone().sub(t).length(),a=this.options.atoms.scale*this.getRadii(r),u=this.options.atoms.scale*this.getRadii(o);s<=1.1*this.options.bonds.threshold*(a+u)&&this.addBond(e,n,t,i,l)}}this.updateBonds=!1}almostEqual(t,e,n,i){let r=e-t;return Math.abs(n.clone().multiplyScalar(r).length())<i}addBond(e,n,i,r,o){let s=this.options.bonds.radius,a=this.options.bonds.smoothness,u=Math.ceil(360/(180-a)),l=this.createCylinder(i,r,s,u,o);l.name="fill",this.bondFills.push(l);let c=new t.Group;if(c.name="bond"+e+"-"+n,c.add(l),this.options.outline.enabled){let e=this.options.outline.size/s+1,n=new t.MeshBasicMaterial({color:this.options.outline.color,side:t.BackSide}),o=this.createCylinder(i,r,e*s,10,n);o.name="outline",c.add(o)}this.bonds.add(c)}addAtom(e,n,i,r,o){var s,a,u;if(!(i in r)){r[i]={};const e="covalent"===o.radius?this.getRadii(i):o.radius,n=o.scale*e;let f,p=o.smoothness,d=Math.ceil(360/(180-p)),v=this.getColor(i),g=new t.SphereGeometry(n,d,d);if(void 0!==(null===(s=null==o?void 0:o.material)||void 0===s?void 0:s.toon)){let e=null===(u=null===(a=null==o?void 0:o.material)||void 0===a?void 0:a.toon)||void 0===u?void 0:u.tones;for(var l=new Uint8Array(e),c=0;c<=e;c++)l[c]=c/e*256;var h=new t.DataTexture(l,l.length,1,t.LuminanceFormat);h.minFilter=t.NearestFilter,h.magFilter=t.NearestFilter,h.generateMipmaps=!1,f=new t.MeshToonMaterial({color:v,gradientMap:h})}else f=new t.MeshPhongMaterial({color:v,shininess:o.material.phong.shininess,opacity:o.opacity});const m=new t.Mesh(g,f);if(r[i].atom=m,this.options.outline.enabled){const e=this.options.outline.size/n+1,s=new t.SphereGeometry(n*e,d,d),a=new t.MeshBasicMaterial({color:this.options.outline.color,side:t.BackSide,opacity:o.opacity}),u=new t.Mesh(s,a);r[i].outline=u}}const f=r[i],p=new t.Vector3;p.copy(n);let d=new t.Group;d.name="atom"+e;let v=f.atom.clone();if(v.name="fill",d.add(v),this.options.outline.enabled){let t=f.outline.clone();this.atomOutlines.push(t),t.name="outline",d.add(t)}d.position.copy(p),this.atoms.add(d),this.atomFills.push(v),this.atomNumbers.push(i),this.updateBonds=!0}render(){const e=this.rootElement,n=e.clientWidth,i=e.clientHeight;let r=new t.Vector3(1,0,0),o=new t.Vector3(0,0,0),s=[r,o];for(let t=0;t<s.length;++t){let e=s[t];this.camera.localToWorld(e),e.project(this.camera),e.x=Math.round((e.x+1)*n/2),e.y=Math.round((1-e.y)*i/2)}let a=(new t.Vector3).subVectors(o,r).length(),u=8/Math.pow(a,.5);if(void 0!==this.axisLabels)for(let t=0;t<this.axisLabels.length;++t)this.axisLabels[t].scale.set(u,u,1);super.render()}getRepetitions(t,e){let n=t.length();return Math.max(Math.floor(e/n)-1,1)}}class h{constructor(t,e){this.vertex=null,this.prev=null,this.next=null,this.twin=null,this.face=null,this.vertex=t,this.face=e}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1}lengthSquared(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1}setTwin(t){return this.twin=t,t.twin=this,this}}class f{constructor(e,n,i){this.normal=new t.Vector3,this.midpoint=new t.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null;var r=new h(e,this),o=new h(n,this),s=new h(i,this);r.next=s.prev=o,o.next=r.prev=s,s.next=o.prev=r,this.edge=r,this.compute()}getEdge(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e}compute(){var e;void 0===e&&(e=new t.Triangle);var n=this.edge.tail(),i=this.edge.head(),r=this.edge.next.head();return e.set(n.point,i.point,r.point),e.getNormal(this.normal),e.getMidpoint(this.midpoint),this.area=e.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(t){return this.normal.dot(t)-this.constant}}const p=function(){var e,n,i,r=new t.Vector3;function o(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new a,this.unassigned=new a,this.vertices=[]}function s(t){this.point=t,this.prev=null,this.next=null,this.face=null}function a(){this.head=null,this.tail=null}return Object.assign(o.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.vertices.push(new s(t[e]));return this.compute(),this},setFromObject:function(e){var n=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var i,r,o,s=e.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(i=0,r=a.length;i<r;i++)(o=a[i].clone()).applyMatrix4(e.matrixWorld),n.push(o)}else if(s.isBufferGeometry){var u=s.attributes.position;if(void 0!==u)for(i=0,r=u.count;i<r;i++)(o=new t.Vector3).fromBufferAttribute(u,i).applyMatrix4(e.matrixWorld),n.push(o)}})),this.setFromPoints(n)},containsPoint:function(t){for(var e=this.faces,n=0,i=e.length;n<i;n++)if(e[n].distanceToPoint(t)>this.tolerance)return!1;return!0},intersectRay:function(t,e){for(var n=this.faces,i=-1/0,r=1/0,o=0,s=n.length;o<s;o++){var a=n[o],u=a.distanceToPoint(t.origin),l=a.normal.dot(t.direction);if(u>0&&l>=0)return null;var c=0!==l?-u/l:0;if(!(c<=0)&&(l>0?r=Math.min(c,r):i=Math.max(c,i),i>r))return null}return i!==-1/0?t.at(i,e):t.at(r,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,r)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var i=n;do{var r=i.next;e.distanceToPoint(i.point)>this.tolerance?this.addVertexToFace(i,e):this.unassigned.append(i),i=r}while(null!==i)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{for(var n=e.next,i=this.tolerance,r=null,o=0;o<t.length;o++){var s=t[o];if(0===s.mark){var a=s.distanceToPoint(e.point);if(a>i&&(i=a,r=s),i>1e3*this.tolerance)break}}null!==r&&this.addVertexToFace(e,r),e=n}while(null!==e)}return this},computeExtremes:function(){var e,n,i,r=new t.Vector3,o=new t.Vector3,s=[],a=[];for(e=0;e<3;e++)s[e]=a[e]=this.vertices[0];for(r.copy(this.vertices[0].point),o.copy(this.vertices[0].point),e=0,n=this.vertices.length;e<n;e++){var u=this.vertices[e],l=u.point;for(i=0;i<3;i++)l.getComponent(i)<r.getComponent(i)&&(r.setComponent(i,l.getComponent(i)),s[i]=u);for(i=0;i<3;i++)l.getComponent(i)>o.getComponent(i)&&(o.setComponent(i,l.getComponent(i)),a[i]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(r.x),Math.abs(o.x))+Math.max(Math.abs(r.y),Math.abs(o.y))+Math.max(Math.abs(r.z),Math.abs(o.z))),{min:s,max:a}},computeInitialHull:function(){void 0===e&&(e=new t.Line3,n=new t.Plane,i=new t.Vector3);var r,o,s,a,u,l,c,h,p,d=this.vertices,v=this.computeExtremes(),g=v.min,m=v.max,b=0,y=0;for(l=0;l<3;l++)(p=m[l].point.getComponent(l)-g[l].point.getComponent(l))>b&&(b=p,y=l);for(o=g[y],s=m[y],b=0,e.set(o.point,s.point),l=0,c=this.vertices.length;l<c;l++)(r=d[l])!==o&&r!==s&&(e.closestPointToPoint(r.point,!0,i),(p=i.distanceToSquared(r.point))>b&&(b=p,a=r));for(b=-1,n.setFromCoplanarPoints(o.point,s.point,a.point),l=0,c=this.vertices.length;l<c;l++)(r=d[l])!==o&&r!==s&&r!==a&&(p=Math.abs(n.distanceToPoint(r.point)))>b&&(b=p,u=r);var w=[];if(n.distanceToPoint(u.point)<0)for(w.push(new f(o,s,a),new f(u,s,o),new f(u,a,s),new f(u,o,a)),l=0;l<3;l++)h=(l+1)%3,w[l+1].getEdge(2).setTwin(w[0].getEdge(h)),w[l+1].getEdge(1).setTwin(w[h+1].getEdge(0));else for(w.push(new f(o,a,s),new f(u,o,s),new f(u,s,a),new f(u,a,o)),l=0;l<3;l++)h=(l+1)%3,w[l+1].getEdge(2).setTwin(w[0].getEdge((3-l)%3)),w[l+1].getEdge(0).setTwin(w[h+1].getEdge(1));for(l=0;l<4;l++)this.faces.push(w[l]);for(l=0,c=d.length;l<c;l++)if((r=d[l])!==o&&r!==s&&r!==a&&r!==u){b=this.tolerance;var _=null;for(h=0;h<4;h++)(p=this.faces[h].distanceToPoint(r.point))>b&&(b=p,_=this.faces[h]);null!==_&&this.addVertexToFace(r,_)}return this},reindexFaces:function(){for(var t=[],e=0;e<this.faces.length;e++){var n=this.faces[e];0===n.mark&&t.push(n)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,i=n.outside;do{var r=n.distanceToPoint(i.point);r>e&&(e=r,t=i),i=i.next}while(null!==i&&i.face===n);return t}},computeHorizon:function(t,e,n,i){var r;this.deleteFaceVertices(n),n.mark=1,r=null===e?e=n.getEdge(0):e.next;do{var o=r.twin,s=o.face;0===s.mark&&(s.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,o,s,i):i.push(r)),r=r.next}while(r!==e);return this},addAdjoiningFace:function(t,e){var n=new f(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];for(var n=null,i=null,r=0;r<e.length;r++){var o=e[r],s=this.addAdjoiningFace(t,o);null===n?n=s:s.next.setTwin(i),this.newFaces.push(s.face),i=s}return n.next.setTwin(i),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(a.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),o}();var d=n(591),v=n(301),g=n.n(v);class m extends u{setupScenes(){this.scenes=[],this.sceneZone=new t.Scene,this.scenes.push(this.sceneZone),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo)}setupLights(){const e=new t.DirectionalLight(16777215,.45);e.position.set(0,0,20),this.sceneZone.add(e);const n=new t.DirectionalLight(16777215,.3);n.position.set(-20,0,-20),this.sceneZone.add(n);const i=new t.DirectionalLight(16777215,.25);i.position.set(20,0,-20),this.sceneZone.add(i);const r=new t.AmbientLight(4210752,3.7);this.sceneZone.add(r)}load(t){var e,n,i,r,o,s;this.data=t,this.clear(),this.setup(),this.setupScenes(),this.setupLights(),this.setupCamera(),this.setupControls();const a=t.basis,u=t.segments,l=t.kpoints;return this.basis=t.basis,a&&u?(this.createBrillouinZone(a,u,l),void 0!==this.B&&this.alignView(null===(i=null===(n=null===(e=this.options)||void 0===e?void 0:e.layout)||void 0===n?void 0:n.viewRotation)||void 0===i?void 0:i.alignments),this.rotateView(null===(s=null===(o=null===(r=this.options)||void 0===r?void 0:r.layout)||void 0===o?void 0:o.viewRotation)||void 0===s?void 0:s.rotations),this.options.view.autoFit&&super.fitToCanvas(),this.render(),!0):(console.log("The data given for the Brillouin zone viewer is incomplete."),!1)}setOptions(t,e=!0,n=!0){var i,r,o;const s={controls:{rotateSpeed:40,enablePan:!1},view:{fitMargin:.075},basis:{offset:.02,font:"Arial",size:.03,stroke:{width:.06,color:"#000"},a:{label:"a"},b:{label:"b"},c:{label:"c"}},segments:{color:"#E56400",linewidth:.0025},kpoints:{point:{enabled:!0,size:.01,color:"#E56400"},label:{enabled:!0,font:"Arial",size:.025,color:"#E56400",offset2D:[0,-.75],stroke:{width:.06,color:"#000"}}},faces:{color:"#ddd",opacity:.7,outline:{width:.002,color:"#999"}}};0===Object.keys(this.options).length?(this.fillOptions(t,s),super.setOptions(s)):(this.fillOptions(t,this.options),super.setOptions(this.options),n&&void 0!==this.data&&this.load(this.data),void 0!==(null===(i=null==t?void 0:t.renderer)||void 0===i?void 0:i.background)&&this.setBackgroundColor(null===(r=null==t?void 0:t.renderer)||void 0===r?void 0:r.background.color,null===(o=null==t?void 0:t.renderer)||void 0===o?void 0:o.background.opacity),e&&this.render())}createBrillouinZone(e,n,i){var r,o,s,a,u,l,c,h,f,v,m,b,y,w,_,x,C,A,M,V,S;const z=new t.Matrix3,E=(new t.Vector3).fromArray(e[0]),k=(new t.Vector3).fromArray(e[1]),j=(new t.Vector3).fromArray(e[2]);z.set(E.x,k.x,j.x,E.y,k.y,j.y,E.z,k.z,j.z),this.basisVectors=[E,k,j],this.B=z;const P=(new t.Matrix3).identity(),O=[];for(let e=-1;e<=1;++e)for(let n=-1;n<=1;++n)for(let i=-1;i<=1;++i){const r=new t.Vector3(e,n,i),o=this.coordinateTransform(this.B,P,r,!1);O.push(o.toArray())}const L=g()(O);let T;for(const e of L.cells){const n=[];let i=!0,r=!0;for(const t of e){if(-1===t){i=!1;break}const e=L.positions[t];for(let t=0;t<3;++t)if(Number.isNaN(e[t])){r=!1;break}n.push(e)}if(!i||!r)continue;const o=new t.Vector3(0,0,0),s=[];for(let e=0;e<n.length;++e){const i=(new t.Vector3).fromArray(n[e]);s.push(i),o.add(i)}if(o.divideScalar(s.length),o.length()<1e-7){T=s;break}}this.zone=new t.Object3D,this.zone.name="zone",this.sceneZone.add(this.zone),this.info=new t.Object3D,this.info.name="info",this.sceneInfo.add(this.info);const{geometry:R,faces:B}=function(e){const n=new t.BufferGeometry,i=[],r=[],o=(new p).setFromPoints(e).faces;for(let t=0;t<o.length;t++){const e=o[t];let n=e.edge;do{const t=n.head().point;i.push(t.x,t.y,t.z),r.push(e.normal.x,e.normal.y,e.normal.z),n=n.next}while(n!==e.edge)}n.setAttribute("position",new t.Float32BufferAttribute(i,3)),n.setAttribute("normal",new t.Float32BufferAttribute(r,3));const s=[],a=new Set(o);for(let t of a){const e=[],n=t.edge;let i=t.edge;e.push(n.tail().point);do{const n=t.normal,r=i.twin.face,o=r.normal;Math.abs(n.dot(o)-1)<=1e-8?(t=r,i=i.twin.next):(e.push(i.head().point),i=i.next),a.delete(t)}while(i!==n);s.push(e)}return{geometry:n,faces:s}}(T),F=new t.Group;F.name="group";const D=new t.MeshPhongMaterial({color:this.options.faces.color,opacity:this.options.faces.opacity,transparent:!0}),W=new t.Mesh(R,D);W.name="innermesh",W.material.side=t.BackSide,W.renderOrder=0,F.add(W);const I=new t.Mesh(R,D.clone());I.name="outermesh",I.material.side=t.FrontSide,I.renderOrder=1,F.add(I),this.zone.add(F);const N=this.options.faces.outline.width,U=new d.MeshLineMaterial({color:this.options.faces.outline.color,lineWidth:N,sizeAttenuation:!0});for(const e of B){const n=[];for(const t of e){let e=t.clone();const i=e.length();e=e.multiplyScalar(1+.5*N/i),n.push(e)}const i=new d.MeshLine;i.setPoints(n);const r=new t.Mesh(i,U);this.zone.add(r)}const H=[this.options.basis.a.label,this.options.basis.b.label,this.options.basis.c.label],Z=[];Z.push(void 0===(null===(r=this.options.basis.a)||void 0===r?void 0:r.font)?this.options.basis.font:this.options.basis.a.font),Z.push(void 0===(null===(o=this.options.basis.b)||void 0===o?void 0:o.font)?this.options.basis.font:this.options.basis.b.font),Z.push(void 0===(null===(s=this.options.basis.c)||void 0===s?void 0:s.font)?this.options.basis.font:this.options.basis.c.font);const G=[];G.push(void 0===(null===(a=this.options.basis.a)||void 0===a?void 0:a.size)?this.options.basis.size:this.options.basis.a.size),G.push(void 0===(null===(u=this.options.basis.b)||void 0===u?void 0:u.size)?this.options.basis.size:this.options.basis.b.size),G.push(void 0===(null===(l=this.options.basis.c)||void 0===l?void 0:l.size)?this.options.basis.size:this.options.basis.c.size);const q=[];q.push(void 0===(null===(c=this.options.basis.a)||void 0===c?void 0:c.color)?this.options.basis.color:this.options.basis.a.color),q.push(void 0===(null===(h=this.options.basis.b)||void 0===h?void 0:h.color)?this.options.basis.color:this.options.basis.b.color),q.push(void 0===(null===(f=this.options.basis.c)||void 0===f?void 0:f.color)?this.options.basis.color:this.options.basis.c.color);const $=[];$.push(void 0===(null===(m=null===(v=this.options.basis.a)||void 0===v?void 0:v.stroke)||void 0===m?void 0:m.color)?this.options.basis.stroke.color:this.options.basis.a.stroke.color),$.push(void 0===(null===(y=null===(b=this.options.basis.b)||void 0===b?void 0:b.stroke)||void 0===y?void 0:y.color)?this.options.basis.stroke.color:this.options.basis.b.stroke.color),$.push(void 0===(null===(_=null===(w=this.options.basis.c)||void 0===w?void 0:w.stroke)||void 0===_?void 0:_.color)?this.options.basis.stroke.color:this.options.basis.c.stroke.color);const X=[];X.push(void 0===(null===(C=null===(x=this.options.basis.a)||void 0===x?void 0:x.stroke)||void 0===C?void 0:C.width)?this.options.basis.stroke.width:this.options.basis.a.stroke.width),X.push(void 0===(null===(M=null===(A=this.options.basis.b)||void 0===A?void 0:A.stroke)||void 0===M?void 0:M.width)?this.options.basis.stroke.width:this.options.basis.b.stroke.width),X.push(void 0===(null===(S=null===(V=this.options.basis.c)||void 0===V?void 0:V.stroke)||void 0===S?void 0:S.width)?this.options.basis.stroke.width:this.options.basis.c.stroke.width);for(let n=0;n<3;++n){const i=.7,r=e[n],o=new t.Vector3(0,0,0),s=(new t.Vector3).fromArray(r).multiplyScalar(i),a=[o,s],u=new d.MeshLineMaterial({color:"#000",lineWidth:75e-5,sizeAttenuation:!0,dashArray:.05,transparent:!0,depthTest:!1}),l=new d.MeshLine;l.setPoints(a);const c=new t.Mesh(l,u);this.info.add(c);const h=(new t.Vector3).copy(s).multiplyScalar(1+this.options.basis.offset/s.length()),f=H[n],p=q[n],v=Z[n],g=G[n],m=X[n],b=$[n],y=this.createLabel(h,f,p,v,g,new t.Vector2(0,0),m,b);this.info.add(y);const w=new t.CylinderGeometry(0,.003,.012,12),_=new t.MeshBasicMaterial({color:0}),x=new t.Mesh(w,_);x.position.copy(s),x.lookAt(new t.Vector3),x.rotateX(-Math.PI/2),this.info.add(x)}const Y=new d.MeshLineMaterial({color:this.options.segments.color,lineWidth:this.options.segments.linewidth,sizeAttenuation:!0}),K=[];for(let e=0;e<n.length;++e){const i=[],r=n[e];for(const e of r){const n=(new t.Vector3).fromArray(e),r=this.coordinateTransform(this.B,P,n,!1);i.push(r),i.push(r),K.push(r)}const o=new d.MeshLine;o.setPoints(i);const s=new t.Mesh(o,Y);this.info.add(s)}this.labelPoints=new t.Object3D;for(const e of K){const n=new t.Object3D;n.position.copy(e),this.labelPoints.add(n)}if(this.info.add(this.labelPoints),i)for(const e of i){const n=e[0],i=(new t.Vector3).fromArray(e[1]),r=this.coordinateTransform(this.B,P,i,!1);if(this.options.kpoints.point.enabled){const t=this.createCircle(r,this.options.kpoints.point.size,this.options.kpoints.point.color);this.info.add(t)}if(this.options.kpoints.label.enabled){const e=this.createLabel(r,n,this.options.kpoints.label.color,this.options.kpoints.label.font,this.options.kpoints.label.size,(new t.Vector2).fromArray(this.options.kpoints.label.offset2D),this.options.kpoints.label.stroke.width,this.options.kpoints.label.stroke.width);this.info.add(e)}}}getCornerPoints(){const e=this.zone.getObjectByName("group").getObjectByName("outermesh");e.updateMatrixWorld();const n=[],i=e.geometry.attributes.position.array,r=i.length/3;for(let e=0;e<r;++e)n.push((new t.Vector3).fromArray(i,3*e));const o=[];for(let t=0;t<r;++t){const i=n[t];o.push(e.localToWorld(i))}return{points:o,margin:0}}rotateView(e,n=!0){if(void 0!==e){for(const n of e){const e=new t.Vector3(n[0],n[1],n[2]);e.normalize();const i=n[3]/180*Math.PI;this.rotateAroundWorldAxis(this.zone,e,i),this.rotateAroundWorldAxis(this.info,e,i)}n&&this.render()}}alignView(e,n=!0){const i=new t.Vector3,r=this.labelPoints.children.length;for(let e=0;e<r;++e){const n=this.labelPoints.children[e];i.add(n.getWorldPosition(new t.Vector3))}const o={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate(),segments:i},s=[this.zone,this.info];super.alignView(e,o,s,n)}createCircle(e,n,i){const r=document.createElement("canvas");r.width=256,r.height=256;const o=r.getContext("2d");o.beginPath(),o.arc(128,128,128,0,2*Math.PI),o.fillStyle=i,o.fill();const s=new t.Texture(r);s.needsUpdate=!0;const a=new t.SpriteMaterial({map:s}),u=new t.Sprite(a);u.scale.set(n,n,1);const l=new t.Object3D;return l.position.copy(e),l.add(u),l}}})(),materia=i})();