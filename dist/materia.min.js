/*! For license information please see materia.min.js.LICENSE.txt */
var materia;(()=>{var t={746:(t,e)=>{"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},645:(t,e,n)=>{"use strict";var r=n(841),i=n(489);function o(t,e){for(var n=0,r=t.length,i=0;i<r;++i)n+=t[i]*e[i];return n}function s(t){var e=t.length;if(0===e)return[];t[0].length;var n=r([t.length+1,t.length+1],1),s=r([t.length+1],1);n[e][e]=0;for(var a=0;a<e;++a){for(var u=0;u<=a;++u)n[u][a]=n[a][u]=2*o(t[a],t[u]);s[a]=o(t[a],t[a])}var c=i(n,s),l=0,h=c[e+1];for(a=0;a<h.length;++a)l+=h[a];var f=new Array(e);for(a=0;a<e;++a){h=c[a];var p=0;for(u=0;u<h.length;++u)p+=h[u];f[a]=p/l}return f}function a(t){if(0===t.length)return[];for(var e=t[0].length,n=r([e]),i=s(t),o=0;o<t.length;++o)for(var a=0;a<e;++a)n[a]+=t[o][a]*i[o];return n}a.barycenetric=s,t.exports=a},930:(t,e,n)=>{"use strict";var r=n(293),i=n(706);function o(t,e){this.point=t,this.index=e}function s(t,e){for(var n=t.point,r=e.point,i=n.length,o=0;o<i;++o){var s=r[o]-n[o];if(s)return s}return 0}t.exports=function(t,e){var n=t.length;if(0===n)return[];var a=t[0].length;if(a<1)return[];if(1===a)return function(t,e,n){if(1===t)return n?[[-1,0]]:[];var r=e.map((function(t,e){return[t[0],e]}));r.sort((function(t,e){return t[0]-e[0]}));for(var i=new Array(t-1),o=1;o<t;++o){var s=r[o-1],a=r[o];i[o-1]=[s[1],a[1]]}return n&&i.push([-1,i[0][1]],[i[t-1][1],-1]),i}(n,t,e);for(var u=new Array(n),c=1,l=0;l<n;++l){for(var h=t[l],f=new Array(a+1),p=0,d=0;d<a;++d){var v=h[d];f[d]=v,p+=v*v}f[a]=p,u[l]=new o(f,l),c=Math.max(p,c)}i(u,s),n=u.length;var g=new Array(n+a+1),m=new Array(n+a+1),y=(a+1)*(a+1)*c,b=new Array(a+1);for(l=0;l<=a;++l)b[l]=0;for(b[a]=y,g[0]=b.slice(),m[0]=-1,l=0;l<=a;++l)(f=b.slice())[l]=1,g[l+1]=f,m[l+1]=-1;for(l=0;l<n;++l){var w=u[l];g[l+a+1]=w.point,m[l+a+1]=w.index}var _=r(g,!1);if(_=e?_.filter((function(t){for(var e=0,n=0;n<=a;++n){var r=m[t[n]];if(r<0&&++e>=2)return!1;t[n]=r}return!0})):_.filter((function(t){for(var e=0;e<=a;++e){var n=m[t[e]];if(n<0)return!1;t[e]=n}return!0})),1&a)for(l=0;l<_.length;++l)f=(w=_[l])[0],w[0]=w[1],w[1]=f;return _}},841:t=>{"use strict";function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,s=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)s[o]=n;else for(o=0;o<i;++o)s[o]=e(t,n,r+1);return s}t.exports=function(t,n){switch(void 0===n&&(n=0),typeof t){case"number":if(t>0)return function(t,e){var n,r;for(n=new Array(t),r=0;r<t;++r)n[r]=e;return n}(0|t,n);break;case"object":if("number"==typeof t.length)return e(t,n,0)}return[]}},293:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var i=t[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var s=t.slice(0,i+1),a=r.apply(void 0,s);if(0===a)throw new Error("Input not in general position");for(var u=new Array(i+1),l=0;l<=i;++l)u[l]=l;a<0&&(u[0]=1,u[1]=0);var h=new o(u,new Array(i+1),!1),f=h.adjacent,p=new Array(i+2);for(l=0;l<=i;++l){for(var d=u.slice(),v=0;v<=i;++v)v===l&&(d[v]=-1);var g=d[0];d[0]=d[1],d[1]=g;var m=new o(d,new Array(i+1),!0);f[l]=m,p[l]=m}for(p[i+1]=h,l=0;l<=i;++l){d=f[l].vertices;var y=f[l].adjacent;for(v=0;v<=i;++v){var b=d[v];if(b<0)y[v]=h;else for(var w=0;w<=i;++w)f[w].vertices.indexOf(b)<0&&(y[v]=f[w])}}var _=new c(i,s,p),x=!!e;for(l=i+1;l<n;++l)_.insert(t[l],x);return _.boundary()};var r=n(146),i=n(572).H;function o(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function s(t,e,n){this.vertices=t,this.cell=e,this.index=n}function a(t,e){return i(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function c(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var o=u[t];o||(o=u[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var i=new Function("test",e.join("")),o=r[t+1];return o||(o=r),i(o)}(t)),this.orient=o}var l=c.prototype;l.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-r;s.length>0;){(t=s.pop()).vertices;for(var a=t.adjacent,u=0;u<=n;++u){var c=a[u];if(c.boundary&&!(c.lastVisited<=-r)){for(var l=c.vertices,h=0;h<=n;++h){var f=l[h];i[h]=f<0?e:o[f]}var p=this.orient();if(p>0)return c;c.lastVisited=-r,0===p&&s.push(c)}}}return null},l.walk=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var u=a.vertices,c=a.adjacent,l=0;l<=r;++l)o[l]=i[u[l]];for(a.lastVisited=n,l=0;l<=r;++l){var h=c[l];if(!(h.lastVisited>=n)){var f=o[l];o[l]=t;var p=this.orient();if(o[l]=f,p<0){a=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return a},l.addPeaks=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,u=this.tuple,c=this.interior,l=this.simplices,h=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,c.push(e);for(var f=[];h.length>0;){var p=(e=h.pop()).vertices,d=e.adjacent,v=p.indexOf(n);if(!(v<0))for(var g=0;g<=r;++g)if(g!==v){var m=d[g];if(m.boundary&&!(m.lastVisited>=n)){var y=m.vertices;if(m.lastVisited!==-n){for(var b=0,w=0;w<=r;++w)y[w]<0?(b=w,u[w]=t):u[w]=i[y[w]];if(this.orient()>0){y[b]=n,m.boundary=!1,c.push(m),h.push(m),m.lastVisited=n;continue}m.lastVisited=-n}var _=m.adjacent,x=p.slice(),A=d.slice(),E=new o(x,A,!0);l.push(E);var M=_.indexOf(e);if(!(M<0))for(_[M]=E,A[v]=m,x[g]=-1,A[g]=e,d[g]=E,E.flip(),w=0;w<=r;++w){var C=x[w];if(!(C<0||C===n)){for(var S=new Array(r-1),j=0,k=0;k<=r;++k){var V=x[k];V<0||k===w||(S[j++]=V)}f.push(new s(S,E,w))}}}}}for(f.sort(a),g=0;g+1<f.length;g+=2){var z=f[g],L=f[g+1],B=z.index,O=L.index;B<0||O<0||(z.cell.adjacent[z.index]=L.cell,L.cell.adjacent[L.index]=z.cell)}},l.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var i=this.dimension,o=this.tuple,s=0;s<=i;++s){var a=r.vertices[s];o[s]=a<0?t:n[a]}var u=this.orient(o);u<0||(0!==u||(r=this.handleBoundaryDegeneracy(r,t)))&&this.addPeaks(t,r)}},l.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,r=n.length,i=0;i<r;++i){var o=n[i];if(o.boundary){for(var s=new Array(t),a=o.vertices,u=0,c=0,l=0;l<=t;++l)a[l]>=0?s[u++]=a[l]:c=1&l;if(c===(1&t)){var h=s[0];s[0]=s[1],s[1]=h}e.push(s)}}return e}},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],v="[object Arguments]",g="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",_="[object GeneratorFunction]",x="[object Map]",A="[object Number]",E="[object Object]",M="[object Promise]",C="[object RegExp]",S="[object Set]",j="[object String]",k="[object Symbol]",V="[object WeakMap]",z="[object ArrayBuffer]",L="[object DataView]",B="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",T="[object Uint8Array]",F="[object Uint8ClampedArray]",R="[object Uint16Array]",U="[object Uint32Array]",N=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,q=RegExp(H.source),$=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="["+Et+"]",Ct="["+_t+"]",St="\\d+",jt="["+xt+"]",kt="[^\\ud800-\\udfff"+Et+St+"\\u2700-\\u27bf"+xt+At+"]",Vt="\\ud83c[\\udffb-\\udfff]",zt="[^\\ud800-\\udfff]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+At+"]",Pt="(?:"+jt+"|"+kt+")",It="(?:"+Ot+"|"+kt+")",Dt="(?:['’](?:d|ll|m|re|s|t|ve))?",Tt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ft="(?:"+Ct+"|"+Vt+")?",Rt="[\\ufe0e\\ufe0f]?",Ut=Rt+Ft+"(?:\\u200d(?:"+[zt,Lt,Bt].join("|")+")"+Rt+Ft+")*",Nt="(?:"+["[\\u2700-\\u27bf]",Lt,Bt].join("|")+")"+Ut,Wt="(?:"+[zt+Ct+"?",Ct,Lt,Bt,"[\\ud800-\\udfff]"].join("|")+")",Gt=RegExp("['’]","g"),Ht=RegExp(Ct,"g"),Yt=RegExp(Vt+"(?="+Vt+")|"+Wt+Ut,"g"),qt=RegExp([Ot+"?"+jt+"+"+Dt+"(?="+[Mt,Ot,"$"].join("|")+")",It+"+"+Tt+"(?="+[Mt,Ot+Pt,"$"].join("|")+")",Ot+"?"+Pt+"+"+Dt,Ot+"+"+Tt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",St,Nt].join("|"),"g"),$t=RegExp("[\\u200d\\ud800-\\udfff"+_t+"\\ufe0e\\ufe0f]"),Zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Jt={};Jt[B]=Jt[O]=Jt[P]=Jt[I]=Jt[D]=Jt[T]=Jt[F]=Jt[R]=Jt[U]=!0,Jt[v]=Jt[g]=Jt[z]=Jt[m]=Jt[L]=Jt[y]=Jt[b]=Jt[w]=Jt[x]=Jt[A]=Jt[E]=Jt[C]=Jt[S]=Jt[j]=Jt[V]=!1;var Qt={};Qt[v]=Qt[g]=Qt[z]=Qt[L]=Qt[m]=Qt[y]=Qt[B]=Qt[O]=Qt[P]=Qt[I]=Qt[D]=Qt[x]=Qt[A]=Qt[E]=Qt[C]=Qt[S]=Qt[j]=Qt[k]=Qt[T]=Qt[F]=Qt[R]=Qt[U]=!0,Qt[b]=Qt[w]=Qt[V]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,ue=ae&&ae.exports===se,ce=ue&&re.process,le=function(){try{return ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=le&&le.isArrayBuffer,fe=le&&le.isDate,pe=le&&le.isMap,de=le&&le.isRegExp,ve=le&&le.isSet,ge=le&&le.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ae(t,e){return!(null==t||!t.length)&&Be(t,e,0)>-1}function Ee(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Me(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Se(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function je(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ve=De("length");function ze(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Le(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Be(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Le(t,Pe,n)}function Oe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Pe(t){return t!=t}function Ie(t,e){var n=null==t?0:t.length;return n?Re(t,e)/n:f}function De(t){return function(e){return null==e?i:e[t]}}function Te(t){return function(e){return null==t?i:t[e]}}function Fe(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Re(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ne(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function We(t){return function(e){return t(e)}}function Ge(t,e){return Me(e,(function(e){return t[e]}))}function He(t,e){return t.has(e)}function Ye(t,e){for(var n=-1,r=t.length;++n<r&&Be(e,t[n],0)>-1;);return n}function qe(t,e){for(var n=t.length;n--&&Be(e,t[n],0)>-1;);return n}function $e(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ze=Te({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xe=Te({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ke(t){return"\\"+te[t]}function Je(t){return $t.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Yt.lastIndex=0;Yt.test(t);)++e;return e}(t):Ve(t)}function sn(t){return Je(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var un=Te({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Xt))).Array,it=e.Date,_t=e.Error,xt=e.Function,At=e.Math,Et=e.Object,Mt=e.RegExp,Ct=e.String,St=e.TypeError,jt=r.prototype,kt=xt.prototype,Vt=Et.prototype,zt=e["__core-js_shared__"],Lt=kt.toString,Bt=Vt.hasOwnProperty,Ot=0,Pt=(n=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",It=Vt.toString,Dt=Lt.call(Et),Tt=oe._,Ft=Mt("^"+Lt.call(Bt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=ue?e.Buffer:i,Ut=e.Symbol,Nt=e.Uint8Array,Wt=Rt?Rt.allocUnsafe:i,Yt=tn(Et.getPrototypeOf,Et),$t=Et.create,te=Vt.propertyIsEnumerable,re=jt.splice,ie=Ut?Ut.isConcatSpreadable:i,se=Ut?Ut.iterator:i,ae=Ut?Ut.toStringTag:i,ce=function(){try{var t=co(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Ve=it&&it.now!==oe.Date.now&&it.now,Te=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=At.ceil,hn=At.floor,fn=Et.getOwnPropertySymbols,pn=Rt?Rt.isBuffer:i,dn=e.isFinite,vn=jt.join,gn=tn(Et.keys,Et),mn=At.max,yn=At.min,bn=it.now,wn=e.parseInt,_n=At.random,xn=jt.reverse,An=co(e,"DataView"),En=co(e,"Map"),Mn=co(e,"Promise"),Cn=co(e,"Set"),Sn=co(e,"WeakMap"),jn=co(Et,"create"),kn=Sn&&new Sn,Vn={},zn=Fo(An),Ln=Fo(En),Bn=Fo(Mn),On=Fo(Cn),Pn=Fo(Sn),In=Ut?Ut.prototype:i,Dn=In?In.valueOf:i,Tn=In?In.toString:i;function Fn(t){if(na(t)&&!Hs(t)&&!(t instanceof Wn)){if(t instanceof Nn)return t;if(Bt.call(t,"__wrapped__"))return Ro(t)}return new Nn(t)}var Rn=function(){function t(){}return function(e){if(!ea(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function Nn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Yn;++e<n;)this.add(t[e])}function $n(t){var e=this.__data__=new Hn(t);this.size=e.size}function Zn(t,e){var n=Hs(t),r=!n&&Gs(t),i=!n&&!r&&Zs(t),o=!n&&!r&&!i&&la(t),s=n||r||i||o,a=s?Ue(t.length,Ct):[],u=a.length;for(var c in t)!e&&!Bt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,u))||a.push(c);return a}function Xn(t){var e=t.length;return e?t[Yr(0,e-1)]:i}function Kn(t,e){return Oo(Si(t),sr(e,0,t.length))}function Jn(t){return Oo(Si(t))}function Qn(t,e,n){(n!==i&&!Us(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Bt.call(t,e)&&Us(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Us(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&ji(e,La(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Sa(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=Hs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Bt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Si(t,a)}else{var f=fo(t),p=f==w||f==_;if(Zs(t))return _i(t,u);if(f==E||f==v||p&&!o){if(a=c||p?{}:vo(t),!u)return c?function(t,e){return ji(t,ho(t),e)}(t,function(t,e){return t&&ji(e,Ba(e),t)}(a,t)):function(t,e){return ji(t,lo(t),e)}(t,rr(a,t))}else{if(!Qt[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case z:return xi(t);case m:case y:return new i(+t);case L:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case B:case O:case P:case I:case D:case T:case F:case R:case U:return Ai(t,n);case x:return new i;case A:case j:return new i(t);case C:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new i;case k:return r=t,Dn?Et(Dn.call(r)):{}}}(t,f,u)}}s||(s=new $n);var d=s.get(t);if(d)return d;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var g=h?i:(l?c?no:eo:c?Ba:La)(t);return be(g||t,(function(r,i){g&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new St(o);return Vo((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Ae,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Me(e,We(n))),r?(o=Ee,s=!1):e.length>=200&&(o=He,s=!1,e=new qn(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Fn.templateSettings={escape:Z,evaluate:X,interpolate:K,variable:"",imports:{_:Fn}},Fn.prototype=Un.prototype,Fn.prototype.constructor=Fn,Nn.prototype=Rn(Un.prototype),Nn.prototype.constructor=Nn,Wn.prototype=Rn(Un.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=jn?jn(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(jn){var n=e[t];return n===s?i:n}return Bt.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return jn?e[t]!==i:Bt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jn&&e===i?s:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return er(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(En||Hn),string:new Gn}},Yn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Yn.prototype.get=function(t){return ao(this,t).get(t)},Yn.prototype.has=function(t){return ao(this,t).has(t)},Yn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,s),this},qn.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.clear=function(){this.__data__=new Hn,this.size=0},$n.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$n.prototype.get=function(t){return this.__data__.get(t)},$n.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(t,e),this.size=n.size,this};var hr=zi(br),fr=zi(wr,!0);function pr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!ca(a):n(a,u)))var u=a,c=s}return c}function vr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=go),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Ce(i,a):r||(i[i.length]=a)}return i}var mr=Li(),yr=Li(!0);function br(t,e){return t&&mr(t,e,La)}function wr(t,e){return t&&yr(t,e,La)}function _r(t,e){return xe(e,(function(e){return Js(t[e])}))}function xr(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[To(e[n++])];return n&&n==r?t:i}function Ar(t,e,n){var r=e(t);return Hs(t)?r:Ce(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in Et(t)?function(t){var e=Bt.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=It.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return It.call(t)}(t)}function Mr(t,e){return t>e}function Cr(t,e){return null!=t&&Bt.call(t,e)}function Sr(t,e){return null!=t&&e in Et(t)}function jr(t,e,n){for(var o=n?Ee:Ae,s=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Me(f,We(e))),l=yn(f.length,l),c[u]=!n&&(e||s>=120&&f.length>=120)?new qn(u&&f):i}f=t[0];var p=-1,d=c[0];t:for(;++p<s&&h.length<l;){var v=f[p],g=e?e(v):v;if(v=n||0!==v?v:0,!(d?He(d,g):o(h,g,n))){for(u=a;--u;){var m=c[u];if(!(m?He(m,g):o(t[u],g,n)))continue t}d&&d.push(g),h.push(v)}}return h}function kr(t,e,n){var r=null==(t=Co(t,e=mi(e,t)))?t:t[To(Ko(e))];return null==r?i:me(r,t,n)}function Vr(t){return na(t)&&Er(t)==v}function zr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Hs(t),u=Hs(e),c=a?g:fo(t),l=u?g:fo(e),h=(c=c==v?E:c)==E,f=(l=l==v?E:l)==E,p=c==l;if(p&&Zs(t)){if(!Zs(e))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new $n),a||la(t)?Qi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case z:return!(t.byteLength!=e.byteLength||!o(new Nt(t),new Nt(e)));case m:case y:case A:return Us(+t,+e);case b:return t.name==e.name&&t.message==e.message;case C:case j:return t==e+"";case x:var a=Qe;case S:var u=1&r;if(a||(a=nn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Qi(a(t),a(e),r,i,o,s);return s.delete(t),l;case k:if(Dn)return Dn.call(t)==Dn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var d=h&&Bt.call(t,"__wrapped__"),w=f&&Bt.call(e,"__wrapped__");if(d||w){var _=d?t.value():t,M=w?e.value():e;return s||(s=new $n),o(_,M,n,r,s)}}return!!p&&(s||(s=new $n),function(t,e,n,r,o,s){var a=1&n,u=eo(t),c=u.length;if(c!=eo(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Bt.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var d=!0;s.set(t,e),s.set(e,t);for(var v=a;++l<c;){var g=t[h=u[l]],m=e[h];if(r)var y=a?r(m,g,h,e,t,s):r(g,m,h,t,e,s);if(!(y===i?g===m||o(g,m,n,r,s):y)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,r,o,s))}(t,e,n,r,zr,o))}function Lr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=Et(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new $n;if(r)var p=r(l,h,c,t,e,f);if(!(p===i?zr(h,l,3,r,f):p))return!1}}return!0}function Br(t){return!(!ea(t)||(e=t,Pt&&Pt in e))&&(Js(t)?Ft:vt).test(Fo(t));var e}function Or(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Hs(t)?Fr(t[0],t[1]):Tr(t):pu(t)}function Pr(t){if(!xo(t))return gn(t);var e=[];for(var n in Et(t))Bt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ir(t,e){return t<e}function Dr(t,e){var n=-1,i=qs(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Tr(t){var e=uo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Fr(t,e){return bo(t)&&Ao(e)?Eo(To(t),e):function(n){var r=Sa(n,t);return r===i&&r===e?ja(n,t):zr(e,r,3)}}function Rr(t,e,n,r,o){t!==e&&mr(e,(function(s,a){if(o||(o=new $n),ea(s))!function(t,e,n,r,o,s,a){var u=jo(t,n),c=jo(e,n),l=a.get(c);if(l)Qn(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):i,f=h===i;if(f){var p=Hs(c),d=!p&&Zs(c),v=!p&&!d&&la(c);h=c,p||d||v?Hs(u)?h=u:$s(u)?h=Si(u):d?(f=!1,h=_i(c,!0)):v?(f=!1,h=Ai(c,!0)):h=[]:oa(c)||Gs(c)?(h=u,Gs(u)?h=ya(u):ea(u)&&!Js(u)||(h=vo(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Qn(t,n,h)}}(t,e,a,n,Rr,r,o);else{var u=r?r(jo(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Qn(t,a,u)}}),Ba)}function Ur(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function Nr(t,e,n){e=e.length?Me(e,(function(t){return Hs(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Me(e,We(so()));var i=Dr(t,(function(t,n,i){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ei(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Wr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=xr(t,s);n(a,s)&&Kr(o,mi(s,t),a)}return o}function Gr(t,e,n,r){var i=r?Oe:Be,o=-1,s=e.length,a=t;for(t===e&&(e=Si(e)),n&&(a=Me(t,We(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&re.call(a,u,1),re.call(t,u,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?re.call(t,i,1):ci(t,i)}}return t}function Yr(t,e){return t+hn(_n()*(e-t+1))}function qr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function $r(t,e){return zo(Mo(t,e,iu),t+"")}function Zr(t){return Xn(Ua(t))}function Xr(t,e){var n=Ua(t);return Oo(n,sr(e,0,n.length))}function Kr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=mi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=To(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=ea(h)?h:mo(e[o+1])?[]:{})}tr(u,c,l),u=u[c]}return t}var Jr=kn?function(t,e){return kn.set(t,e),t}:iu,Qr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Oo(Ua(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ca(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=ca(e),l=e===i;o<s;){var h=hn((o+s)/2),f=n(t[h]),p=f!==i,d=null===f,v=f==f,g=ca(f);if(a)var m=r||v;else m=l?v&&(r||p):u?v&&p&&(r||!d):c?v&&p&&!d&&(r||!g):!d&&!g&&(r?f<=e:f<e);m?o=h+1:s=h}return yn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Us(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ca(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Hs(t))return Me(t,ai)+"";if(ca(t))return Tn?Tn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Ae,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Ee;else if(o>=200){var c=e?null:qi(t);if(c)return nn(c);s=!1,i=He,u=new qn}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ci(t,e){return null==(t=Co(t,e=mi(e,t)))||delete t[To(Ko(e))]}function li(t,e,n,r){return Kr(t,e,n(xr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Se(e,(function(t,e){return e.func.apply(e.thisArg,Ce([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=lr(s[o]||a,t[u],e,n));return ui(gr(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function vi(t){return $s(t)?t:[]}function gi(t){return"function"==typeof t?t:iu}function mi(t,e){return Hs(t)?t:bo(t,e)?[t]:Do(ba(t))}var yi=$r;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var wi=le||function(t){return oe.clearTimeout(t)};function _i(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Nt(e).set(new Nt(t)),e}function Ai(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ca(t),a=e!==i,u=null===e,c=e==e,l=ca(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Mi(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,l=mn(s-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function Ci(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,h=mn(s-u,0),f=r(h+l),p=!i;++o<h;)f[o]=t[o];for(var d=o;++c<l;)f[d+c]=e[c];for(;++a<u;)(p||o<s)&&(f[d+n[a]]=t[o++]);return f}function Si(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ji(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?ir(n,u,c):tr(n,u,c)}return n}function ki(t,e){return function(n,r){var i=Hs(n)?ye:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function Vi(t){return $r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&yo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=Et(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}function zi(t,e){return function(n,r){if(null==n)return n;if(!qs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Et(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Li(t){return function(e,n,r){for(var i=-1,o=Et(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Bi(t){return function(e){var n=Je(e=ba(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function Oi(t){return function(e){return Se(Ja(Ga(e).replace(Gt,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Rn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Ii(t){return function(e,n,r){var o=Et(e);if(!qs(e)){var s=so(n,3);e=La(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Di(t){return to((function(e){var n=e.length,r=n,s=Nn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new St(o);if(s&&!u&&"wrapper"==io(a))var u=new Nn([],!0)}for(r=u?r:n;++r<n;){var c=io(a=e[r]),l="wrapper"==c?ro(a):i;u=l&&wo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[io(l[0])].apply(u,l[3]):1==a.length&&wo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Hs(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ti(t,e,n,o,s,a,u,l,h,f){var p=e&c,d=1&e,v=2&e,g=24&e,m=512&e,y=v?i:Pi(t);return function i(){for(var c=arguments.length,b=r(c),w=c;w--;)b[w]=arguments[w];if(g)var _=oo(i),x=$e(b,_);if(o&&(b=Mi(b,o,s,g)),a&&(b=Ci(b,a,u,g)),c-=x,g&&c<f){var A=en(b,_);return Hi(t,e,Ti,i.placeholder,n,b,A,l,h,f-c)}var E=d?n:this,M=v?E[t]:t;return c=b.length,l?b=So(b,l):m&&c>1&&b.reverse(),p&&h<c&&(b.length=h),this&&this!==oe&&this instanceof i&&(M=y||Pi(M)),M.apply(E,b)}}function Fi(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ri(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function Ui(t){return to((function(e){return e=Me(e,We(so())),$r((function(n){var r=this;return t(e,(function(t){return me(t,r,n)}))}))}))}function Ni(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?qr(e,t):e;var r=qr(e,ln(t/on(e)));return Je(e)?bi(sn(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n,i){for(var o=-1,s=mn(ln((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:da(o),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Hi(t,e,n,r,o,s,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,l,h],d=n.apply(i,p);return wo(t)&&ko(d,p),d.placeholder=r,Lo(d,t,e)}function Yi(t){var e=At[t];return function(t,n){if(t=ma(t),(n=null==n?0:yn(va(n),292))&&dn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var qi=Cn&&1/nn(new Cn([,-0]))[1]==l?function(t){return new Cn(t)}:cu;function $i(t){return function(e){var n=fo(e);return n==x?Qe(e):n==S?rn(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Zi(t,e,n,s,l,h,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new St(o);var v=s?s.length:0;if(v||(e&=-97,s=l=i),f=f===i?f:mn(va(f),0),p=p===i?p:va(p),v-=l?l.length:0,64&e){var g=s,m=l;s=l=i}var y=d?i:ro(t),b=[t,e,n,s,l,g,m,h,f,p];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Mi(l,u,e[4]):u,t[4]=l?en(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ci(l,u,e[6]):u,t[6]=l?en(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],s=b[3],l=b[4],!(p=b[9]=b[9]===i?d?0:t.length:mn(b[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Pi(t);return function s(){for(var a=arguments.length,u=r(a),c=a,l=oo(s);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:en(u,l);return(a-=h.length)<n?Hi(t,e,Ti,s.placeholder,i,u,h,i,i,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,u)}}(t,e,p):e!=u&&33!=e||l.length?Ti.apply(i,b):function(t,e,n,i){var o=1&e,s=Pi(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==oe&&this instanceof e?s:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return me(f,o?n:this,h)}}(t,e,n,s);else var w=function(t,e,n){var r=1&e,i=Pi(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Lo((y?Jr:ko)(w,b),t,e)}function Xi(t,e,n,r){return t===i||Us(t,Vt[n])&&!Bt.call(r,n)?e:t}function Ki(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Rr(t,e,i,Ki,s),s.delete(e)),t}function Ji(t){return oa(t)?i:t}function Qi(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,p=!0,d=2&n?new qn:i;for(s.set(t,e),s.set(e,t);++f<u;){var v=t[f],g=e[f];if(r)var m=a?r(g,v,f,e,t,s):r(v,g,f,t,e,s);if(m!==i){if(m)continue;p=!1;break}if(d){if(!ke(e,(function(t,e){if(!He(d,e)&&(v===t||o(v,t,n,r,s)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!o(v,g,n,r,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function to(t){return zo(Mo(t,i,Yo),t+"")}function eo(t){return Ar(t,La,lo)}function no(t){return Ar(t,Ba,ho)}var ro=kn?function(t){return kn.get(t)}:cu;function io(t){for(var e=t.name+"",n=Vn[e],r=Bt.call(Vn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Bt.call(Fn,"placeholder")?Fn:t).placeholder}function so(){var t=Fn.iteratee||ou;return t=t===ou?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=La(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ao(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Br(n)?n:i}var lo=fn?function(t){return null==t?[]:(t=Et(t),xe(fn(t),(function(e){return te.call(t,e)})))}:gu,ho=fn?function(t){for(var e=[];t;)Ce(e,lo(t)),t=Yt(t);return e}:gu,fo=Er;function po(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var s=To(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&mo(s,i)&&(Hs(t)||Gs(t))}function vo(t){return"function"!=typeof t.constructor||xo(t)?{}:Rn(Yt(t))}function go(t){return Hs(t)||Gs(t)||!!(ie&&t&&t[ie])}function mo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?qs(n)&&mo(e,n.length):"string"==r&&e in n)&&Us(n[e],t)}function bo(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ca(t))||Q.test(t)||!J.test(t)||null!=e&&t in Et(e)}function wo(t){var e=io(t),n=Fn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(An&&fo(new An(new ArrayBuffer(1)))!=L||En&&fo(new En)!=x||Mn&&fo(Mn.resolve())!=M||Cn&&fo(new Cn)!=S||Sn&&fo(new Sn)!=V)&&(fo=function(t){var e=Er(t),n=e==E?t.constructor:i,r=n?Fo(n):"";if(r)switch(r){case zn:return L;case Ln:return x;case Bn:return M;case On:return S;case Pn:return V}return e});var _o=zt?Js:mu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Vt)}function Ao(t){return t==t&&!ea(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Et(n))}}function Mo(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=mn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),me(t,this,u)}}function Co(t,e){return e.length<2?t:xr(t,ei(e,0,-1))}function So(t,e){for(var n=t.length,r=yn(e.length,n),o=Si(t);r--;){var s=e[r];t[r]=mo(s,n)?o[s]:i}return t}function jo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ko=Bo(Jr),Vo=Te||function(t,e){return oe.setTimeout(t,e)},zo=Bo(Qr);function Lo(t,e,n){var r=e+"";return zo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(d,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Bo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Oo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Yr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Po,Io,Do=(Po=Ps((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Io.size&&Io.clear(),t})),Io=Po.cache,Po);function To(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fo(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ro(t){if(t instanceof Wn)return t.clone();var e=new Nn(t.__wrapped__,t.__chain__);return e.__actions__=Si(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=$r((function(t,e){return $s(t)?lr(t,gr(e,1,$s,!0)):[]})),No=$r((function(t,e){var n=Ko(e);return $s(n)&&(n=i),$s(t)?lr(t,gr(e,1,$s,!0),so(n,2)):[]})),Wo=$r((function(t,e){var n=Ko(e);return $s(n)&&(n=i),$s(t)?lr(t,gr(e,1,$s,!0),i,n):[]}));function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=mn(r+i,0)),Le(t,so(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=va(n),o=n<0?mn(r+o,0):yn(o,r-1)),Le(t,so(e,3),o,!0)}function Yo(t){return null!=t&&t.length?gr(t,1):[]}function qo(t){return t&&t.length?t[0]:i}var $o=$r((function(t){var e=Me(t,vi);return e.length&&e[0]===t[0]?jr(e):[]})),Zo=$r((function(t){var e=Ko(t),n=Me(t,vi);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?jr(n,so(e,2)):[]})),Xo=$r((function(t){var e=Ko(t),n=Me(t,vi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?jr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=$r(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Hr(t,Me(e,(function(t){return mo(t,n)?+t:t})).sort(Ei)),r}));function es(t){return null==t?t:xn.call(t)}var ns=$r((function(t){return ui(gr(t,1,$s,!0))})),rs=$r((function(t){var e=Ko(t);return $s(e)&&(e=i),ui(gr(t,1,$s,!0),so(e,2))})),is=$r((function(t){var e=Ko(t);return e="function"==typeof e?e:i,ui(gr(t,1,$s,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if($s(t))return e=mn(t.length,e),!0})),Ue(e,(function(e){return Me(t,De(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Me(n,(function(t){return me(e,i,t)}))}var as=$r((function(t,e){return $s(t)?lr(t,e):[]})),us=$r((function(t){return pi(xe(t,$s))})),cs=$r((function(t){var e=Ko(t);return $s(e)&&(e=i),pi(xe(t,$s),so(e,2))})),ls=$r((function(t){var e=Ko(t);return e="function"==typeof e?e:i,pi(xe(t,$s),i,e)})),hs=$r(os),fs=$r((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function ps(t){var e=Fn(t);return e.__chain__=!0,e}function ds(t,e){return e(t)}var vs=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ds,args:[o],thisArg:i}),new Nn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),gs=ki((function(t,e,n){Bt.call(t,n)?++t[n]:ir(t,n,1)})),ms=Ii(Go),ys=Ii(Ho);function bs(t,e){return(Hs(t)?be:hr)(t,so(e,3))}function ws(t,e){return(Hs(t)?we:fr)(t,so(e,3))}var _s=ki((function(t,e,n){Bt.call(t,n)?t[n].push(e):ir(t,n,[e])})),xs=$r((function(t,e,n){var i=-1,o="function"==typeof e,s=qs(t)?r(t.length):[];return hr(t,(function(t){s[++i]=o?me(e,t,n):kr(t,e,n)})),s})),As=ki((function(t,e,n){ir(t,n,e)}));function Es(t,e){return(Hs(t)?Me:Dr)(t,so(e,3))}var Ms=ki((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Cs=$r((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Nr(t,gr(e,1),[])})),Ss=Ve||function(){return oe.Date.now()};function js(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Zi(t,c,i,i,i,i,e)}function ks(t,e){var n;if("function"!=typeof e)throw new St(o);return t=va(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Vs=$r((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Vs));r|=u}return Zi(t,r,e,n,i)})),zs=$r((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(zs));r|=u}return Zi(e,r,t,n,i)}));function Ls(t,e,n){var r,s,a,u,c,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new St(o);function v(e){var n=r,o=s;return r=s=i,h=e,u=t.apply(o,n)}function g(t){return h=t,c=Vo(y,e),f?v(t):u}function m(t){var n=t-l;return l===i||n>=e||n<0||p&&t-h>=a}function y(){var t=Ss();if(m(t))return b(t);c=Vo(y,function(t){var n=e-(t-l);return p?yn(n,a-(t-h)):n}(t))}function b(t){return c=i,d&&r?v(t):(r=s=i,u)}function w(){var t=Ss(),n=m(t);if(r=arguments,s=this,l=t,n){if(c===i)return g(l);if(p)return wi(c),c=Vo(y,e),v(l)}return c===i&&(c=Vo(y,e)),u}return e=ma(e)||0,ea(n)&&(f=!!n.leading,a=(p="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),w.cancel=function(){c!==i&&wi(c),h=0,r=l=s=c=i},w.flush=function(){return c===i?u:b(Ss())},w}var Bs=$r((function(t,e){return cr(t,1,e)})),Os=$r((function(t,e,n){return cr(t,ma(e)||0,n)}));function Ps(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ps.Cache||Yn),n}function Is(t){if("function"!=typeof t)throw new St(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ps.Cache=Yn;var Ds=yi((function(t,e){var n=(e=1==e.length&&Hs(e[0])?Me(e[0],We(so())):Me(gr(e,1),We(so()))).length;return $r((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return me(t,this,r)}))})),Ts=$r((function(t,e){var n=en(e,oo(Ts));return Zi(t,u,i,e,n)})),Fs=$r((function(t,e){var n=en(e,oo(Fs));return Zi(t,64,i,e,n)})),Rs=to((function(t,e){return Zi(t,256,i,i,i,e)}));function Us(t,e){return t===e||t!=t&&e!=e}var Ns=Gi(Mr),Ws=Gi((function(t,e){return t>=e})),Gs=Vr(function(){return arguments}())?Vr:function(t){return na(t)&&Bt.call(t,"callee")&&!te.call(t,"callee")},Hs=r.isArray,Ys=he?We(he):function(t){return na(t)&&Er(t)==z};function qs(t){return null!=t&&ta(t.length)&&!Js(t)}function $s(t){return na(t)&&qs(t)}var Zs=pn||mu,Xs=fe?We(fe):function(t){return na(t)&&Er(t)==y};function Ks(t){if(!na(t))return!1;var e=Er(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Js(t){if(!ea(t))return!1;var e=Er(t);return e==w||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==va(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=pe?We(pe):function(t){return na(t)&&fo(t)==x};function ia(t){return"number"==typeof t||na(t)&&Er(t)==A}function oa(t){if(!na(t)||Er(t)!=E)return!1;var e=Yt(t);if(null===e)return!0;var n=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==Dt}var sa=de?We(de):function(t){return na(t)&&Er(t)==C},aa=ve?We(ve):function(t){return na(t)&&fo(t)==S};function ua(t){return"string"==typeof t||!Hs(t)&&na(t)&&Er(t)==j}function ca(t){return"symbol"==typeof t||na(t)&&Er(t)==k}var la=ge?We(ge):function(t){return na(t)&&ta(t.length)&&!!Jt[Er(t)]},ha=Gi(Ir),fa=Gi((function(t,e){return t<=e}));function pa(t){if(!t)return[];if(qs(t))return ua(t)?sn(t):Si(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==x?Qe:e==S?nn:Ua)(t)}function da(t){return t?(t=ma(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function va(t){var e=da(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?sr(va(t),0,p):0}function ma(t){if("number"==typeof t)return t;if(ca(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ne(t);var n=dt.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function ya(t){return ji(t,Ba(t))}function ba(t){return null==t?"":ai(t)}var wa=Vi((function(t,e){if(xo(e)||qs(e))ji(e,La(e),t);else for(var n in e)Bt.call(e,n)&&tr(t,n,e[n])})),_a=Vi((function(t,e){ji(e,Ba(e),t)})),xa=Vi((function(t,e,n,r){ji(e,Ba(e),t,r)})),Aa=Vi((function(t,e,n,r){ji(e,La(e),t,r)})),Ea=to(or),Ma=$r((function(t,e){t=Et(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Ba(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||Us(h,Vt[l])&&!Bt.call(t,l))&&(t[l]=s[l])}return t})),Ca=$r((function(t){return t.push(i,Ki),me(Pa,i,t)}));function Sa(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function ja(t,e){return null!=t&&po(t,e,Sr)}var ka=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),t[e]=n}),eu(iu)),Va=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),Bt.call(t,e)?t[e].push(n):t[e]=[n]}),so),za=$r(kr);function La(t){return qs(t)?Zn(t):Pr(t)}function Ba(t){return qs(t)?Zn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Bt.call(t,r))&&n.push(r);return n}(t)}var Oa=Vi((function(t,e,n){Rr(t,e,n)})),Pa=Vi((function(t,e,n,r){Rr(t,e,n,r)})),Ia=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Me(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),ji(t,no(t),n),r&&(n=ar(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),Da=to((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return ja(t,n)}))}(t,e)}));function Ta(t,e){if(null==t)return{};var n=Me(no(t),(function(t){return[t]}));return e=so(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Fa=$i(La),Ra=$i(Ba);function Ua(t){return null==t?[]:Ge(t,La(t))}var Na=Oi((function(t,e,n){return e=e.toLowerCase(),t+(n?Wa(e):e)}));function Wa(t){return Ka(ba(t).toLowerCase())}function Ga(t){return(t=ba(t))&&t.replace(yt,Ze).replace(Ht,"")}var Ha=Oi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ya=Oi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qa=Bi("toLowerCase"),$a=Oi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Za=Oi((function(t,e,n){return t+(n?" ":"")+Ka(e)})),Xa=Oi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ka=Bi("toUpperCase");function Ja(t,e,n){return t=ba(t),(e=n?i:e)===i?function(t){return Zt.test(t)}(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Qa=$r((function(t,e){try{return me(t,i,e)}catch(t){return Ks(t)?t:new _t(t)}})),tu=to((function(t,e){return be(e,(function(e){e=To(e),ir(t,e,Vs(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Di(),ru=Di(!0);function iu(t){return t}function ou(t){return Or("function"==typeof t?t:ar(t,1))}var su=$r((function(t,e){return function(n){return kr(n,t,e)}})),au=$r((function(t,e){return function(n){return kr(t,n,e)}}));function uu(t,e,n){var r=La(e),i=_r(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,La(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Js(t);return be(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Si(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ce([this.value()],arguments))})})),t}function cu(){}var lu=Ui(Me),hu=Ui(_e),fu=Ui(ke);function pu(t){return bo(t)?De(To(t)):function(t){return function(e){return xr(e,t)}}(t)}var du=Wi(),vu=Wi(!0);function gu(){return[]}function mu(){return!1}var yu,bu=Ri((function(t,e){return t+e}),0),wu=Yi("ceil"),_u=Ri((function(t,e){return t/e}),1),xu=Yi("floor"),Au=Ri((function(t,e){return t*e}),1),Eu=Yi("round"),Mu=Ri((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new St(o);return t=va(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=js,Fn.assign=wa,Fn.assignIn=_a,Fn.assignInWith=xa,Fn.assignWith=Aa,Fn.at=Ea,Fn.before=ks,Fn.bind=Vs,Fn.bindAll=tu,Fn.bindKey=zs,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},Fn.chain=ps,Fn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:mn(va(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(ln(o/e));s<o;)u[a++]=ei(t,s,s+=e);return u},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ce(Hs(n)?Si(n):[n],gr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new St(o);return[n(t[0]),t[1]]})):[],$r((function(n){for(var r=-1;++r<e;){var i=t[r];if(me(i[0],this,n))return me(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=La(t);return function(n){return ur(n,t,e)}}(ar(t,1))},Fn.constant=eu,Fn.countBy=gs,Fn.create=function(t,e){var n=Rn(t);return null==e?n:rr(n,e)},Fn.curry=function t(e,n,r){var o=Zi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(e,n,r){var o=Zi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.debounce=Ls,Fn.defaults=Ma,Fn.defaultsDeep=Ca,Fn.defer=Bs,Fn.delay=Os,Fn.difference=Uo,Fn.differenceBy=No,Fn.differenceWith=Wo,Fn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:va(e))<0?0:e,r):[]},Fn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:va(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0):[]},Fn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=va(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:va(r))<0&&(r+=o),r=n>r?0:ga(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Fn.filter=function(t,e){return(Hs(t)?xe:vr)(t,so(e,3))},Fn.flatMap=function(t,e){return gr(Es(t,e),1)},Fn.flatMapDeep=function(t,e){return gr(Es(t,e),l)},Fn.flatMapDepth=function(t,e,n){return n=n===i?1:va(n),gr(Es(t,e),n)},Fn.flatten=Yo,Fn.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Fn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:va(e)):[]},Fn.flip=function(t){return Zi(t,512)},Fn.flow=nu,Fn.flowRight=ru,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:_r(t,La(t))},Fn.functionsIn=function(t){return null==t?[]:_r(t,Ba(t))},Fn.groupBy=_s,Fn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Fn.intersection=$o,Fn.intersectionBy=Zo,Fn.intersectionWith=Xo,Fn.invert=ka,Fn.invertBy=Va,Fn.invokeMap=xs,Fn.iteratee=ou,Fn.keyBy=As,Fn.keys=La,Fn.keysIn=Ba,Fn.map=Es,Fn.mapKeys=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Fn.matches=function(t){return Tr(ar(t,1))},Fn.matchesProperty=function(t,e){return Fr(t,ar(e,1))},Fn.memoize=Ps,Fn.merge=Oa,Fn.mergeWith=Pa,Fn.method=su,Fn.methodOf=au,Fn.mixin=uu,Fn.negate=Is,Fn.nthArg=function(t){return t=va(t),$r((function(e){return Ur(e,t)}))},Fn.omit=Ia,Fn.omitBy=function(t,e){return Ta(t,Is(so(e)))},Fn.once=function(t){return ks(2,t)},Fn.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),Hs(n=r?i:n)||(n=null==n?[]:[n]),Nr(t,e,n))},Fn.over=lu,Fn.overArgs=Ds,Fn.overEvery=hu,Fn.overSome=fu,Fn.partial=Ts,Fn.partialRight=Fs,Fn.partition=Ms,Fn.pick=Da,Fn.pickBy=Ta,Fn.property=pu,Fn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Fn.pull=Jo,Fn.pullAll=Qo,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,so(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,i,n):t},Fn.pullAt=ts,Fn.range=du,Fn.rangeRight=vu,Fn.rearg=Rs,Fn.reject=function(t,e){return(Hs(t)?xe:vr)(t,Is(so(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Hr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new St(o);return $r(t,e=e===i?e:va(e))},Fn.reverse=es,Fn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:va(e),(Hs(t)?Kn:Xr)(t,e)},Fn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},Fn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},Fn.shuffle=function(t){return(Hs(t)?Jn:ti)(t)},Fn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:va(e),n=n===i?r:va(n)),ei(t,e,n)):[]},Fn.sortBy=Cs,Fn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Je(t)?bi(sn(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new St(o);return e=null==e?0:mn(va(e),0),$r((function(n){var r=n[e],i=bi(n,0,e);return r&&Ce(i,r),me(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:va(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:va(e)))<0?0:e,r):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?hi(t,so(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new St(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ls(t,e,{leading:r,maxWait:e,trailing:i})},Fn.thru=ds,Fn.toArray=pa,Fn.toPairs=Fa,Fn.toPairsIn=Ra,Fn.toPath=function(t){return Hs(t)?Me(t,To):ca(t)?[t]:Si(Do(ba(t)))},Fn.toPlainObject=ya,Fn.transform=function(t,e,n){var r=Hs(t),i=r||Zs(t)||la(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Js(o)?Rn(Yt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return js(t,1)},Fn.union=ns,Fn.unionBy=rs,Fn.unionWith=is,Fn.uniq=function(t){return t&&t.length?ui(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?ui(t,so(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Fn.unset=function(t,e){return null==t||ci(t,e)},Fn.unzip=os,Fn.unzipWith=ss,Fn.update=function(t,e,n){return null==t?t:li(t,e,gi(n))},Fn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,gi(n),r)},Fn.values=Ua,Fn.valuesIn=function(t){return null==t?[]:Ge(t,Ba(t))},Fn.without=as,Fn.words=Ja,Fn.wrap=function(t,e){return Ts(gi(e),t)},Fn.xor=us,Fn.xorBy=cs,Fn.xorWith=ls,Fn.zip=hs,Fn.zipObject=function(t,e){return di(t||[],e||[],tr)},Fn.zipObjectDeep=function(t,e){return di(t||[],e||[],Kr)},Fn.zipWith=fs,Fn.entries=Fa,Fn.entriesIn=Ra,Fn.extend=_a,Fn.extendWith=xa,uu(Fn,Fn),Fn.add=bu,Fn.attempt=Qa,Fn.camelCase=Na,Fn.capitalize=Wa,Fn.ceil=wu,Fn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))==n?n:0),e!==i&&(e=(e=ma(e))==e?e:0),sr(ma(t),e,n)},Fn.clone=function(t){return ar(t,4)},Fn.cloneDeep=function(t){return ar(t,5)},Fn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Fn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Fn.conformsTo=function(t,e){return null==e||ur(t,e,La(e))},Fn.deburr=Ga,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=_u,Fn.endsWith=function(t,e,n){t=ba(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(va(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Fn.eq=Us,Fn.escape=function(t){return(t=ba(t))&&$.test(t)?t.replace(Y,Xe):t},Fn.escapeRegExp=function(t){return(t=ba(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Fn.every=function(t,e,n){var r=Hs(t)?_e:pr;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Fn.find=ms,Fn.findIndex=Go,Fn.findKey=function(t,e){return ze(t,so(e,3),br)},Fn.findLast=ys,Fn.findLastIndex=Ho,Fn.findLastKey=function(t,e){return ze(t,so(e,3),wr)},Fn.floor=xu,Fn.forEach=bs,Fn.forEachRight=ws,Fn.forIn=function(t,e){return null==t?t:mr(t,so(e,3),Ba)},Fn.forInRight=function(t,e){return null==t?t:yr(t,so(e,3),Ba)},Fn.forOwn=function(t,e){return t&&br(t,so(e,3))},Fn.forOwnRight=function(t,e){return t&&wr(t,so(e,3))},Fn.get=Sa,Fn.gt=Ns,Fn.gte=Ws,Fn.has=function(t,e){return null!=t&&po(t,e,Cr)},Fn.hasIn=ja,Fn.head=qo,Fn.identity=iu,Fn.includes=function(t,e,n,r){t=qs(t)?t:Ua(t),n=n&&!r?va(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Be(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=mn(r+i,0)),Be(t,e,i)},Fn.inRange=function(t,e,n){return e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Fn.invoke=za,Fn.isArguments=Gs,Fn.isArray=Hs,Fn.isArrayBuffer=Ys,Fn.isArrayLike=qs,Fn.isArrayLikeObject=$s,Fn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Er(t)==m},Fn.isBuffer=Zs,Fn.isDate=Xs,Fn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(qs(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Zs(t)||la(t)||Gs(t)))return!t.length;var e=fo(t);if(e==x||e==S)return!t.size;if(xo(t))return!Pr(t).length;for(var n in t)if(Bt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return zr(t,e)},Fn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?zr(t,e,i,n):!!r},Fn.isError=Ks,Fn.isFinite=function(t){return"number"==typeof t&&dn(t)},Fn.isFunction=Js,Fn.isInteger=Qs,Fn.isLength=ta,Fn.isMap=ra,Fn.isMatch=function(t,e){return t===e||Lr(t,e,uo(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Lr(t,e,uo(e),n)},Fn.isNaN=function(t){return ia(t)&&t!=+t},Fn.isNative=function(t){if(_o(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Br(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=ia,Fn.isObject=ea,Fn.isObjectLike=na,Fn.isPlainObject=oa,Fn.isRegExp=sa,Fn.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=h},Fn.isSet=aa,Fn.isString=ua,Fn.isSymbol=ca,Fn.isTypedArray=la,Fn.isUndefined=function(t){return t===i},Fn.isWeakMap=function(t){return na(t)&&fo(t)==V},Fn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Er(t)},Fn.join=function(t,e){return null==t?"":vn.call(t,e)},Fn.kebabCase=Ha,Fn.last=Ko,Fn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=va(n))<0?mn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Le(t,Pe,o,!0)},Fn.lowerCase=Ya,Fn.lowerFirst=qa,Fn.lt=ha,Fn.lte=fa,Fn.max=function(t){return t&&t.length?dr(t,iu,Mr):i},Fn.maxBy=function(t,e){return t&&t.length?dr(t,so(e,2),Mr):i},Fn.mean=function(t){return Ie(t,iu)},Fn.meanBy=function(t,e){return Ie(t,so(e,2))},Fn.min=function(t){return t&&t.length?dr(t,iu,Ir):i},Fn.minBy=function(t,e){return t&&t.length?dr(t,so(e,2),Ir):i},Fn.stubArray=gu,Fn.stubFalse=mu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Au,Fn.nth=function(t,e){return t&&t.length?Ur(t,va(e)):i},Fn.noConflict=function(){return oe._===this&&(oe._=Tt),this},Fn.noop=cu,Fn.now=Ss,Fn.pad=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ni(hn(i),n)+t+Ni(ln(i),n)},Fn.padEnd=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;return e&&r<e?t+Ni(e-r,n):t},Fn.padStart=function(t,e,n){t=ba(t);var r=(e=va(e))?on(t):0;return e&&r<e?Ni(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(ba(t).replace(rt,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=da(t),e===i?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_n();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Yr(t,e)},Fn.reduce=function(t,e,n){var r=Hs(t)?Se:Fe,i=arguments.length<3;return r(t,so(e,4),n,i,hr)},Fn.reduceRight=function(t,e,n){var r=Hs(t)?je:Fe,i=arguments.length<3;return r(t,so(e,4),n,i,fr)},Fn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:va(e),qr(ba(t),e)},Fn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[To(e[r])];s===i&&(r=o,s=n),t=Js(s)?s.call(t):s}return t},Fn.round=Eu,Fn.runInContext=t,Fn.sample=function(t){return(Hs(t)?Xn:Zr)(t)},Fn.size=function(t){if(null==t)return 0;if(qs(t))return ua(t)?on(t):t.length;var e=fo(t);return e==x||e==S?t.size:Pr(t).length},Fn.snakeCase=$a,Fn.some=function(t,e,n){var r=Hs(t)?ke:ni;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Fn.sortedIndex=function(t,e){return ri(t,e)},Fn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Us(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Us(t[n],e))return n}return-1},Fn.startCase=Za,Fn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:sr(va(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Fn.subtract=Mu,Fn.sum=function(t){return t&&t.length?Re(t,iu):0},Fn.sumBy=function(t,e){return t&&t.length?Re(t,so(e,2)):0},Fn.template=function(t,e,n){var r=Fn.templateSettings;n&&yo(t,e,n)&&(e=i),t=ba(t),e=xa({},e,r,Xi);var o,s,a=xa({},e.imports,r.imports,Xi),u=La(a),c=Ge(a,u),l=0,h=e.interpolate||bt,f="__p += '",p=Mt((e.escape||bt).source+"|"+h.source+"|"+(h===K?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Bt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";t.replace(p,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(wt,Ke),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var v=Bt.call(e,"variable")&&e.variable;if(v){if(ct.test(v))throw new _t("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(N,""):f).replace(W,"$1").replace(G,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Qa((function(){return xt(u,d+"return "+f).apply(i,c)}));if(g.source=f,Ks(g))throw g;return g},Fn.times=function(t,e){if((t=va(t))<1||t>h)return[];var n=p,r=yn(t,p);e=so(e),t-=p;for(var i=Ue(r,e);++n<t;)e(n);return i},Fn.toFinite=da,Fn.toInteger=va,Fn.toLength=ga,Fn.toLower=function(t){return ba(t).toLowerCase()},Fn.toNumber=ma,Fn.toSafeInteger=function(t){return t?sr(va(t),-9007199254740991,h):0===t?t:0},Fn.toString=ba,Fn.toUpper=function(t){return ba(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=ba(t))&&(n||e===i))return Ne(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return bi(r,Ye(r,o),qe(r,o)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,0,qe(r,sn(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,Ye(r,sn(e))).join("")},Fn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?va(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=ba(t)).length;if(Je(t)){var a=sn(t);s=a.length}if(n>=s)return t;var u=n-on(r);if(u<1)return r;var c=a?bi(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),sa(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=Mt(o.source,ba(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Fn.unescape=function(t){return(t=ba(t))&&q.test(t)?t.replace(H,un):t},Fn.uniqueId=function(t){var e=++Ot;return ba(t)+e},Fn.upperCase=Xa,Fn.upperFirst=Ka,Fn.each=bs,Fn.eachRight=ws,Fn.first=qo,uu(Fn,(yu={},br(Fn,(function(t,e){Bt.call(Fn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),Fn.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),be(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===i?1:mn(va(n),0);var r=this.__filtered__&&!e?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(iu)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=$r((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return kr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Is(so(t)))},Wn.prototype.slice=function(t,e){t=va(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=va(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},br(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Fn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Fn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Wn,c=a[0],l=u||Hs(e),h=function(t){var e=o.apply(Fn,Ce([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,v=u&&!p;if(!s&&l){e=v?e:new Wn(this);var g=t.apply(e,a);return g.__actions__.push({func:ds,args:[h],thisArg:i}),new Nn(g,f)}return d&&v?t.apply(this,a):(g=this.thru(h),d?r?g.value()[0]:g.value():g)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=jt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n]((function(n){return e.apply(Hs(n)?n:[],t)}))}})),br(Wn.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Bt.call(Vn,r)||(Vn[r]=[]),Vn[r].push({name:e,func:n})}})),Vn[Ti(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Si(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Si(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Si(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=yn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,p=yn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return fi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var v=-1,g=t[c+=e];++v<h;){var m=l[v],y=m.iteratee,b=m.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue t;break t}}d[f++]=g}return d},Fn.prototype.at=vs,Fn.prototype.chain=function(){return ps(this)},Fn.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Ro(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ds,args:[es],thisArg:i}),new Nn(e,this.__chain__)}return this.thru(es)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,se&&(Fn.prototype[se]=function(){return this}),Fn}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},154:t=>{"use strict";t.exports=function(t){for(var e=t.length,n=t[t.length-1],r=e,i=e-2;i>=0;--i){var o=n,s=t[i];(u=s-((n=o+s)-o))&&(t[--r]=n,n=u)}var a=0;for(i=r;i<e;++i){var u;(u=(s=n)-((n=(o=t[i])+s)-o))&&(t[a++]=u)}return t[a++]=n,t.length=a,t}},437:(t,e,n)=>{"use strict";var r=n(5),i=n(740),o=n(442),s=n(154);function a(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function u(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m[",n,"][",r,"]"].join("")}return e}function c(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",c(t.slice(0,e)),",",c(t.slice(e)),")"].join("")}function l(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],n=0;n<t.length;++n)e.push(["scale(",l(a(t,n)),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return c(e);var r}function h(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",l(u(t)),")};return robustDeterminant",t].join(""))(i,o,r,s)}var f=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;f.length<6;)f.push(h(f.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],r=0;r<6;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var i=Function.apply(void 0,e);for(t.exports=i.apply(void 0,f.concat([f,h])),r=0;r<f.length;++r)t.exports[r]=f[r]}()},489:(t,e,n)=>{"use strict";var r=n(437);function i(t){for(var e="robustLinearSolve"+t+"d",n=["function ",e,"(A,b){return ["],i=0;i<t;++i){n.push("det([");for(var o=0;o<t;++o){o>0&&n.push(","),n.push("[");for(var s=0;s<t;++s)s>0&&n.push(","),s===i?n.push("+b[",o,"]"):n.push("+A[",o,"][",s,"]");n.push("]")}n.push("]),")}return n.push("det(A)]}return ",e),new Function("det",n.join(""))(t<6?r[t]:r)}var o=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;o.length<6;)o.push(i(o.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],r=0;r<6;++r)e.push("s"+r),n.push("case ",r,":return s",r,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);for(t.exports=s.apply(void 0,o.concat([o,i])),r=0;r<6;++r)t.exports[r]=o[r]}()},146:(t,e,n)=>{"use strict";var r=n(5),i=n(740),o=n(442),s=n(972);function a(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",u(c(a(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function l(t){for(var e=[],n=[],l=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),h=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,c(a(l,f))):n.push.apply(n,c(a(l,f))),h.push("m"+f);var p=u(e),d=u(n),v="orientation"+t+"Exact",g=["function ",v,"(",h.join(),"){var p=",p,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",v].join("");return new Function("sum","prod","scale","sub",g)(i,r,o,s)}var h=l(3),f=l(4),p=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var a=33306690738754716e-32*r;return s>=a||s<=-a?s:h(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],h=e[2]-r[2],p=n[2]-r[2],d=o*c,v=s*u,g=s*a,m=i*c,y=i*u,b=o*a,w=l*(d-v)+h*(g-m)+p*(y-b),_=7771561172376103e-31*((Math.abs(d)+Math.abs(v))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(b))*Math.abs(p));return w>_||-w>_?w:f(t,e,n,r)}];function d(t){var e=p[t.length];return e||(e=p[t.length]=l(t.length)),e.apply(void 0,t)}!function(){for(;p.length<=5;)p.push(l(p.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[d].concat(p)),r=0;r<=5;++r)t.exports[r]=p[r]}()},442:(t,e,n)=>{"use strict";var r=n(5),i=n(359);t.exports=function(t,e){var n=t.length;if(1===n){var o=r(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*n),a=[.1,.1],u=[.1,.1],c=0;r(t[0],e,a),a[0]&&(s[c++]=a[0]);for(var l=1;l<n;++l){r(t[l],e,u);var h=a[1];i(h,u[0],a),a[0]&&(s[c++]=a[0]);var f=u[1],p=a[1],d=f+p,v=p-(d-f);a[1]=d,v&&(s[c++]=v)}return a[1]&&(s[c++]=a[1]),0===c&&(s[c++]=0),s.length=c,s}},972:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=-e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=-e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c])));for(var v,g,m=i+o,y=m-i,b=o-y,w=b,_=m;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c]))),(b=(o=w)-(y=(m=i+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(b=(o=w)-(y=(m=(i=h)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(o=w)-(y=(m=(i=p)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(c+=1)<r&&(p=-e[c]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},740:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c])));for(var v,g,m=i+o,y=m-i,b=o-y,w=b,_=m;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c]))),(b=(o=w)-(y=(m=i+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v;for(;u<n;)(b=(o=w)-(y=(m=(i=h)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(o=w)-(y=(m=(i=p)+o)-i))&&(s[a++]=b),w=_-((v=_+m)-(g=v-_))+(m-g),_=v,(c+=1)<r&&(p=e[c]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s}},572:(t,e,n)=>{"use strict";n(746),n(102);function r(t,e){var n=t.length,r=t.length-e.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(a=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var a,u=i(t[0],t[1]),c=i(e[0],e[1]);return(a=i(u,t[2])-i(c,e[2]))||i(u+t[2],o)-i(c+e[2],s);default:var l=t.slice(0);l.sort();var h=e.slice(0);h.sort();for(var f=0;f<n;++f)if(r=l[f]-h[f])return r;return 0}}e.H=r},591:function(t,e,n){(function(){"use strict";var r=this.THREE||n(396);if(!r)throw new Error("MeshLine requires three.js");class i extends r.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new r.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(t){this.setGeometry(t,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(t){this.setPoints(t,this.widthCallback)}}})}}function o(t,e){var n=new r.Matrix4,i=new r.Ray,o=new r.Sphere,s=new r.Vector3,a=this.geometry;if(a.boundingSphere||a.computeBoundingSphere(),o.copy(a.boundingSphere),o.applyMatrix4(this.matrixWorld),!1!==t.ray.intersectSphere(o,s)){n.copy(this.matrixWorld).invert(),i.copy(t.ray).applyMatrix4(n);var u=new r.Vector3,c=new r.Vector3,l=new r.Vector3,h=this instanceof r.LineSegments?2:1,f=a.index,p=a.attributes;if(null!==f)for(var d=f.array,v=p.position.array,g=p.width.array,m=0,y=d.length-1;m<y;m+=h){var b=d[m],w=d[m+1];u.fromArray(v,3*b),c.fromArray(v,3*w);var _=void 0!==g[Math.floor(m/3)]?g[Math.floor(m/3)]:1,x=t.params.Line.threshold+this.material.lineWidth*_/2,A=x*x;if(!(i.distanceSqToSegment(u,c,s,l)>A)){s.applyMatrix4(this.matrixWorld);var E=t.ray.origin.distanceTo(s);E<t.near||E>t.far||(e.push({distance:E,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}),m=y)}}}}function s(t,e,n,r,i){var o;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,i&&e+i):t.slice(e,i&&e+i):t,n.set)n.set(t,r);else for(o=0;o<t.length;o++)n[o+r]=t[o];return n}i.prototype.setMatrixWorld=function(t){this.matrixWorld=t},i.prototype.setGeometry=function(t,e){this._geometry=t,this.setPoints(t.getAttribute("position").array,e)},i.prototype.setPoints=function(t,e){if(t instanceof Float32Array||t instanceof Array){if(this._points=t,this.widthCallback=e,this.positions=[],this.counters=[],t.length&&t[0]instanceof r.Vector3)for(var n=0;n<t.length;n++){var i=t[n],o=n/t.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(o),this.counters.push(o)}else for(n=0;n<t.length;n+=3)o=n/t.length,this.positions.push(t[n],t[n+1],t[n+2]),this.positions.push(t[n],t[n+1],t[n+2]),this.counters.push(o),this.counters.push(o);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")},i.prototype.raycast=o,i.prototype.compareV3=function(t,e){var n=6*t,r=6*e;return this.positions[n]===this.positions[r]&&this.positions[n+1]===this.positions[r+1]&&this.positions[n+2]===this.positions[r+2]},i.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},i.prototype.process=function(){var t,e,n=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],e=this.compareV3(0,n-1)?this.copyV3(n-2):this.copyV3(0),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(var i=0;i<n;i++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(i/(n-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(i/(n-1),0),this.uvs.push(i/(n-1),1),i<n-1){e=this.copyV3(i),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);var o=2*i;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}i>0&&(e=this.copyV3(i),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]))}e=this.compareV3(n-1,0)?this.copyV3(1):this.copyV3(n-1),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new r.BufferAttribute(new Float32Array(this.positions),3),previous:new r.BufferAttribute(new Float32Array(this.previous),3),next:new r.BufferAttribute(new Float32Array(this.next),3),side:new r.BufferAttribute(new Float32Array(this.side),1),width:new r.BufferAttribute(new Float32Array(this.width),1),uv:new r.BufferAttribute(new Float32Array(this.uvs),2),index:new r.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new r.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()},i.prototype.advance=function(t){var e=this._attributes.position.array,n=this._attributes.previous.array,r=this._attributes.next.array,i=e.length;s(e,0,n,0,i),s(e,6,e,0,i-6),e[i-6]=t.x,e[i-5]=t.y,e[i-4]=t.z,e[i-3]=t.x,e[i-2]=t.y,e[i-1]=t.z,s(e,6,r,0,i-6),r[i-6]=t.x,r[i-5]=t.y,r[i-4]=t.z,r[i-3]=t.x,r[i-2]=t.y,r[i-1]=t.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},r.ShaderChunk.meshline_vert=["",r.ShaderChunk.logdepthbuf_pars_vertex,r.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.fog_vertex,"}"].join("\n"),r.ShaderChunk.meshline_frag=["",r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",r.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",r.ShaderChunk.fog_fragment,"}"].join("\n");class a extends r.ShaderMaterial{constructor(t){super({uniforms:Object.assign({},r.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new r.Color(16777215)},opacity:{value:1},resolution:{value:new r.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new r.Vector2(1,1)}}),vertexShader:r.ShaderChunk.meshline_vert,fragmentShader:r.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}}a.prototype.copy=function(t){return r.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},t.exports&&(e=t.exports={MeshLine:i,MeshLineMaterial:a,MeshLineRaycast:o}),e.MeshLine=i,e.MeshLineMaterial=a,e.MeshLineRaycast=o}).call(this)},5:t=>{"use strict";t.exports=function(t,n,r){var i=t*n,o=e*t,s=o-(o-t),a=t-s,u=e*n,c=u-(u-n),l=n-c,h=a*l-(i-s*c-a*c-s*l);return r?(r[0]=h,r[1]=i,r):[h,i]};var e=+(Math.pow(2,27)+1)},359:t=>{"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]}},102:t=>{"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var r=n[e];n[e]=t,e=r}return t},n.link=function(t,e){var n=this.find(t),r=this.find(e);if(n!==r){var i=this.ranks,o=this.roots,s=i[n],a=i[r];s<a?o[n]=r:a<s?o[r]=n:(o[r]=n,++i[n])}}},706:t=>{"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],o=t[0],s=1;s<r;++s)if(o=i,e(i=t[s],o)){if(s===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],o=1;o<n;++o,i=r)if(i=r,(r=t[o])!==i){if(o===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},301:(t,e,n)=>{"use strict";var r=n(930),i=n(645),o=n(706);function s(t,e){return t-e}t.exports=function(t){var e=t.length;if(0===e)return{cells:[],positions:[]};var n=t[0].length;if(n<1)return{cells:[],positions:[]};if(1===n)return function(t){if(1===t.length)return{cells:[[-1]],positions:[]};var e=t.map((function(t,e){return[t[0],e]}));e.sort((function(t,e){return t-e}));for(var n=new Array(t.length),r=0;r<n.length;++r)n[r]=[-1,-1];for(var i=[],o=1;o<e.length;++o){var s=e[o-1],a=e[o],u=.5*(s[0]+a[0]),c=i.length;i.push([u]),n[s[1]][1]=c,n[a[1]][0]=c}return n[e[0][1]][1]=0,n[e[e.length-1][1]][0]=i.length-1,{cells:n,positions:i}}(t);for(var a=r(t,!0),u=new Array(e),c=0;c<e;++c)u[c]=[];var l,h=a.length,f=new Array(n+1),p=new Array(h),d=[];for(c=0;c<h;++c){for(var v=a[c],g=!1,m=0;m<=n;++m){var y=v[m];y<0?(p[c]=-1,g=!0):(u[y].push(c),f[m]=t[y])}g||(p[c]=d.length,d.push(i(f)))}if(2===n)for(l=new Array(e),c=0;c<e;++c){var b=u[c],w=[p[b[0]]],_=a[b[0]][(a[b[0]].indexOf(c)+1)%3];for(m=1;m<b.length;++m)for(var x=1;x<b.length;++x){var A=(a[b[x]].indexOf(c)+2)%3;if(a[b[x]][A]===_){w.push(p[b[x]]),_=a[b[x]][(A+2)%3];break}}l[c]=w}else{for(c=0;c<e;++c){for(_=u[c],m=0;m<_.length;++m)_[m]=p[_[m]];o(_,s)}l=u}return{cells:l,positions:d}}},990:t=>{t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}a=n[s]={exports:{}},e[s][0].call(a.exports,(function(t){return i(e[s][1][t]||t)}),a,a.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(r,i,o,s,a,u,c,l,h){"use strict";var f=t("crypto");function p(t,e){var n;return void 0===(n="passthrough"!==(e=g(t,e)).algorithm?f.createHash(e.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(e,n).dispatch(t),n.update||n.end(""),n.digest?n.digest("buffer"===e.encoding?void 0:e.encoding):(t=n.read(),"buffer"!==e.encoding?t.toString(e.encoding):t)}(n=e.exports=p).sha1=function(t){return p(t)},n.keys=function(t){return p(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return p(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return p(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var d=f.getHashes?f.getHashes().slice():["sha1","md5"],v=(d.push("passthrough"),["buffer","hex","binary","base64"]);function g(t,e){var n={};if(n.algorithm=(e=e||{}).algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<d.length;++r)d[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=d[r]);if(-1===d.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+d.join(", "));if(-1===v.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+v.join(", "));return n}function m(t){if("function"==typeof t)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function y(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){return this["_"+(null===(e=t.replacer?t.replacer(e):e)?"null":typeof e)](e)},_object:function(e){var i,s=Object.prototype.toString.call(e),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+s+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r("buffer:"),r(e);if("object"===a||"function"===a||"asyncfunction"===a)return s=Object.keys(e),t.unorderedObjects&&(s=s.sort()),!1===t.respectType||m(e)||s.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(s=s.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+s.length+":"),i=this,s.forEach((function(n){i.dispatch(n),r(":"),t.excludeValues||i.dispatch(e[n]),r(",")}));if(!this["_"+a]){if(t.ignoreUnknown)return r("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r("array:"+e.length+":"),!i||e.length<=1)return e.forEach((function(t){return o.dispatch(t)}));var s=[];return i=e.map((function(e){var r=new b,i=n.slice();return y(t,r,i).dispatch(e),s=s.concat(i.slice(n.length)),r.read().toString()})),n=n.concat(s),i.sort(),this._array(i,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),m(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("int8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("int16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("int32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){return r("map:"),e=Array.from(e),this._array(e,!1!==t.unorderedSets)},_set:function(e){return r("set:"),e=Array.from(e),this._array(e,!1!==t.unorderedSets)},_file:function(t){return r("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(t){return r("bigint:"+t.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function b(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),y(e=g(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,n){(function(t,e,r,i,o,s,a,u,c){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),u="_".charCodeAt(0);function c(t){return(t=t.charCodeAt(0))===n||t===a?62:t===r||t===u?63:t<i?-1:t<i+10?t-i+26+26:t<s+26?t-s:t<o+26?t-o+26:void 0}t.toByteArray=function(t){var n,r;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.length,o=(i="="===t.charAt(i-2)?2:"="===t.charAt(i-1)?1:0,new e(3*t.length/4-i)),s=0<i?t.length-4:t.length,a=0;function u(t){o[a++]=t}for(n=0;n<s;n+=4,0)u((16711680&(r=c(t.charAt(n))<<18|c(t.charAt(n+1))<<12|c(t.charAt(n+2))<<6|c(t.charAt(n+3))))>>16),u((65280&r)>>8),u(255&r);return 2==i?u(255&(r=c(t.charAt(n))<<2|c(t.charAt(n+1))>>4)):1==i&&(u((r=c(t.charAt(n))<<10|c(t.charAt(n+1))<<4|c(t.charAt(n+2))>>2)>>8&255),u(255&r)),o},t.fromByteArray=function(t){var e,n,r,i,o=t.length%3,s="";function a(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-o;e<r;e+=3)s+=a((i=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+a(i>>12&63)+a(i>>6&63)+a(63&i);switch(o){case 1:s=(s+=a((n=t[t.length-1])>>2))+a(n<<4&63)+"==";break;case 2:s=(s=(s+=a((n=(t[t.length-2]<<8)+t[t.length-1])>>10))+a(n>>4&63))+a(n<<2&63)+"="}return s}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,n){(function(e,r,i,o,s,a,u,c,l){var h=t("base64-js"),f=t("ieee754");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r,o,s,a,u=typeof t;if("base64"===e&&"string"==u)for(t=(a=t).trim?a.trim():a.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if("number"==u)r=S(t);else if("string"==u)r=i.byteLength(t,e);else{if("object"!=u)throw new Error("First argument needs to be a number, array or string.");r=S(t.length)}if(i._useTypedArrays?o=i._augment(new Uint8Array(r)):((o=this).length=r,o._isBuffer=!0),i._useTypedArrays&&"number"==typeof t.byteLength)o._set(t);else if(j(a=t)||i.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)for(s=0;s<r;s++)i.isBuffer(t)?o[s]=t.readUInt8(s):o[s]=t[s];else if("string"==u)o.write(t,0,e);else if("number"==u&&!i._useTypedArrays&&!n)for(s=0;s<r;s++)o[s]=0;return o}function p(t,e,n,r){var i;if(r||(D("boolean"==typeof n,"missing or invalid endian"),D(null!=e,"missing offset"),D(e+1<t.length,"Trying to read beyond buffer length")),!((r=t.length)<=e))return n?(i=t[e],e+1<r&&(i|=t[e+1]<<8)):(i=t[e]<<8,e+1<r&&(i|=t[e+1])),i}function d(t,e,n,r){var i;if(r||(D("boolean"==typeof n,"missing or invalid endian"),D(null!=e,"missing offset"),D(e+3<t.length,"Trying to read beyond buffer length")),!((r=t.length)<=e))return n?(e+2<r&&(i=t[e+2]<<16),e+1<r&&(i|=t[e+1]<<8),i|=t[e],e+3<r&&(i+=t[e+3]<<24>>>0)):(e+1<r&&(i=t[e+1]<<16),e+2<r&&(i|=t[e+2]<<8),e+3<r&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}function v(t,e,n,r){if(r||(D("boolean"==typeof n,"missing or invalid endian"),D(null!=e,"missing offset"),D(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e))return 32768&(r=p(t,e,n,!0))?-1*(65535-r+1):r}function g(t,e,n,r){if(r||(D("boolean"==typeof n,"missing or invalid endian"),D(null!=e,"missing offset"),D(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e))return 2147483648&(r=d(t,e,n,!0))?-1*(4294967295-r+1):r}function m(t,e,n,r){return r||(D("boolean"==typeof n,"missing or invalid endian"),D(e+3<t.length,"Trying to read beyond buffer length")),f.read(t,e,n,23,4)}function y(t,e,n,r){return r||(D("boolean"==typeof n,"missing or invalid endian"),D(e+7<t.length,"Trying to read beyond buffer length")),f.read(t,e,n,52,8)}function b(t,e,n,r,i){if(i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+1<t.length,"trying to write beyond buffer length"),O(e,65535)),!((i=t.length)<=n))for(var o=0,s=Math.min(i-n,2);o<s;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function w(t,e,n,r,i){if(i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+3<t.length,"trying to write beyond buffer length"),O(e,4294967295)),!((i=t.length)<=n))for(var o=0,s=Math.min(i-n,4);o<s;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function _(t,e,n,r,i){i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+1<t.length,"Trying to write beyond buffer length"),P(e,32767,-32768)),t.length<=n||b(t,0<=e?e:65535+e+1,n,r,i)}function x(t,e,n,r,i){i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+3<t.length,"Trying to write beyond buffer length"),P(e,2147483647,-2147483648)),t.length<=n||w(t,0<=e?e:4294967295+e+1,n,r,i)}function A(t,e,n,r,i){i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+3<t.length,"Trying to write beyond buffer length"),I(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||f.write(t,e,n,r,23,4)}function E(t,e,n,r,i){i||(D(null!=e,"missing value"),D("boolean"==typeof r,"missing or invalid endian"),D(null!=n,"missing offset"),D(n+7<t.length,"Trying to write beyond buffer length"),I(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||f.write(t,e,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=V(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=z(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if(D(j(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];if("number"!=typeof e)for(o=e=0;o<t.length;o++)e+=t[o].length;for(var n=new i(e),r=0,o=0;o<t.length;o++){var s=t[o];s.copy(n,r),r+=s.length}return n},i.prototype.write=function(t,e,n,r){isFinite(e)?isFinite(n)||(r=n,n=void 0):(c=r,r=e,e=n,n=c),e=Number(e)||0;var o,s,a,u,c=this.length-e;switch((!n||c<(n=Number(n)))&&(n=c),r=String(r||"utf8").toLowerCase()){case"hex":o=function(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o),D((o=e.length)%2==0,"Invalid hex string"),o/2<r&&(r=o/2);for(var s=0;s<r;s++){var a=parseInt(e.substr(2*s,2),16);D(!isNaN(a),"Invalid hex string"),t[n+s]=a}return i._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":s=this,a=e,u=n,o=i._charsWritten=L(V(t),s,a,u);break;case"ascii":case"binary":o=function(t,e,n,r){return i._charsWritten=L(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}(this,t,e,n);break;case"base64":s=this,a=e,u=n,o=i._charsWritten=L(z(t),s,a,u);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(t,e,n,r){return i._charsWritten=L(function(t){for(var e,n,r=[],i=0;i<t.length;i++)e=(n=t.charCodeAt(i))>>8,n%=256,r.push(n),r.push(e);return r}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return o},i.prototype.toString=function(t,e,n){var r,i,o,s,a=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):a.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;o++)i+=k(t[o]);return i}(a,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=B(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+B(i)}(a,e,n);break;case"ascii":case"binary":r=function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}(a,e,n);break;case"base64":i=a,s=n,r=0===(o=e)&&s===i.length?h.fromByteArray(i):h.fromByteArray(i.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(a,e,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){if(e=e||0,(r=r||0===r?r:this.length)!==(n=n||0)&&0!==t.length&&0!==this.length){D(n<=r,"sourceEnd < sourceStart"),D(0<=e&&e<t.length,"targetStart out of bounds"),D(0<=n&&n<this.length,"sourceStart out of bounds"),D(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length);var o=(r=t.length-e<r-n?t.length-e+n:r)-n;if(o<100||!i._useTypedArrays)for(var s=0;s<o;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+o),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=C(t,n,0),e=C(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),s=0;s<r;s++)o[s]=this[s+t];return o},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(D(null!=t,"missing offset"),D(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return p(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return p(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return d(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return d(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(D(null!=t,"missing offset"),D(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return v(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return v(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return g(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return g(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return m(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return m(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return y(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return y(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(D(null!=t,"missing value"),D(null!=e,"missing offset"),D(e<this.length,"trying to write beyond buffer length"),O(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){w(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){w(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(D(null!=t,"missing value"),D(null!=e,"missing offset"),D(e<this.length,"Trying to write beyond buffer length"),P(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){_(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){_(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){x(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){x(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){A(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){A(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){E(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){E(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(e=e||0,n=n||this.length,D("number"==typeof(t="string"==typeof(t=t||0)?t.charCodeAt(0):t)&&!isNaN(t),"value is not a number"),D(e<=n,"end < start"),n!==e&&0!==this.length){D(0<=e&&e<this.length,"start out of bounds"),D(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=k(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var M=i.prototype;function C(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t||0<=(t+=e)?t:0}function S(t){return(t=~~Math.ceil(+t))<0?0:t}function j(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else for(var i=n,o=(55296<=r&&r<=57343&&n++,encodeURIComponent(t.slice(i,n+1)).substr(1).split("%")),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}return e}function z(t){return h.toByteArray(t)}function L(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function B(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function O(t,e){D("number"==typeof t,"cannot write a non-number as a number"),D(0<=t,"specified a negative value for writing an unsigned value"),D(t<=e,"value is larger than maximum value for type"),D(Math.floor(t)===t,"value has a fractional component")}function P(t,e,n){D("number"==typeof t,"cannot write a non-number as a number"),D(t<=e,"value larger than maximum allowed value"),D(n<=t,"value smaller than minimum allowed value"),D(Math.floor(t)===t,"value has a fractional component")}function I(t,e,n){D("number"==typeof t,"cannot write a non-number as a number"),D(t<=e,"value larger than maximum allowed value"),D(n<=t,"value smaller than minimum allowed value")}function D(t,e){if(!t)throw new Error(e||"Failed assertion")}i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=M.get,t.set=M.set,t.write=M.write,t.toString=M.toString,t.toLocaleString=M.toString,t.toJSON=M.toJSON,t.copy=M.copy,t.slice=M.slice,t.readUInt8=M.readUInt8,t.readUInt16LE=M.readUInt16LE,t.readUInt16BE=M.readUInt16BE,t.readUInt32LE=M.readUInt32LE,t.readUInt32BE=M.readUInt32BE,t.readInt8=M.readInt8,t.readInt16LE=M.readInt16LE,t.readInt16BE=M.readInt16BE,t.readInt32LE=M.readInt32LE,t.readInt32BE=M.readInt32BE,t.readFloatLE=M.readFloatLE,t.readFloatBE=M.readFloatBE,t.readDoubleLE=M.readDoubleLE,t.readDoubleBE=M.readDoubleBE,t.writeUInt8=M.writeUInt8,t.writeUInt16LE=M.writeUInt16LE,t.writeUInt16BE=M.writeUInt16BE,t.writeUInt32LE=M.writeUInt32LE,t.writeUInt32BE=M.writeUInt32BE,t.writeInt8=M.writeInt8,t.writeInt16LE=M.writeInt16LE,t.writeInt16BE=M.writeInt16BE,t.writeInt32LE=M.writeInt32LE,t.writeInt32BE=M.writeInt32BE,t.writeFloatLE=M.writeFloatLE,t.writeFloatBE=M.writeFloatBE,t.writeDoubleLE=M.writeDoubleLE,t.writeDoubleBE=M.writeDoubleBE,t.fill=M.fill,t.inspect=M.inspect,t.toArrayBuffer=M.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){i=t("buffer").Buffer;var h=new i(4);h.fill(0),e.exports={hash:function(t,e,n,r){for(var o=e(function(t,e){t.length%4!=0&&(n=t.length+(4-t.length%4),t=i.concat([t,h],n));for(var n,r=[],o=e?t.readInt32BE:t.readInt32LE,s=0;s<t.length;s+=4)r.push(o.call(t,s));return r}(t=i.isBuffer(t)?t:new i(t),r),8*t.length),s=(e=r,new i(n)),a=e?s.writeInt32BE:s.writeInt32LE,u=0;u<o.length;u++)a.call(s,o[u],4*u,!0);return s}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,n){(function(e,r,i,o,s,a,u,c,l){i=t("buffer").Buffer;var h=t("./sha"),f=t("./sha256"),p=t("./rng"),d={sha1:h,sha256:f,md5:t("./md5")},v=64,g=new i(v);function m(t,e){var n=d[t=t||"sha1"],r=[];return n||y("algorithm:",t,"is not yet supported"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),t.length,this},digest:function(t){var o=i.concat(r);return o=e?function(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>v?e=t(e):e.length<v&&(e=i.concat([e,g],v));for(var r=new i(v),o=new i(v),s=0;s<v;s++)r[s]=54^e[s],o[s]=92^e[s];return n=t(i.concat([r,n])),t(i.concat([o,n]))}(n,e,o):n(o),r=null,t?o.toString(t):o}}}function y(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(t){return m(t)},n.createHmac=m,n.randomBytes=function(t,e){if(!e||!e.call)return new i(p(t));try{e.call(this,void 0,new i(p(t)))}catch(t){e(t)}};var b,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(t){n[t]=function(){y("sorry,",t,"is not implemented yet")}};for(b in w)_(w[b])}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){var h=t("./helpers");function f(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,u=r,c=i,l=o;n=d(n,r,i,o,t[s+0],7,-680876936),o=d(o,n,r,i,t[s+1],12,-389564586),i=d(i,o,n,r,t[s+2],17,606105819),r=d(r,i,o,n,t[s+3],22,-1044525330),n=d(n,r,i,o,t[s+4],7,-176418897),o=d(o,n,r,i,t[s+5],12,1200080426),i=d(i,o,n,r,t[s+6],17,-1473231341),r=d(r,i,o,n,t[s+7],22,-45705983),n=d(n,r,i,o,t[s+8],7,1770035416),o=d(o,n,r,i,t[s+9],12,-1958414417),i=d(i,o,n,r,t[s+10],17,-42063),r=d(r,i,o,n,t[s+11],22,-1990404162),n=d(n,r,i,o,t[s+12],7,1804603682),o=d(o,n,r,i,t[s+13],12,-40341101),i=d(i,o,n,r,t[s+14],17,-1502002290),n=v(n,r=d(r,i,o,n,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=v(o,n,r,i,t[s+6],9,-1069501632),i=v(i,o,n,r,t[s+11],14,643717713),r=v(r,i,o,n,t[s+0],20,-373897302),n=v(n,r,i,o,t[s+5],5,-701558691),o=v(o,n,r,i,t[s+10],9,38016083),i=v(i,o,n,r,t[s+15],14,-660478335),r=v(r,i,o,n,t[s+4],20,-405537848),n=v(n,r,i,o,t[s+9],5,568446438),o=v(o,n,r,i,t[s+14],9,-1019803690),i=v(i,o,n,r,t[s+3],14,-187363961),r=v(r,i,o,n,t[s+8],20,1163531501),n=v(n,r,i,o,t[s+13],5,-1444681467),o=v(o,n,r,i,t[s+2],9,-51403784),i=v(i,o,n,r,t[s+7],14,1735328473),n=g(n,r=v(r,i,o,n,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=g(o,n,r,i,t[s+8],11,-2022574463),i=g(i,o,n,r,t[s+11],16,1839030562),r=g(r,i,o,n,t[s+14],23,-35309556),n=g(n,r,i,o,t[s+1],4,-1530992060),o=g(o,n,r,i,t[s+4],11,1272893353),i=g(i,o,n,r,t[s+7],16,-155497632),r=g(r,i,o,n,t[s+10],23,-1094730640),n=g(n,r,i,o,t[s+13],4,681279174),o=g(o,n,r,i,t[s+0],11,-358537222),i=g(i,o,n,r,t[s+3],16,-722521979),r=g(r,i,o,n,t[s+6],23,76029189),n=g(n,r,i,o,t[s+9],4,-640364487),o=g(o,n,r,i,t[s+12],11,-421815835),i=g(i,o,n,r,t[s+15],16,530742520),n=m(n,r=g(r,i,o,n,t[s+2],23,-995338651),i,o,t[s+0],6,-198630844),o=m(o,n,r,i,t[s+7],10,1126891415),i=m(i,o,n,r,t[s+14],15,-1416354905),r=m(r,i,o,n,t[s+5],21,-57434055),n=m(n,r,i,o,t[s+12],6,1700485571),o=m(o,n,r,i,t[s+3],10,-1894986606),i=m(i,o,n,r,t[s+10],15,-1051523),r=m(r,i,o,n,t[s+1],21,-2054922799),n=m(n,r,i,o,t[s+8],6,1873313359),o=m(o,n,r,i,t[s+15],10,-30611744),i=m(i,o,n,r,t[s+6],15,-1560198380),r=m(r,i,o,n,t[s+13],21,1309151649),n=m(n,r,i,o,t[s+4],6,-145523070),o=m(o,n,r,i,t[s+11],10,-1120210379),i=m(i,o,n,r,t[s+2],15,718787259),r=m(r,i,o,n,t[s+9],21,-343485551),n=y(n,a),r=y(r,u),i=y(i,c),o=y(o,l)}return Array(n,r,i,o)}function p(t,e,n,r,i,o){return y((e=y(y(e,t),y(r,o)))<<i|e>>>32-i,n)}function d(t,e,n,r,i,o,s){return p(e&n|~e&r,t,e,i,o,s)}function v(t,e,n,r,i,o,s){return p(e&r|n&~r,t,e,i,o,s)}function g(t,e,n,r,i,o,s){return p(e^n^r,t,e,i,o,s)}function m(t,e,n,r,i,o,s){return p(n^(e|~r),t,e,i,o,s)}function y(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return h.hash(t,f,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,n){(function(t,n,r,i,o,s,a,u,c){e.exports=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){var h=t("./helpers");function f(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r,i,o=Array(80),s=1732584193,a=-271733879,u=-1732584194,c=271733878,l=-1009589776,h=0;h<t.length;h+=16){for(var f=s,v=a,g=u,m=c,y=l,b=0;b<80;b++){o[b]=b<16?t[h+b]:d(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);var w=p(p(d(s,5),(w=a,r=u,i=c,(n=b)<20?w&r|~w&i:!(n<40)&&n<60?w&r|w&i|r&i:w^r^i)),p(p(l,o[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));l=c,c=u,u=d(a,30),a=s,s=w}s=p(s,f),a=p(a,v),u=p(u,g),c=p(c,m),l=p(l,y)}return Array(s,a,u,c,l)}function p(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function d(t,e){return t<<e|t>>>32-e}e.exports=function(t){return h.hash(t,f,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,n){(function(n,r,i,o,s,a,u,c,l){function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function f(t,e){var n,r=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),o=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var s,a,u=0;u<t.length;u+=16){for(var c=i[0],l=i[1],f=i[2],p=i[3],g=i[4],m=i[5],y=i[6],b=i[7],w=0;w<64;w++)o[w]=w<16?t[w+u]:h(h(h((a=o[w-2],d(a,17)^d(a,19)^v(a,10)),o[w-7]),(a=o[w-15],d(a,7)^d(a,18)^v(a,3))),o[w-16]),n=h(h(h(h(b,d(a=g,6)^d(a,11)^d(a,25)),g&m^~g&y),r[w]),o[w]),s=h(d(s=c,2)^d(s,13)^d(s,22),c&l^c&f^l&f),b=y,y=m,m=g,g=h(p,n),p=f,f=l,l=c,c=h(n,s);i[0]=h(c,i[0]),i[1]=h(l,i[1]),i[2]=h(f,i[2]),i[3]=h(p,i[3]),i[4]=h(g,i[4]),i[5]=h(m,i[5]),i[6]=h(y,i[6]),i[7]=h(b,i[7])}return i}var p=t("./helpers"),d=function(t,e){return t>>>e|t<<32-e},v=function(t,e){return t>>>e};e.exports=function(t){return p.hash(t,f,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,n){(function(t,e,r,i,o,s,a,u,c){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1;for(i=t[e+h],h+=f,o=i&(1<<-l)-1,i>>=-l,l+=a;0<l;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=c}return(i?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1;for(o=e<0||0===e&&1/e<0?1:0,e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(e*r-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+f]=255&s,f+=p,s/=256,u-=8);t[n+f-p]|=128*o}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,n){(function(t,n,r,i,o,s,a,u,c){var l,h,f;function p(){}(t=e.exports={}).nextTick=(h="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener,h?function(t){return window.setImmediate(t)}:f?(l=[],window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<l.length&&l.shift()())}),!0),function(t){l.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},396:t=>{"use strict";t.exports=THREE}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";n.r(r),n.d(r,{BrillouinZoneViewer:()=>b,StructureViewer:()=>f});var t=n(396);const e=new CustomEvent("change"),i=new CustomEvent("start"),o=new CustomEvent("end"),s=-1;class a{constructor(e,n){this._state=s,this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=.2,this.panSpeed=.3,this.enableRotate=!0,this.enableZoom=!0,this.enablePan=!0,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.rotationCenter=new t.Vector3,this.target=new t.Vector3,this._prevState=s,this._eye=new t.Vector3,this._movePrev=new t.Vector2,this._moveCurr=new t.Vector2,this._lastAxis=new t.Vector3,this._lastAngle=0,this._lastPosition=new t.Vector3,this._zoomStart=new t.Vector2,this._zoomEnd=new t.Vector2,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._panStart=new t.Vector2,this._panEnd=new t.Vector2,this._zoomed=!1,this.rotationCenter0=this.rotationCenter.clone(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.domElement.addEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.addEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.addEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.addEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.addEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.addEventListener("touchend",this.touchend.bind(this),!1),this.domElement.addEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.addEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.addEventListener("mouseup",this.mouseup.bind(this),!1),this.domElement.addEventListener("dblclick",this.dblclick.bind(this),!1),this.handleResize(),this.update()}handleResize(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{const t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}}handleEvent(t){"function"==typeof this[t.type]&&this[t.type](t)}getMouseOnScreen(e,n){const r=new t.Vector2;return r.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.width),r}getMouseOnCircle(e,n){const r=new t.Vector2;return r.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-n))/this.screen.width),r}rotateCamera(){const e=new t.Vector3,n=new t.Quaternion,r=new t.Vector3,i=new t.Vector3,o=new t.Vector3,s=new t.Vector3;s.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let a=s.length();if(a){this._eye.copy(this.object.position).sub(this.rotationCenter),r.copy(this._eye).normalize(),i.copy(this.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(this._moveCurr.y-this._movePrev.y),o.setLength(this._moveCurr.x-this._movePrev.x),s.copy(i.add(o)),e.crossVectors(s,this._eye).normalize();const t=this.object.zoom;a*=this.rotateSpeed,a/=t,n.setFromAxisAngle(e,a),this._eye.applyQuaternion(n),this.object.up.applyQuaternion(n),this._lastAxis.copy(e),this._lastAngle=a}else!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.rotationCenter),n.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(n),this.object.up.applyQuaternion(n));this._movePrev.copy(this._moveCurr)}zoomCamera(){let t;4===this._state?(t=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0):(t=this._zoomEnd.y-this._zoomStart.y+1,1!==t&&t>0&&(this.object.zoom/=t,this.object.updateProjectionMatrix(),this._zoomed=!0,this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor))}panCamera(){const e=new t.Vector2,n=new t.Vector3,r=new t.Vector3;if(e.copy(this._panEnd).sub(this._panStart),e.lengthSq()){const t=this.object.zoom;e.multiplyScalar(this.panSpeed/t),r.copy(this._eye).cross(this.object.up).setLength(e.x),r.add(n.copy(this.object.up).setLength(e.y)),this.object.position.add(r),this.rotationCenter.add(r),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(e.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}checkDistances(){(this.enableZoom||this.enablePan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.rotationCenter,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}update(){this._eye.subVectors(this.object.position,this.rotationCenter),this.enableRotate&&this.rotateCamera(),this.enableZoom&&this.zoomCamera(),this.enablePan&&this.panCamera(),this.object.position.addVectors(this.rotationCenter,this._eye),this.checkDistances(),this.object.lookAt(this.rotationCenter),(this._lastPosition.distanceToSquared(this.object.position)>1e-4||this._zoomed)&&(this.dispatchEvent(e),this._lastPosition.copy(this.object.position),this._zoomed=!1)}saveReset(){this.rotationCenter0.copy(this.rotationCenter),this.position0.copy(this.object.position),this.up0.copy(this.object.up),this.zoom0=this.object.zoom}reset(){this._state=s,this._prevState=s,this.rotationCenter.copy(this.rotationCenter0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this._eye.subVectors(this.object.position,this.rotationCenter),this.object.lookAt(this.rotationCenter),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._lastPosition.copy(this.object.position)}dispose(){this.domElement.removeEventListener("contextmenu",this.contextmenu.bind(this),!1),this.domElement.removeEventListener("mousedown",this.mousedown.bind(this),!1),this.domElement.removeEventListener("mousewheel",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("MozMousePixelScroll",this.mousewheel.bind(this),!1),this.domElement.removeEventListener("touchstart",this.touchstart.bind(this),!1),this.domElement.removeEventListener("touchend",this.touchend.bind(this),!1),this.domElement.removeEventListener("touchmove",this.touchmove.bind(this),!1),this.domElement.removeEventListener("mousemove",this.mousemove.bind(this),!1),this.domElement.removeEventListener("mouseup",this.mouseup.bind(this),!1),this.domElement.removeEventListener("dblclick",this.dblclick.bind(this),!1)}mousedown(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state===s&&(this._state=t.button),0===this._state&&this.enableRotate?(this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr)):1===this._state&&this.enableZoom?(this._zoomStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._zoomEnd.copy(this._zoomStart)):2===this._state&&this.enablePan&&(this._panStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(i))}mousemove(t){!1!==this.enabled&&(this._state!==s&&(t.preventDefault(),t.stopPropagation()),0===this._state&&this.enableRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY))):1===this._state&&this.enableZoom?this._zoomEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)):2===this._state&&this.enablePan&&this._panEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this.update())}mouseup(t){!1!==this.enabled&&(t.preventDefault(),t.stopPropagation(),this._state=s,document.removeEventListener("mousemove",this.mousemove.bind(this)),document.removeEventListener("mouseup",this.mouseup.bind(this)),this.dispatchEvent(o))}dblclick(t){!1!==this.enabled&&this.resetOnDoubleClick&&(t.preventDefault(),t.stopPropagation(),this.reset(),this.dispatchEvent(e))}mousewheel(t){if(!1===this.enabled)return;t.preventDefault(),t.stopPropagation();let e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e/=Math.abs(e),this._zoomStart.y+=e*this.zoomSpeed,this.dispatchEvent(i),this.dispatchEvent(o),this.update()}touchstart(t){if(!1!==this.enabled){if(1===t.touches.length)this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=4;const e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);const r=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart)}this.dispatchEvent(i)}}touchmove(t){if(!1!==this.enabled){if(t.preventDefault(),t.stopPropagation(),1===t.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY));else{const e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(e*e+n*n);const r=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(r,i))}this.update()}}touchend(t){if(!1!==this.enabled){switch(t.touches.length){case 0:this._state=s;break;case 1:this._state=3,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(o)}}contextmenu(t){t.preventDefault()}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t)}}}var u=n(486);class c{constructor(e,n={}){if(this.hostElement=e,this.scenes=[],this.objects=[],this.cameraWidth=10,this.options={},this.translation=new t.Vector3,!this.webglAvailable())throw Error("WebGL is not supported on this browser, cannot display viewer.");this.rendererDefaults=(0,u.merge)((0,u.cloneDeep)({pixelRatioScale:1,antialias:{enabled:!0},background:{color:"#fff",opacity:0},shadows:{enabled:!1}}),(0,u.cloneDeep)(null==n?void 0:n.renderer)),this.controlDefaults=(0,u.merge)((0,u.cloneDeep)({zoom:{enabled:!0,speed:.2},rotation:{enabled:!0,speed:2.5},pan:{enabled:!0,speed:10},resetOnDoubleClick:!0}),(0,u.cloneDeep)(null==n?void 0:n.controls)),this.setOptions(n),this.setupRootElement(),this.setupRenderer(),this.setupScenes(),this.setupLights(),this.setupCamera(),this.changeHostElement(e)}takeScreenShot(t){let e;try{const n="image/png",r="image/octet-stream";this.render(),e=this.renderer.domElement.toDataURL(n);const i=e.replace(n,r);t+=".png";const o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.download=t,o.href=i,o.click(),document.body.removeChild(o)}catch(t){return void console.log(t)}}webglAvailable(){const t=window;try{const e=document.createElement("canvas");return!(!t.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}setupRenderer(){this.renderer=new t.WebGLRenderer({alpha:1!==this.rendererDefaults.background.opacity,antialias:this.rendererDefaults.antialias.enabled,preserveDrawingBuffer:!1,powerPreference:"high-performance"}),this.renderer.setPixelRatio(window.devicePixelRatio*this.rendererDefaults.pixelRatioScale),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=t.PCFSoftShadowMap,this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),this.renderer.setClearColor(this.rendererDefaults.background.color,this.rendererDefaults.background.opacity),this.rootElement.appendChild(this.renderer.domElement),this.renderer.autoClear=!1}setBackgroundColor(t,e){this.renderer.setClearColor(t,e)}setupCamera(){const e=this.rootElement.clientWidth/this.rootElement.clientHeight,n=this.cameraWidth,r=n/e;this.camera=new t.OrthographicCamera(n/-2,n/2,r/2,r/-2,-100,1e3),this.camera.name="camera",this.camera.position.z=20}setupRootElement(){this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="relative"}changeHostElement(t,e=!0){if(!(0,u.isNil)(t)){if(this.hostElement)for(;this.hostElement.firstChild;)this.hostElement.removeChild(this.hostElement.firstChild);t.appendChild(this.rootElement),e&&this.fitCanvas()}}rotate(e){if(void 0!==e)for(const n of e){const e=new t.Vector3(n[0],n[1],n[2]);e.normalize();const r=n[3]/180*Math.PI;for(const t of this.objects)this.rotateAroundWorldAxis(t,e,r)}}setRotation(e){const n=new t.Vector3(e[0],e[1],e[2]);n.normalize();const r=e[3]/180*Math.PI;for(const t of this.objects)t.setRotationFromAxisAngle(n,r)}setTranslation(t){this.translation=t;for(const e of this.objects)e.position.copy(t)}translate(t){this.translation.add(t);for(const e of this.objects)e.position.add(t)}saveCameraReset(){if((0,u.isNil)(this.controlsObject))throw Error("Could not save camera reset as controls are not set. Please call the controls()-method first.");this.controlsObject.saveReset()}resetCamera(){if((0,u.isNil)(this.controlsObject))throw Error("Could not reset as controls are not set. Please call the controls()-method first.");this.controlsObject.reset(),this.render()}controls(e){const n=(0,u.merge)((0,u.cloneDeep)(this.controlDefaults),(0,u.cloneDeep)(e)),r=new a(this.camera,this.rootElement);r.rotateSpeed=n.rotation.speed,r.rotationCenter=new t.Vector3,r.zoomSpeed=n.zoom.speed,r.panSpeed=n.pan.speed,r.enableZoom=n.zoom.enabled,r.enablePan=n.pan.enabled,r.enableRotate=n.rotation.enabled,r.resetOnDoubleClick=n.resetOnDoubleClick,r.staticMoving=!0,r.dynamicDampingFactor=.25,r.keys=[65,83,68],r.addEventListener("change",this.render.bind(this)),this.controlsObject=r}createCornerPoints(e,n){const r=e.clone().add(n[0]).add(n[1]).add(n[2]),i=[e,r];for(let t=n.length,o=0;o<t;++o)i.push(e.clone().add(n[o].clone())),i.push(r.clone().sub(n[o].clone()));return(new t.BufferGeometry).setFromPoints(i)}fitViewToPoints(e,n){this.scenes.forEach((t=>t.updateMatrixWorld()));const r=this.rootElement,i=r.clientWidth,o=r.clientHeight,s=[],a=e.length;this.camera.zoom=1,this.camera.updateProjectionMatrix();const u=new t.Vector3(0,0,0);u.project(this.camera),u.x=Math.round((u.x+1)*i/2),u.y=Math.round((1-u.y)*o/2),u.z=0;const c=new t.Vector3(n,n,0);c.project(this.camera),c.x=Math.round((c.x+1)*i/2),c.y=Math.round((1-c.y)*o/2),c.sub(u),c.x=Math.abs(c.x),c.y=Math.abs(c.y),c.z=0;for(let t=0;t<a;++t){const n=e[t].clone();n.project(this.camera),n.x=Math.round((n.x+1)*i/2),n.y=Math.round((1-n.y)*o/2),n.z=0,s.push(n)}let l=s[0].x,h=s[0].x,f=s[0].y,p=s[0].y;for(let t=s.length,e=0;e<t;++e){const t=s[e],n=t.x,r=t.y;n>h?h=n:n<l&&(l=n),r>p?p=r:r<f&&(f=r)}l-=c.x,h+=c.x,f-=c.y,p+=c.y;const d=i/2,v=o/2,g=d/Math.abs(h-d),m=d/Math.abs(l-d),y=v/Math.abs(f-v),b=v/Math.abs(p-v),w=Math.min(g,m,y,b);this.camera.zoom=w,this.camera.updateProjectionMatrix()}getZoom(){return this.camera.zoom}zoom(t){this.camera.zoom=t,this.camera.updateProjectionMatrix()}fitCanvas(){const t=this.rootElement.clientWidth/this.rootElement.clientHeight,e=this.cameraWidth,n=e/t;this.camera.left=-e/2,this.camera.right=e/2,this.camera.top=n/2,this.camera.bottom=-n/2,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.rootElement.clientWidth,this.rootElement.clientHeight),(0,u.isNil)(this.controlsObject)||this.controlsObject.handleResize()}render(){this.renderer.clear();for(let t=0;t<this.scenes.length;++t){const e=this.scenes[t];this.renderer.render(e,this.camera),t!==this.scenes.length-1&&this.renderer.clearDepth()}}createCylinder(e,n,r,i,o){const s=(new t.Vector3).subVectors(n,e),a=s.length(),u=s.clone().divideScalar(a),c=new t.ArrowHelper(u,e),l=new t.CylinderGeometry(r,r,a,i),h=new t.Mesh(l,o);return h.rotation.copy(c.rotation.clone()),h.position.copy((new t.Vector3).addVectors(e,s.multiplyScalar(.5))),h}createLabel(e,n,r,i,o,s,a=0,u="#000"){const c=document.createElement("canvas");c.width=256,c.height=256;const l=c.getContext("2d");l.fillStyle=r,l.font=`230.4px ${i}`,l.textAlign="center",l.textBaseline="middle",a>0&&(l.lineWidth=256*a,l.strokeStyle=u,l.strokeText(n,128,128)),l.fillText(n,128,128);const h=new t.Texture(c);h.needsUpdate=!0;const f=new t.SpriteMaterial({map:h}),p=new t.Sprite(f);p.scale.set(o,o,1),void 0===s&&(s=new t.Vector2(0,0));const d=new t.Vector2;d.addVectors(s,new t.Vector2(.5,.5)),p.center.copy(d);const v=new t.Object3D;return v.position.copy(e),v.add(p),v}rotateAroundWorldAxis(e,n,r){const i=new t.Matrix4;i.makeRotationAxis(n.normalize(),r),i.multiply(e.matrix),e.matrix=i,e.rotation.setFromRotationMatrix(e.matrix)}coordinateTransform(t,e,n,r=!0){return(r?n.clone():n).applyMatrix3(t).applyMatrix3(e)}alignView(e,n){if(void 0===e)return;if(e.length>2)throw"At most two alignments can be performed.";const r=[],i=e=>{const i=e[0],o=e[1];let s;switch(i){case"up":s=new t.Vector3(0,1,0);break;case"down":s=new t.Vector3(0,-1,0);break;case"right":s=new t.Vector3(1,0,0);break;case"left":s=new t.Vector3(-1,0,0);break;case"front":s=new t.Vector3(0,0,1);break;case"back":s=new t.Vector3(0,0,-1)}const a=n[o];for(const t of r)a[t]=0;if(a.length()>1e-8){const e=(new t.Quaternion).setFromUnitVectors(a.clone().normalize(),s);for(const t in n)n[t].applyQuaternion(e);for(const t of this.objects)t.applyQuaternion(e),t.updateMatrixWorld();"right"==i||"left"==i?r.push("x"):"up"==i||"down"==i?r.push("y"):"front"!=i&&"back"!=i||r.push("z")}};for(const t of e)i(t)}}var l=n(990),h=n.n(l);class f extends c{constructor(t,e={}){super(t,e),this.hostElement=t,this.atomicRadii=[],this.elementColors=[],this.meshMap={},this.atomConfigMap={},this.configMap={},this.lights=[],this.bondFills=[],this.atomFills=[],this.atomOutlines=[],this.axisLabels=[],this.label_missing="X",this.elementNames=[this.label_missing,"H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"],this.elementNumbers={[this.label_missing]:0,H:1,He:2,Li:3,Be:4,B:5,C:6,N:7,O:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,S:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Nh:113,Fl:114,Mc:115,Lv:116,Ts:117,Og:118},this.radii_unknown=.1,this.covalentRadii=[this.radii_unknown,.31,.28,1.28,.96,.84,.76,.71,.66,.57,.58,1.66,1.41,1.21,1.11,1.07,1.05,1.02,1.06,2.03,1.76,1.7,1.6,1.53,1.39,1.39,1.32,1.26,1.24,1.32,1.22,1.22,1.2,1.19,1.2,1.2,1.16,2.2,1.95,1.9,1.75,1.64,1.54,1.47,1.46,1.42,1.39,1.45,1.44,1.42,1.39,1.39,1.38,1.39,1.4,2.44,2.15,2.07,2.04,2.03,2.01,1.99,1.98,1.98,1.96,1.94,1.92,1.92,1.89,1.9,1.87,1.87,1.75,1.7,1.62,1.51,1.44,1.41,1.36,1.36,1.32,1.45,1.46,1.48,1.4,1.5,1.5,2.6,2.21,2.15,2.06,2,1.96,1.9,1.87,1.8,1.69,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown,this.radii_unknown],this.color_unknown="#ff1493",this.jmolColors=[this.color_unknown,"#ffffff","#d9ffff","#cc80ff","#c2ff00","#ffb5b5","#909090","#3050f8","#ff0d0d","#90e050","#b3e3f5","#ab5cf2","#8aff00","#bfa6a6","#f0c8a0","#ff8000","#ffff30","#1ff01f","#80d1e3","#8f40d4","#3dff00","#e6e6e6","#bfc2c7","#a6a6ab","#8a99c7","#9c7ac7","#e06633","#f090a0","#50d050","#c88033","#7d80b0","#c28f8f","#668f8f","#bd80e3","#ffa100","#a62929","#5cb8d1","#702eb0","#00ff00","#94ffff","#94e0e0","#73c2c9","#54b5b5","#3b9e9e","#248f8f","#0a7d8c","#006985","#c0c0c0","#ffd98f","#a67573","#668080","#9e63b5","#d47a00","#940094","#429eb0","#57178f","#00c900","#70d4ff","#ffffc7","#d9ffc7","#c7ffc7","#a3ffc7","#8fffc7","#61ffc7","#45ffc7","#30ffc7","#1fffc7","#00ff9c","#00e675","#00d452","#00bf38","#00ab24","#4dc2ff","#4da6ff","#2194d6","#267dab","#266696","#175487","#d0d0e0","#ffd123","#b8b8d0","#a6544d","#575961","#9e4fb5","#ab5c00","#754f45","#428296","#420066","#007d00","#70abfa","#00baff","#00a1ff","#008fff","#0080ff","#006bff","#545cf2","#785ce3","#8a4fe3","#a136d4","#b31fd4","#b31fba","#b30da6","#bd0d87","#c70066","#cc0059","#d1004f","#d90045","#e00038","#e6002e","#eb0026"]}setOptions(t){this.atomDefaults=(0,u.merge)((0,u.cloneDeep)({material:{phong:{shininess:30}},outline:{enabled:!0,color:"#000000",size:.025},opacity:1,color:"Jmol",radius:"covalent",scale:1,smoothness:165}),(0,u.cloneDeep)(null==t?void 0:t.atoms)),this.bondDefaults=(0,u.merge)((0,u.cloneDeep)({enabled:!0,material:{phong:{shininess:30}},outline:{enabled:!0,color:"#000000",size:.025},color:"#ffffff",radius:.08,threshold:1,smoothness:145}),(0,u.cloneDeep)(null==t?void 0:t.bonds)),this.cellDefaults=(0,u.merge)((0,u.cloneDeep)({enabled:!0,color:"#000000",linewidth:1.5,dashSize:0,gapSize:0,periodicity:[!0,!0,!0]}),(0,u.cloneDeep)(null==t?void 0:t.cell)),this.latticeConstantDefaults=(0,u.merge)((0,u.cloneDeep)({enabled:!0,periodicity:[!0,!0,!0],font:"Arial",size:.7,stroke:{width:.06,color:"#000"},a:{enabled:!0,color:"#C52929",label:"a"},b:{enabled:!0,color:"#47A823",label:"b"},c:{enabled:!0,color:"#3B5796",label:"c"},alpha:{enabled:!0,color:"#ffffff",label:"α"},beta:{enabled:!0,color:"#ffffff",label:"β"},gamma:{enabled:!0,color:"#ffffff",label:"γ"}}),(0,u.cloneDeep)(null==t?void 0:t.latticeConstants))}setupScenes(){this.scenes=[],this.sceneStructure=new t.Scene,this.scenes.push(this.sceneStructure),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo),this.root=new t.Object3D,this.container=new t.Object3D,this.info=new t.Object3D,this.atomsObject=new t.Object3D,this.bondsObject=new t.Object3D,this.container.add(this.atomsObject),this.container.add(this.bondsObject),this.angleArcs=new t.Object3D,this.root.add(this.container),this.sceneStructure.add(this.root),this.sceneInfo.add(this.info),this.latticeConstantsGroup=new t.Object3D,this.container.add(this.latticeConstantsGroup),this.objects=[this.root,this.info]}getElementInfo(){return this.elements}toggleShadows(t){this.renderer.shadowMap.enabled=t;for(let e=0;e<this.lights.length;++e)this.lights[e].castShadow=t;for(let e=0;e<this.atomFills.length;++e){const n=this.atomFills[e];n.receiveShadow=t,n.castShadow=t,n.material.needsUpdate=!0}for(let e=0;e<this.bondFills.length;++e){const n=this.bondFills[e];n.receiveShadow=t,n.castShadow=t,n.material.needsUpdate=!0}}load(t){this.structure=t,this.atomicRadii=this.covalentRadii,this.elementColors=this.jmolColors;const e=void 0!==t.fractional&&t.fractional,n=t.positions,r=t.species,i=t.cell,o=(0,u.merge)({type:"none",tolerance:1e-8},(0,u.cloneDeep)(t.wrap)),s=t.pbc||[!1,!1,!1];let a=t.bonds;if(!n)return console.log("No atom positions given to the structure viewer"),!1;if(!r)return console.log("No species given to the structure viewer."),!1;const c="number"==typeof r[0]?r.map((t=>t<0||t>=this.elementNames.length?0:t)):r.map((t=>this.elementNumbers[t]||0));if(this.maxRadii=Math.max(...c.map((t=>this.getRadii(t)))),a){if(!Array.isArray(a))return console.log("Invalid value for 'bonds'. Provide a list of index pairs."),!1}else a="auto";if(n.length!=c.length)return console.log("The number of positions does not match the number of labels."),!1;this.createBasisVectors(i);let l=[],h=[];return!0===e?(l=this.toVectors(n),h=this.toCartesian(l,!0)):!1===e&&(h=this.toVectors(n),void 0!==this.B&&(l=this.toScaled(h,!0))),void 0!==this.B?this.createAtoms(l,c,s,!0,o):(this.basisVectors,this.createAtoms(h,c,s,!1,o)),this.toggleShadows(this.rendererDefaults.shadows.enabled),!0}calculateCOP(e){const n=e.length,r=new t.Vector3;for(let t=0;t<n;++t){const n=e[t];r.add(n)}return r.divideScalar(n),r}center(t){let e;if("COP"===t){const t=this.getPositionsGlobal();e=this.calculateCOP(t)}else if("COC"==t)e=this.getCOCGlobal();else{if(!(0,u.isArray)(t))throw Error("Invalid center positions.");if((0,u.isNumber)(t[0])){const n=this.getPositionsGlobal(),r=t.map((t=>n[t]));e=this.calculateCOP(r)}else{const n=this.toVectors(t);e=this.calculateCOP(n)}}this.translate(e.multiplyScalar(-1))}fit(t,e=0){let n,r=0;if("full"===t)n=this.getPositionsGlobal(),r=this.maxRadii;else{if(!(0,u.isArray)(t))throw Error("Invalid fit positions.");if((0,u.isNumber)(t[0])){const e=this.getPositionsGlobal();n=t.map((t=>e[t])),r=Math.max(...t.map((t=>this.getRadii(this.atomicNumbers[t]))))}else n=this.toVectors(t),n=n.map((t=>t.clone().add(this.translation)))}this.fitViewToPoints(n,e+r)}align(t){const e={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate()};super.alignView(t,e)}atoms(t){(0,u.isNil)(t)?t=[{}]:(0,u.isPlainObject)(t)&&(t=[t]);for(let e of t){e=(0,u.merge)((0,u.cloneDeep)(this.atomDefaults),(0,u.cloneDeep)(e));const t=e.include,n=e.exclude,r=!(0,u.isNil)(t),i=!(0,u.isNil)(n);let o;const s=this.atomicNumbers.length;if(r&&i)throw Error("Only provide include or exclude, not both.");if(r)o=t;else if(i){const t=new Set(n);o=(0,u.range)(s).filter((e=>!t.has(e)))}else o=(0,u.range)(s);delete e.include,delete e.exclude;const a=h()(e,{algorithm:"md5"});this.configMap[a]=e;for(const t of o)this.atomConfigMap[t]=a,this.updateAtom(t,e,a)}}bonds(e){(0,u.isNil)(this.bondsObject)||(this.bondFills=[],this.bondsObject.clear());const n=(0,u.merge)((0,u.cloneDeep)(this.bondDefaults),(0,u.cloneDeep)(e||{}));if(!n.enabled)return;const r=n.include,i=n.exclude,o=!(0,u.isNil)(r),s=!(0,u.isNil)(i);let a;const c=this.atomicNumbers.length;if(o&&s)throw Error("Only provide include or exclude, not both.");if(o)a=r;else if(s){const t=new Set(i);a=(0,u.range)(c).filter((e=>!t.has(e)))}else a=(0,u.range)(c);let l;if(n.material.toon){const e=n.material.toon.tones,r=new Uint8Array(e);for(let t=0;t<=e;t++)r[t]=t/e*256;const i=new t.DataTexture(r,r.length,1,t.LuminanceFormat);i.minFilter=t.NearestFilter,i.magFilter=t.NearestFilter,i.generateMipmaps=!1,l=new t.MeshToonMaterial({color:n.color,gradientMap:i})}else l=new t.MeshPhongMaterial({color:n.color,shininess:n.material.phong.shininess});const h=this.getPositionsLocal();for(const t of a)for(const e of a)if(e>t){const r=h[t],i=h[e],o=this.atomicNumbers[t],s=this.atomicNumbers[e],a=i.clone().sub(r).length(),u=this.atomConfigMap[t],c=this.atomConfigMap[e],f=this.configMap[u],p=this.configMap[c],d=f.scale*this.getRadii(o),v=p.scale*this.getRadii(s);a<=1.1*n.threshold*(d+v)&&this.addBond(t,e,r,i,l,n)}}cell(e){if((0,u.isNil)(this.basisVectors))throw Error("The loaded structure does not have any cell information.");(0,u.isNil)(this.convCell)||this.container.remove(this.convCell);const n=(0,u.merge)((0,u.cloneDeep)(this.cellDefaults),(0,u.cloneDeep)(e||{}));if(n.enabled){const e=this.createCell(new t.Vector3,this.basisVectors,this.basisVectorCollapsed,n.periodicity,n.color,n.linewidth,n.dashSize,n.gapSize);this.convCell=e,this.container.add(this.convCell)}}latticeConstants(e){var n,r,i,o,s,a,c,l,h,f,p,d,v,g,m,y,b,w,_,x,A,E,M,C;if((0,u.isNil)(this.basisVectors))throw Error("The loaded structure does not have any cell information.");this.latticeConstantsGroup.clear(),this.axisLabels=[],this.angleArcs.clear();const S=(0,u.merge)((0,u.cloneDeep)(this.latticeConstantDefaults),(0,u.cloneDeep)(e||{}));if(!S.enabled)return;const j=[];for(let t=0;t<3;++t){const e=S.periodicity[t],n=S.periodicity[(t+1)%3],r=S.periodicity[(t+2)%3];if(e&&!n&&!r){j.push(t);break}if(e&&n&&!r){j.push(t),j.push((t+1)%3);break}}const k=this.basisVectors;this.axisLabels=[],this.info.add(this.latticeConstantsGroup),this.info.add(this.angleArcs);let V=-1;const z=[];z.push(S.a.color),z.push(S.b.color),z.push(S.c.color);const L=[];L.push(S.alpha.color),L.push(S.beta.color),L.push(S.gamma.color);const B=[];B.push(void 0===(null===(r=null===(n=S.alpha)||void 0===n?void 0:n.stroke)||void 0===r?void 0:r.color)?S.stroke.color:S.alpha.stroke.color),B.push(void 0===(null===(o=null===(i=S.beta)||void 0===i?void 0:i.stroke)||void 0===o?void 0:o.color)?S.stroke.color:S.beta.stroke.color),B.push(void 0===(null===(a=null===(s=S.gamma)||void 0===s?void 0:s.stroke)||void 0===a?void 0:a.color)?S.stroke.color:S.gamma.stroke.color);const O=[];O.push(void 0===(null===(l=null===(c=S.alpha)||void 0===c?void 0:c.stroke)||void 0===l?void 0:l.width)?S.stroke.width:S.alpha.stroke.width),O.push(void 0===(null===(f=null===(h=S.beta)||void 0===h?void 0:h.stroke)||void 0===f?void 0:f.width)?S.stroke.width:S.beta.stroke.width),O.push(void 0===(null===(d=null===(p=S.gamma)||void 0===p?void 0:p.stroke)||void 0===d?void 0:d.width)?S.stroke.width:S.gamma.stroke.width);const P=[S.gamma.label,S.alpha.label,S.beta.label],I=[S.a.label,S.b.label,S.c.label],D=[S.gamma.enabled,S.alpha.enabled,S.beta.enabled],T=[S.a.enabled,S.b.enabled,S.c.enabled],F=[];F.push(void 0===S.a.font?S.font:S.a.font),F.push(void 0===S.b.font?S.font:S.b.font),F.push(void 0===S.c.font?S.font:S.c.font);const R=[];R.push(void 0===S.a.size?S.size:S.a.size),R.push(void 0===S.b.size?S.size:S.b.size),R.push(void 0===S.c.size?S.size:S.c.size);const U=[];U.push(void 0===(null===(g=null===(v=S.a)||void 0===v?void 0:v.stroke)||void 0===g?void 0:g.color)?S.stroke.color:S.a.stroke.color),U.push(void 0===(null===(y=null===(m=S.b)||void 0===m?void 0:m.stroke)||void 0===y?void 0:y.color)?S.stroke.color:S.b.stroke.color),U.push(void 0===(null===(w=null===(b=S.c)||void 0===b?void 0:b.stroke)||void 0===w?void 0:w.color)?S.stroke.color:S.c.stroke.color);const N=[];N.push(void 0===(null===(x=null===(_=S.a)||void 0===_?void 0:_.stroke)||void 0===x?void 0:x.width)?S.stroke.width:S.a.stroke.width),N.push(void 0===(null===(E=null===(A=S.b)||void 0===A?void 0:A.stroke)||void 0===E?void 0:E.width)?S.stroke.width:S.b.stroke.width),N.push(void 0===(null===(C=null===(M=S.c)||void 0===M?void 0:M.stroke)||void 0===C?void 0:C.width)?S.stroke.width:S.c.stroke.width);const W=[];W.push(void 0===S.alpha.font?S.font:S.alpha.font),W.push(void 0===S.beta.font?S.font:S.beta.font),W.push(void 0===S.gamma.font?S.font:S.gamma.font);const G=[];G.push(void 0===S.alpha.size?S.size:S.alpha.size),G.push(void 0===S.beta.size?S.size:S.beta.size),G.push(void 0===S.gamma.size?S.size:S.gamma.size);for(let e=0;e<3;++e){V+=1;const n=I[V],r=z[V],i=F[V],o=R[V],s=G[V],a=N[V],u=U[V],c=W[V],l=L[V],h=P[V],f=B[V],p=O[V],d=T[V],v=D[V],g=this.basisVectorCollapsed[e],m=this.basisVectorCollapsed[(e+1)%3],y=this.basisVectorCollapsed[(e+2)%3],b=k[e],w=k[(e+1)%3].clone(),_=k[(e+2)%3].clone();if(d&&!g){const s=new t.Vector3(0,0,0),c=b.clone(),l=c.clone().multiplyScalar(.5);let h,f;if(m&&y)f=new t.Vector3(0,0,1),h=(new t.Vector3).crossVectors(b,f);else if(m)f=(new t.Vector3).crossVectors(b,_),h=(new t.Vector3).crossVectors(b,f);else if(y)f=(new t.Vector3).crossVectors(b,w),h=(new t.Vector3).crossVectors(b,f);else{const e=(new t.Vector3).crossVectors(b,w),n=(new t.Vector3).crossVectors(b,_);h=(new t.Vector3).sub(e).add(n)}h.normalize(),h.multiplyScalar(.8),l.add(h);const p=this.createLabel(l,n,r,i,o,new t.Vector2(0,0),a,u);this.latticeConstantsGroup.add(p),this.axisLabels.push(p);const d=new t.MeshBasicMaterial({color:r,transparent:!0,opacity:.75}),v=b.clone(),g=this.createCylinder(s.clone(),v.clone().add(s),.09,10,d);this.latticeConstantsGroup.add(g);const x=new t.MeshBasicMaterial({color:"#000000"}),A=this.basisVectors[e].clone(),E=A.clone().multiplyScalar(1+1.3/A.length()),M=this.createCylinder(s.clone(),E,.02,10,x);this.latticeConstantsGroup.add(M);const C=new t.CylinderGeometry(0,.1,.5,12),S=new t.MeshBasicMaterial({color:0}),j=new t.Mesh(C,S);j.position.copy(c).multiplyScalar(1+1.3/c.length()),j.lookAt(new t.Vector3),j.rotateX(-Math.PI/2),this.latticeConstantsGroup.add(j)}if(v&&!g&&!m){const e=new t.LineDashedMaterial({color:0,linewidth:2,dashSize:.2,gapSize:.1}),n=(new t.Vector3).crossVectors(b,w),r=b.angleTo(w),i=Math.max(Math.min(1/4*b.length(),1/4*w.length()),1),o=20,a=new t.EllipseCurve(0,0,i,i,0,r,!1,0).getSpacedPoints(o),u=(new t.BufferGeometry).setFromPoints(a),d=new t.Line(u,e);d.computeLineDistances();const v=new t.Vector3(1,0,0),g=(new t.Quaternion).setFromUnitVectors(v,b.clone().normalize());d.quaternion.copy(g);const m=u.attributes.position.array,y=m.length/3,_=(new t.Vector3).fromArray(m,3*(y-1));d.updateMatrixWorld();const x=d.localToWorld(_.clone()),A=b,E=(new t.Vector3).crossVectors(A,x);let M=n.angleTo(E);(new t.Vector3).crossVectors(w,x).dot(A)>0&&(M=-M),d.rotateX(M),d.updateMatrixWorld(),d.updateMatrix();const C=d.localToWorld((new t.Vector3).fromArray(m,3*(o/2-1))),S=C.length();C.multiplyScalar(1+.3/S);const j=this.createLabel(C,h.toString(),l,c,s,new t.Vector2(0,0),p,f);this.latticeConstantsGroup.add(j),this.axisLabels.push(j),this.angleArcs.add(d)}}}getPositionsLocal(){return this.positions}getPositionsGlobal(){const e=this.positions.length,n=[];this.atomsObject.updateMatrixWorld();for(let r=0;r<e;++r){const e=this.atomsObject.getObjectByName(`atom${r}`),i=new t.Vector3;e.getWorldPosition(i),n.push(i)}return n}getCOCGlobal(){let e=(new t.Vector3).add(this.basisVectors[0]).add(this.basisVectors[1]).add(this.basisVectors[2]).multiplyScalar(.5);return this.root.updateMatrixWorld(),e=this.root.localToWorld(e),e}toVectors(e){const n=[];for(let r=0,i=e.length;r<i;++r)n.push((new t.Vector3).fromArray(e[r]));return n}toCartesian(t,e=!0){if(e){const e=[];for(let n=0,r=t.length;n<r;++n)e.push(t[n].clone().applyMatrix3(this.B));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.B)}toScaled(t,e=!0){if(e){const e=[];for(let n=0,r=t.length;n<r;++n)e.push(t[n].clone().applyMatrix3(this.Bi));return e}for(let e=0,n=t.length;e<n;++e)t[e].applyMatrix3(this.Bi)}getAtom(t){return this.atomsObject.getObjectByName(`atom${t}`)}setupLights(){this.lights=[];const e=2048,n=-.001,r=new t.DirectionalLight(16777215,.45);r.shadow.mapSize.width=e,r.shadow.mapSize.height=e,r.shadow.bias=n,r.shadow.camera.left=-50,r.shadow.camera.right=50,r.shadow.camera.top=50,r.shadow.camera.bottom=-50,r.position.set(0,0,20),this.sceneStructure.add(r),this.lights.push(r);const i=new t.DirectionalLight(16777215,.3);i.shadow.mapSize.width=e,i.shadow.mapSize.height=e,i.shadow.bias=n,i.position.set(-20,0,-20);const o=new t.DirectionalLight(16777215,.25);o.shadow.mapSize.width=e,o.shadow.mapSize.height=e,o.shadow.bias=n,o.position.set(20,0,-20);const s=new t.AmbientLight(4210752,1.7);this.sceneStructure.add(s)}createBasisVectors(e){if(void 0===e)return this.basisVectors=void 0,this.B=void 0,void(this.Bi=void 0);const n=(new t.Vector3).fromArray(e[0]),r=(new t.Vector3).fromArray(e[1]),i=(new t.Vector3).fromArray(e[2]);this.basisVectors=[n,r,i];const o=new t.Matrix3;o.set(n.x,r.x,i.x,n.y,r.y,i.y,n.z,r.z,i.z),this.basisVectorCollapsed=[];for(let t=0;t<3;++t){const e=this.basisVectors[t].length();this.basisVectorCollapsed.push(e<1e-6)}this.basisVectorCollapsed.some((t=>t))?(this.B=void 0,this.Bi=void 0):(this.B=o,this.Bi=(new t.Matrix3).copy(o).invert())}getRadii(t){return this.atomicRadii[t]||this.radii_unknown}getColor(t,e){return"Jmol"===t.color?this.elementColors[e]||this.color_unknown:t.color}createCell(e,n,r,i,o,s,a,u){const c=new t.Object3D;let l;l=0!==a||0!==u?new t.LineDashedMaterial({color:o,linewidth:s,dashSize:a,gapSize:u}):new t.LineBasicMaterial({color:o,linewidth:s});for(let o=n.length,s=0;s<o;++s){const a=n[s].clone(),u=r[s],h=l.clone();if(i[s]||!u){const n=[];n.push(e.clone()),n.push(a.clone().add(e));const r=(new t.BufferGeometry).setFromPoints(n),i=new t.Line(r,h);c.add(i),i.computeLineDistances()}const f=n[(s+1)%o].clone();if(i[s]&&i[(s+1)%3]||!u){const n=l.clone(),r=[];r.push(f.clone().add(e)),r.push(a.clone().add(f).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}const p=n[(s+2)%o].clone();if(i[s]&&i[(s+2)%3]||!u){const n=l.clone(),r=[];r.push(p.clone().add(e)),r.push(a.clone().add(p).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}if(i[s]&&i[(s+2)%3]&&i[(s+1)%3]||!u){const n=l.clone(),r=[];r.push(f.clone().add(p).add(e)),r.push(a.clone().add(f).add(p).add(e));const i=(new t.BufferGeometry).setFromPoints(r),o=new t.Line(i,n);c.add(o),o.computeLineDistances()}}return c}repeat(e,n,r){const i=new t.Vector3(1,0,0),o=new t.Vector3(0,1,0),s=new t.Vector3(0,0,1),a=[],u=[];for(let c=0;c<e[0];++c)for(let l=0;l<e[1];++l)for(let h=0;h<e[2];++h)if(0!=c||0!=l||0!=h){const e=i.clone().multiplyScalar(c),f=o.clone().multiplyScalar(l),p=s.clone().multiplyScalar(h);for(let i=0,o=n.length;i<o;++i){const o=(new t.Vector3).copy(n[i]);o.add(e),o.add(f),o.add(p);const s=r[i];a.push(o),u.push(s)}}for(let t=0;t<a.length;++t)n.push(a[t]),r.push(u[t])}wrap(t=!0){const e=this.structure.pbc;if(e.some((t=>t))){if((0,u.isNil)(this.B))throw Error("Could not wrap as cell is not set.");if(t){const t=this.toScaled(this.positions,!0);for(let n=t.length,r=0;r<n;++r){const n=t[r];e[0]&&(n.x=n.x<0?1+n.x%1:n.x%1),e[1]&&(n.y=n.y<0?1+n.y%1:n.y%1),e[2]&&(n.z=n.z<0?1+n.z%1:n.z%1)}this.setPositions(t,!0)}else this.setPositions(this.positionsOriginal,!1)}}setPositions(t,e=!1){e&&this.toCartesian(t,!1);for(let e=0,n=t.length;e<n;++e){const n=t[e];this.getAtom(e).position.copy(n)}this.positions=t}addBoundaryAtoms(e,n,r){for(let i=e.length,o=0;o<i;++o){const i=e[o],s=n[o],a=i.x,u=i.y,c=i.z,l=this.almostEqual(0,a,this.basisVectors[0],r),h=this.almostEqual(0,u,this.basisVectors[1],r),f=this.almostEqual(0,c,this.basisVectors[2],r);l&&h&&f?(e.push(new t.Vector3(1,0,0).add(i)),n.push(s),e.push(new t.Vector3(0,1,0).add(i)),n.push(s),e.push(new t.Vector3(0,0,1).add(i)),n.push(s),e.push(new t.Vector3(1,1,0).add(i)),n.push(s),e.push(new t.Vector3(0,1,1).add(i)),n.push(s),e.push(new t.Vector3(1,0,1).add(i)),n.push(s),e.push(new t.Vector3(1,1,1).add(i)),n.push(s)):l&&h&&!f?(e.push(new t.Vector3(1,0,0).add(i)),n.push(s),e.push(new t.Vector3(0,1,0).add(i)),n.push(s),e.push(new t.Vector3(1,1,0).add(i)),n.push(s)):!l&&h&&f?(e.push(new t.Vector3(0,1,0).add(i)),n.push(s),e.push(new t.Vector3(0,0,1).add(i)),n.push(s),e.push(new t.Vector3(0,1,1).add(i)),n.push(s)):l&&!h&&f?(e.push(new t.Vector3(1,0,0).add(i)),n.push(s),e.push(new t.Vector3(0,0,1).add(i)),n.push(s),e.push(new t.Vector3(1,0,1).add(i)),n.push(s)):!l||h||f?l||!h||f?l||h||!f||(e.push(new t.Vector3(0,0,1).add(i)),n.push(s)):(e.push(new t.Vector3(0,1,0).add(i)),n.push(s)):(e.push(new t.Vector3(1,0,0).add(i)),n.push(s))}}createAtoms(e,n,r,i=!0,o){this.atomsObject.remove(...this.atomsObject.children),this.elements={},this.atomFills=[],this.atomOutlines=[],r.some((t=>!0===t))&&(i&&"boundary"===o.type?this.addBoundaryAtoms(e,n,o.tolerance):i&&Array.isArray(o)&&this.repeat(o,e,n));const s=[];for(const n of e){const e=new t.Vector3;i?(e.add(this.basisVectors[0].clone().multiplyScalar(n.x)),e.add(this.basisVectors[1].clone().multiplyScalar(n.y)),e.add(this.basisVectors[2].clone().multiplyScalar(n.z))):e.copy(n),s.push(e)}this.positions=s,this.positionsOriginal=s.map((t=>t.clone())),this.atomicNumbers=n;for(const t of n){const e=this.elementNames[t];this.elements[e]=[this.jmolColors[t],this.covalentRadii[t]]}}almostEqual(t,e,n,r){const i=e-t;return Math.abs(n.clone().multiplyScalar(i).length())<r}addBond(e,n,r,i,o,s){const a=s.radius,u=s.smoothness,c=Math.ceil(360/(180-u)),l=this.createCylinder(r,i,a,c,o);l.name="fill",this.bondFills.push(l);const h=new t.Group;if(h.name="bond"+e+"-"+n,h.add(l),s.outline.enabled){const e=s.outline.size/a+1,n=new t.MeshBasicMaterial({color:s.outline.color,side:t.BackSide}),o=this.createCylinder(r,i,e*a,10,n);o.name="outline",h.add(o)}this.bondsObject.add(h)}updateAtom(e,n,r){var i,o;const s=this.atomicNumbers[e],a=this.positions[e],c=`${r}_${s}`,l=this.meshMap[c];if((0,u.isNil)(l)){this.meshMap[c]={};const e=this.createAtomGeometry(n,s),r=this.createAtomMaterial(n,s),o=new t.Mesh(e,r);if(this.meshMap[c].atom=o,null===(i=null==n?void 0:n.outline)||void 0===i?void 0:i.enabled){const e=this.createAtomOutlineGeometry(n,s),r=this.createAtomOutlineMaterial(n),i=new t.Mesh(e,r);this.meshMap[c].outline=i}}const h=this.atomsObject.getObjectByName(`atom${e}`);(0,u.isNil)(h)||h.removeFromParent();const f=this.meshMap[c],p=new t.Vector3;p.copy(a);const d=new t.Group;d.name="atom"+e;const v=f.atom.clone();if(v.name="fill",d.add(v),null===(o=null==n?void 0:n.outline)||void 0===o?void 0:o.enabled){const t=f.outline.clone();this.atomOutlines.push(t),t.name="outline",d.add(t)}d.position.copy(p),this.atomsObject.add(d),this.atomFills.push(v)}createAtomGeometry(e,n){const r="covalent"===e.radius?this.getRadii(n):e.radius,i=e.scale*r,o=e.smoothness,s=Math.ceil(360/(180-o));return new t.SphereGeometry(i,s,s)}createAtomMaterial(e,n){var r,i,o;let s;const a=this.getColor(e,n);if(void 0!==(null===(r=null==e?void 0:e.material)||void 0===r?void 0:r.toon)){const n=null===(o=null===(i=null==e?void 0:e.material)||void 0===i?void 0:i.toon)||void 0===o?void 0:o.tones,r=new Uint8Array(n);for(let t=0;t<=n;t++)r[t]=t/n*256;const u=new t.DataTexture(r,r.length,1,t.LuminanceFormat);u.minFilter=t.NearestFilter,u.magFilter=t.NearestFilter,u.generateMipmaps=!1,s=new t.MeshToonMaterial({color:a,gradientMap:u})}else s=new t.MeshPhongMaterial({color:a,shininess:e.material.phong.shininess,opacity:e.opacity,transparent:1!==e.opacity});return s}createAtomOutlineGeometry(e,n){var r;const i="covalent"===e.radius?this.getRadii(n):e.radius,o=e.scale*i,s=(null===(r=null==e?void 0:e.outline)||void 0===r?void 0:r.size)/o+1,a=e.smoothness,u=Math.ceil(360/(180-a));return new t.SphereGeometry(o*s,u,u)}createAtomOutlineMaterial(e){var n;return new t.MeshBasicMaterial({color:null===(n=null==e?void 0:e.outline)||void 0===n?void 0:n.color,side:t.BackSide,opacity:e.opacity,transparent:1!==e.opacity})}render(){const e=this.rootElement,n=e.clientWidth,r=e.clientHeight,i=new t.Vector3(1,0,0),o=new t.Vector3(0,0,0),s=[i,o];for(let t=0;t<s.length;++t){const e=s[t];this.camera.localToWorld(e),e.project(this.camera),e.x=Math.round((e.x+1)*n/2),e.y=Math.round((1-e.y)*r/2)}const a=(new t.Vector3).subVectors(o,i).length(),u=8/Math.pow(a,.5);if(void 0!==this.axisLabels)for(let t=0;t<this.axisLabels.length;++t)this.axisLabels[t].scale.set(u,u,1);super.render()}getRepetitions(t,e){const n=t.length();return Math.max(Math.floor(e/n)-1,1)}}class p{constructor(t,e){this.vertex=null,this.prev=null,this.next=null,this.twin=null,this.face=null,this.vertex=t,this.face=e}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceTo(t.point):-1}lengthSquared(){const t=this.head(),e=this.tail();return null!==e?e.point.distanceToSquared(t.point):-1}setTwin(t){return this.twin=t,t.twin=this,this}}class d{constructor(e,n,r){this.normal=new t.Vector3,this.midpoint=new t.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null;var i=new p(e,this),o=new p(n,this),s=new p(r,this);i.next=s.prev=o,o.next=i.prev=s,s.next=o.prev=i,this.edge=i,this.compute()}getEdge(t){for(var e=this.edge;t>0;)e=e.next,t--;for(;t<0;)e=e.prev,t++;return e}compute(){var e;void 0===e&&(e=new t.Triangle);var n=this.edge.tail(),r=this.edge.head(),i=this.edge.next.head();return e.set(n.point,r.point,i.point),e.getNormal(this.normal),e.getMidpoint(this.midpoint),this.area=e.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(t){return this.normal.dot(t)-this.constant}}const v=function(){var e,n,r,i=new t.Vector3;function o(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new a,this.unassigned=new a,this.vertices=[]}function s(t){this.point=t,this.prev=null,this.next=null,this.face=null}function a(){this.head=null,this.tail=null}return Object.assign(o.prototype,{setFromPoints:function(t){!0!==Array.isArray(t)&&console.error("THREE.ConvexHull: Points parameter is not an array."),t.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.vertices.push(new s(t[e]));return this.compute(),this},setFromObject:function(e){var n=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var r,i,o,s=e.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(r=0,i=a.length;r<i;r++)(o=a[r].clone()).applyMatrix4(e.matrixWorld),n.push(o)}else if(s.isBufferGeometry){var u=s.attributes.position;if(void 0!==u)for(r=0,i=u.count;r<i;r++)(o=new t.Vector3).fromBufferAttribute(u,r).applyMatrix4(e.matrixWorld),n.push(o)}})),this.setFromPoints(n)},containsPoint:function(t){for(var e=this.faces,n=0,r=e.length;n<r;n++)if(e[n].distanceToPoint(t)>this.tolerance)return!1;return!0},intersectRay:function(t,e){for(var n=this.faces,r=-1/0,i=1/0,o=0,s=n.length;o<s;o++){var a=n[o],u=a.distanceToPoint(t.origin),c=a.normal.dot(t.direction);if(u>0&&c>=0)return null;var l=0!==c?-u/c:0;if(!(l<=0)&&(c>0?i=Math.min(l,i):r=Math.max(l,r),r>i))return null}return r!==-1/0?t.at(r,e):t.at(i,e),e},intersectsRay:function(t){return null!==this.intersectRay(t,i)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(t,e){return t.face=e,null===e.outside?this.assigned.append(t):this.assigned.insertBefore(e.outside,t),e.outside=t,this},removeVertexFromFace:function(t,e){return t===e.outside&&(null!==t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.assigned.remove(t),this},removeAllVerticesFromFace:function(t){if(null!==t.outside){for(var e=t.outside,n=t.outside;null!==n.next&&n.next.face===t;)n=n.next;return this.assigned.removeSubList(e,n),e.prev=n.next=null,t.outside=null,e}},deleteFaceVertices:function(t,e){var n=this.removeAllVerticesFromFace(t);if(void 0!==n)if(void 0===e)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;e.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,e):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(t){if(!1===this.unassigned.isEmpty()){var e=this.unassigned.first();do{for(var n=e.next,r=this.tolerance,i=null,o=0;o<t.length;o++){var s=t[o];if(0===s.mark){var a=s.distanceToPoint(e.point);if(a>r&&(r=a,i=s),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(e,i),e=n}while(null!==e)}return this},computeExtremes:function(){var e,n,r,i=new t.Vector3,o=new t.Vector3,s=[],a=[];for(e=0;e<3;e++)s[e]=a[e]=this.vertices[0];for(i.copy(this.vertices[0].point),o.copy(this.vertices[0].point),e=0,n=this.vertices.length;e<n;e++){var u=this.vertices[e],c=u.point;for(r=0;r<3;r++)c.getComponent(r)<i.getComponent(r)&&(i.setComponent(r,c.getComponent(r)),s[r]=u);for(r=0;r<3;r++)c.getComponent(r)>o.getComponent(r)&&(o.setComponent(r,c.getComponent(r)),a[r]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(i.x),Math.abs(o.x))+Math.max(Math.abs(i.y),Math.abs(o.y))+Math.max(Math.abs(i.z),Math.abs(o.z))),{min:s,max:a}},computeInitialHull:function(){void 0===e&&(e=new t.Line3,n=new t.Plane,r=new t.Vector3);var i,o,s,a,u,c,l,h,f,p=this.vertices,v=this.computeExtremes(),g=v.min,m=v.max,y=0,b=0;for(c=0;c<3;c++)(f=m[c].point.getComponent(c)-g[c].point.getComponent(c))>y&&(y=f,b=c);for(o=g[b],s=m[b],y=0,e.set(o.point,s.point),c=0,l=this.vertices.length;c<l;c++)(i=p[c])!==o&&i!==s&&(e.closestPointToPoint(i.point,!0,r),(f=r.distanceToSquared(i.point))>y&&(y=f,a=i));for(y=-1,n.setFromCoplanarPoints(o.point,s.point,a.point),c=0,l=this.vertices.length;c<l;c++)(i=p[c])!==o&&i!==s&&i!==a&&(f=Math.abs(n.distanceToPoint(i.point)))>y&&(y=f,u=i);var w=[];if(n.distanceToPoint(u.point)<0)for(w.push(new d(o,s,a),new d(u,s,o),new d(u,a,s),new d(u,o,a)),c=0;c<3;c++)h=(c+1)%3,w[c+1].getEdge(2).setTwin(w[0].getEdge(h)),w[c+1].getEdge(1).setTwin(w[h+1].getEdge(0));else for(w.push(new d(o,a,s),new d(u,o,s),new d(u,s,a),new d(u,a,o)),c=0;c<3;c++)h=(c+1)%3,w[c+1].getEdge(2).setTwin(w[0].getEdge((3-c)%3)),w[c+1].getEdge(0).setTwin(w[h+1].getEdge(1));for(c=0;c<4;c++)this.faces.push(w[c]);for(c=0,l=p.length;c<l;c++)if((i=p[c])!==o&&i!==s&&i!==a&&i!==u){y=this.tolerance;var _=null;for(h=0;h<4;h++)(f=this.faces[h].distanceToPoint(i.point))>y&&(y=f,_=this.faces[h]);null!==_&&this.addVertexToFace(i,_)}return this},reindexFaces:function(){for(var t=[],e=0;e<this.faces.length;e++){var n=this.faces[e];0===n.mark&&t.push(n)}return this.faces=t,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var t,e=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>e&&(e=i,t=r),r=r.next}while(null!==r&&r.face===n);return t}},computeHorizon:function(t,e,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===e?e=n.getEdge(0):e.next;do{var o=i.twin,s=o.face;0===s.mark&&(s.distanceToPoint(t)>this.tolerance?this.computeHorizon(t,o,s,r):r.push(i)),i=i.next}while(i!==e);return this},addAdjoiningFace:function(t,e){var n=new d(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setTwin(e.twin),n.getEdge(0)},addNewFaces:function(t,e){this.newFaces=[];for(var n=null,r=null,i=0;i<e.length;i++){var o=e[i],s=this.addAdjoiningFace(t,o);null===n?n=s:s.next.setTwin(r),this.newFaces.push(s.face),r=s}return n.next.setTwin(r),this},addVertexToHull:function(t){var e=[];return this.unassigned.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var t;for(this.computeInitialHull();void 0!==(t=this.nextVertexToAdd());)this.addVertexToHull(t);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(a.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(t,e){return e.prev=t.prev,e.next=t,null===e.prev?this.head=e:e.prev.next=e,t.prev=e,this},insertAfter:function(t,e){return e.prev=t,e.next=t.next,null===e.next?this.tail=e:e.next.prev=e,t.next=e,this},append:function(t){return null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t,this},appendChain:function(t){for(null===this.head?this.head=t:this.tail.next=t,t.prev=this.tail;null!==t.next;)t=t.next;return this.tail=t,this},remove:function(t){return null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this},removeSubList:function(t,e){return null===t.prev?this.head=e.next:t.prev.next=e.next,null===e.next?this.tail=t.prev:e.next.prev=t.prev,this},isEmpty:function(){return null===this.head}}),o}();var g=n(591),m=n(301),y=n.n(m);class b extends c{constructor(t,e={}){super(t,e),this.hostElement=t}setOptions(t){this.controlDefaults=(0,u.merge)((0,u.cloneDeep)({zoom:{enabled:!0,speed:.2},rotation:{enabled:!0,speed:40},pan:{enabled:!0,speed:10},resetOnDoubleClick:!0}),(0,u.cloneDeep)(null==t?void 0:t.controls))}setupScenes(){this.scenes=[],this.sceneRoot=new t.Scene,this.scenes.push(this.sceneRoot),this.sceneInfo=new t.Scene,this.scenes.push(this.sceneInfo),this.root=new t.Object3D,this.sceneRoot.add(this.root),this.info=new t.Object3D,this.sceneInfo.add(this.info),this.objects=[this.root,this.info]}setupLights(){const e=new t.DirectionalLight(16777215,.45);e.position.set(0,0,20),this.sceneRoot.add(e);const n=new t.DirectionalLight(16777215,.3);n.position.set(-20,0,-20),this.sceneRoot.add(n);const r=new t.DirectionalLight(16777215,.25);r.position.set(20,0,-20),this.sceneRoot.add(r);const i=new t.AmbientLight(4210752,3.7);this.sceneRoot.add(i)}load(e,n){var r,i,o,s,a,c,l,h,f,p,d,m,b,w,_,x,A,E,M,C,S;if(this.basis=e.basis,this.segments=e.segments,this.kpoints=e.kpoints,!this.basis||!this.segments)throw Error("The data given for the Brillouin zone viewer is incomplete.");(0,u.isNil)(this.info)||this.info.clear(),(0,u.isNil)(this.root)||this.root.clear();const j=(0,u.merge)((0,u.cloneDeep)({basis:{offset:.02,font:"Arial",size:.03,stroke:{width:.06,color:"#000"},a:{label:"a"},b:{label:"b"},c:{label:"c"}},segments:{color:"#E56400",linewidth:.0025},kpoints:{point:{enabled:!0,size:.01,color:"#E56400"},label:{enabled:!0,font:"Arial",size:.025,color:"#E56400",offset2D:[0,-.75],stroke:{width:.06,color:"#000"}}},faces:{color:"#ddd",opacity:.7,outline:{width:.002,color:"#999"}}}),(0,u.cloneDeep)(n||{})),k=this.basis,V=this.segments,z=this.kpoints,L=new t.Matrix3,B=(new t.Vector3).fromArray(k[0]),O=(new t.Vector3).fromArray(k[1]),P=(new t.Vector3).fromArray(k[2]);L.set(B.x,O.x,P.x,B.y,O.y,P.y,B.z,O.z,P.z),this.basisVectors=[B,O,P],this.B=L;const I=(new t.Matrix3).identity(),D=[];for(let e=-1;e<=1;++e)for(let n=-1;n<=1;++n)for(let r=-1;r<=1;++r){const i=new t.Vector3(e,n,r),o=this.coordinateTransform(this.B,I,i,!1);D.push(o.toArray())}const T=y()(D);let F;for(const e of T.cells){const n=[];let r=!0,i=!0;for(const t of e){if(-1===t){r=!1;break}const e=T.positions[t];for(let t=0;t<3;++t)if(Number.isNaN(e[t])){i=!1;break}n.push(e)}if(!r||!i)continue;const o=new t.Vector3(0,0,0),s=[];for(let e=0;e<n.length;++e){const r=(new t.Vector3).fromArray(n[e]);s.push(r),o.add(r)}if(o.divideScalar(s.length),o.length()<1e-7){F=s;break}}const{geometry:R,faces:U}=function(e){const n=new t.BufferGeometry,r=[],i=[],o=(new v).setFromPoints(e).faces;for(let t=0;t<o.length;t++){const e=o[t];let n=e.edge;do{const t=n.head().point;r.push(t.x,t.y,t.z),i.push(e.normal.x,e.normal.y,e.normal.z),n=n.next}while(n!==e.edge)}n.setAttribute("position",new t.Float32BufferAttribute(r,3)),n.setAttribute("normal",new t.Float32BufferAttribute(i,3));const s=[],a=new Set(o);for(let t of a){const e=[],n=t.edge;let r=t.edge;e.push(n.tail().point);do{const n=t.normal,i=r.twin.face,o=i.normal;Math.abs(n.dot(o)-1)<=1e-8?(t=i,r=r.twin.next):(e.push(r.head().point),r=r.next),a.delete(t)}while(r!==n);s.push(e)}return{geometry:n,faces:s}}(F),N=new t.Group;N.name="group";const W=new t.MeshPhongMaterial({color:j.faces.color,opacity:j.faces.opacity,transparent:!0}),G=new t.Mesh(R,W);G.name="innermesh",G.material.side=t.BackSide,G.renderOrder=0,N.add(G);const H=new t.Mesh(R,W.clone());H.name="outermesh",H.material.side=t.FrontSide,H.renderOrder=1,N.add(H),this.root.add(N);const Y=j.faces.outline.width,q=new g.MeshLineMaterial({color:j.faces.outline.color,lineWidth:Y,sizeAttenuation:!0});for(const e of U){const n=[];for(const t of e){let e=t.clone();const r=e.length();e=e.multiplyScalar(1+.5*Y/r),n.push(e)}const r=new g.MeshLine;r.setPoints(n);const i=new t.Mesh(r,q);this.root.add(i)}const $=[j.basis.a.label,j.basis.b.label,j.basis.c.label],Z=[];Z.push(void 0===(null===(r=j.basis.a)||void 0===r?void 0:r.font)?j.basis.font:j.basis.a.font),Z.push(void 0===(null===(i=j.basis.b)||void 0===i?void 0:i.font)?j.basis.font:j.basis.b.font),Z.push(void 0===(null===(o=j.basis.c)||void 0===o?void 0:o.font)?j.basis.font:j.basis.c.font);const X=[];X.push(void 0===(null===(s=j.basis.a)||void 0===s?void 0:s.size)?j.basis.size:j.basis.a.size),X.push(void 0===(null===(a=j.basis.b)||void 0===a?void 0:a.size)?j.basis.size:j.basis.b.size),X.push(void 0===(null===(c=j.basis.c)||void 0===c?void 0:c.size)?j.basis.size:j.basis.c.size);const K=[];K.push(void 0===(null===(l=j.basis.a)||void 0===l?void 0:l.color)?j.basis.color:j.basis.a.color),K.push(void 0===(null===(h=j.basis.b)||void 0===h?void 0:h.color)?j.basis.color:j.basis.b.color),K.push(void 0===(null===(f=j.basis.c)||void 0===f?void 0:f.color)?j.basis.color:j.basis.c.color);const J=[];J.push(void 0===(null===(d=null===(p=j.basis.a)||void 0===p?void 0:p.stroke)||void 0===d?void 0:d.color)?j.basis.stroke.color:j.basis.a.stroke.color),J.push(void 0===(null===(b=null===(m=j.basis.b)||void 0===m?void 0:m.stroke)||void 0===b?void 0:b.color)?j.basis.stroke.color:j.basis.b.stroke.color),J.push(void 0===(null===(_=null===(w=j.basis.c)||void 0===w?void 0:w.stroke)||void 0===_?void 0:_.color)?j.basis.stroke.color:j.basis.c.stroke.color);const Q=[];Q.push(void 0===(null===(A=null===(x=j.basis.a)||void 0===x?void 0:x.stroke)||void 0===A?void 0:A.width)?j.basis.stroke.width:j.basis.a.stroke.width),Q.push(void 0===(null===(M=null===(E=j.basis.b)||void 0===E?void 0:E.stroke)||void 0===M?void 0:M.width)?j.basis.stroke.width:j.basis.b.stroke.width),Q.push(void 0===(null===(S=null===(C=j.basis.c)||void 0===C?void 0:C.stroke)||void 0===S?void 0:S.width)?j.basis.stroke.width:j.basis.c.stroke.width);for(let e=0;e<3;++e){const n=.7,r=k[e],i=new t.Vector3(0,0,0),o=(new t.Vector3).fromArray(r).multiplyScalar(n),s=[i,o],a=new g.MeshLineMaterial({color:"#000",lineWidth:75e-5,sizeAttenuation:!0,dashArray:.05,transparent:!0,depthTest:!1}),u=new g.MeshLine;u.setPoints(s);const c=new t.Mesh(u,a);this.info.add(c);const l=(new t.Vector3).copy(o).multiplyScalar(1+j.basis.offset/o.length()),h=$[e],f=K[e],p=Z[e],d=X[e],v=Q[e],m=J[e],y=this.createLabel(l,h,f,p,d,new t.Vector2(0,0),v,m);this.info.add(y);const b=new t.CylinderGeometry(0,.003,.012,12),w=new t.MeshBasicMaterial({color:0}),_=new t.Mesh(b,w);_.position.copy(o),_.lookAt(new t.Vector3),_.rotateX(-Math.PI/2),this.info.add(_)}const tt=new g.MeshLineMaterial({color:j.segments.color,lineWidth:j.segments.linewidth,sizeAttenuation:!0}),et=[];for(let e=0;e<V.length;++e){const n=[],r=V[e];for(const e of r){const r=(new t.Vector3).fromArray(e),i=this.coordinateTransform(this.B,I,r,!1);n.push(i),n.push(i),et.push(i)}const i=new g.MeshLine;i.setPoints(n);const o=new t.Mesh(i,tt);this.info.add(o)}this.labelPoints=new t.Object3D;for(const e of et){const n=new t.Object3D;n.position.copy(e),this.labelPoints.add(n)}if(this.info.add(this.labelPoints),z)for(const e of z){const n=e[0],r=(new t.Vector3).fromArray(e[1]),i=this.coordinateTransform(this.B,I,r,!1);if(j.kpoints.point.enabled){const t=this.createCircle(i,j.kpoints.point.size,j.kpoints.point.color);this.info.add(t)}if(j.kpoints.label.enabled){const e=this.createLabel(i,n,j.kpoints.label.color,j.kpoints.label.font,j.kpoints.label.size,(new t.Vector2).fromArray(j.kpoints.label.offset2D),j.kpoints.label.stroke.width,j.kpoints.label.stroke.width);this.info.add(e)}}}fit(e=0){const n=this.root.getObjectByName("group").getObjectByName("outermesh");this.root.updateMatrixWorld();const r=[],i=n.geometry.attributes.position.array,o=i.length/3;for(let e=0;e<o;++e)r.push((new t.Vector3).fromArray(i,3*e));const s=[];for(let t=0;t<o;++t){const e=r[t];s.push(n.localToWorld(e))}this.fitViewToPoints(s,e)}align(e){const n=new t.Vector3,r=this.labelPoints.children.length;for(let e=0;e<r;++e){const r=this.labelPoints.children[e];n.add(r.getWorldPosition(new t.Vector3))}const i={a:this.basisVectors[0].clone(),"-a":this.basisVectors[0].clone().negate(),b:this.basisVectors[1].clone(),"-b":this.basisVectors[1].clone().negate(),c:this.basisVectors[2].clone(),"-c":this.basisVectors[2].clone().negate(),segments:n};super.alignView(e,i)}createCircle(e,n,r){const i=document.createElement("canvas");i.width=256,i.height=256;const o=i.getContext("2d");o.beginPath(),o.arc(128,128,128,0,2*Math.PI),o.fillStyle=r,o.fill();const s=new t.Texture(i);s.needsUpdate=!0;const a=new t.SpriteMaterial({map:s}),u=new t.Sprite(a);u.scale.set(n,n,1);const c=new t.Object3D;return c.position.copy(e),c.add(u),c}}})(),materia=r})();